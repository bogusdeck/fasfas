{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/LoginForm.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { LOGIN_CONTENT, AUTH_STYLES } from '../utils/constants.js';\nimport { useAuth } from '../hooks/useAuth';\n\nexport default function LoginForm() {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n  const [error, setError] = useState('');\n  const [loginLoading, setLoginLoading] = useState(false);\n  const { isLoading, isAuthenticated, userData, login, redirectToDashboardOrRegistration } = useAuth();\n\n  // Handle redirect after authentication - now redirects to review step for completed onboarding\n  useEffect(() => {\n    if (isAuthenticated && userData) {\n      redirectToDashboardOrRegistration();\n    }\n  }, [isAuthenticated, userData, redirectToDashboardOrRegistration]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Clear error when user types\n    if (error) setError('');\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    // Validate form\n    if (!formData.email || !formData.password) {\n      setError('Email and password are required');\n      return;\n    }\n    \n    setLoginLoading(true);\n    \n    try {\n      const result = await login(formData.email, formData.password);\n      \n      if (!result.success) {\n        // Check if the error message indicates a non-existent user or invalid credentials\n        if (result.error?.toLowerCase().includes('user not found') || \n            result.error?.toLowerCase().includes('email not registered') ||\n            result.error?.toLowerCase().includes('user does not exist')) {\n          // Show a special error with a signup link\n          setError(\n            <div>\n              <span>This email is not registered. </span>\n              <Link href=\"/signup\" className=\"text-[#C3AF6C] hover:text-[#241331] underline font-bold transition-colors duration-200\">\n                Sign up instead?\n              </Link>\n            </div>\n          );\n        } else {\n          // Handle other types of errors (like incorrect password)\n          setError(result.error || 'Login failed. Please check your credentials.');\n        }\n      }\n      // If login successful, the useAuth hook will handle redirection\n      \n    } catch (loginError) {\n      console.error('Login error:', loginError);\n      setError('Network error. Please try again.');\n    } finally {\n      setLoginLoading(false);\n    }\n  };\n\n  // Display loading indicator while checking auth status\n  if (isLoading) {\n    return (\n      <div className={AUTH_STYLES.container}>\n        <div className={AUTH_STYLES.formContainer}>\n          <div className=\"flex flex-col items-center justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-[#241331] mb-6\"></div>\n            <p className=\"text-[#241331] font-itc-gothic font-bold\">Checking your login status...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={AUTH_STYLES.container}>\n      <div className={AUTH_STYLES.formContainer}>\n        <div className={AUTH_STYLES.header}>\n          <h2 className={AUTH_STYLES.title}>\n            {LOGIN_CONTENT.title}\n          </h2>\n          <p className={AUTH_STYLES.subtitle}>\n            {LOGIN_CONTENT.subtitle}\n          </p>\n        </div>\n        \n        <form className={AUTH_STYLES.form} onSubmit={handleSubmit}>\n          <div className={AUTH_STYLES.fieldGroup}>\n            <div className={AUTH_STYLES.fieldContainer}>\n              <label htmlFor=\"email\" className={AUTH_STYLES.label}>\n                {LOGIN_CONTENT.fields.email.label}\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type={LOGIN_CONTENT.fields.email.type}\n                required={LOGIN_CONTENT.fields.email.required}\n                className={`${AUTH_STYLES.input} ${error ? 'border-red-500' : ''}`}\n                placeholder={LOGIN_CONTENT.fields.email.placeholder}\n                value={formData.email}\n                onChange={handleChange}\n              />\n            </div>\n            \n            <div className={AUTH_STYLES.fieldContainer}>\n              <label htmlFor=\"password\" className={AUTH_STYLES.label}>\n                {LOGIN_CONTENT.fields.password.label}\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type={LOGIN_CONTENT.fields.password.type}\n                required={LOGIN_CONTENT.fields.password.required}\n                className={`${AUTH_STYLES.input} ${error ? 'border-red-500' : ''}`}\n                placeholder={LOGIN_CONTENT.fields.password.placeholder}\n                value={formData.password}\n                onChange={handleChange}\n              />\n            </div>\n            \n            {error && (\n              <div className=\"mt-2\">\n                <div className=\"text-xs text-red-500 font-itc-gothic\">\n                  {error}\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Link href=\"/forgot-password\" className={AUTH_STYLES.forgotPassword}>\n              {LOGIN_CONTENT.buttons.forgotPassword}\n            </Link>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loginLoading}\n              className={`${AUTH_STYLES.submitButton} ${\n                loginLoading ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {loginLoading ? (\n                <div className=\"flex items-center justify-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Signing in...\n                </div>\n              ) : (\n                LOGIN_CONTENT.buttons.submit\n              )}\n            </button>\n          </div>\n\n          <div className={AUTH_STYLES.linkContainer}>\n            <p className={AUTH_STYLES.linkText}>\n              {LOGIN_CONTENT.links.signup.text}{' '}\n              <Link href={LOGIN_CONTENT.links.signup.href} className={AUTH_STYLES.link}>\n                {LOGIN_CONTENT.links.signup.linkText}\n              </Link>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}