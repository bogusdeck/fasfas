{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/utils/api.js"],"sourcesContent":["// API Configuration and Utility Functions\n// ==============================================\n\n// Base API Configuration\nconst API_CONFIG = {\n  baseURL: 'http://15.207.254.95:8080',\n  timeout: 30000, // 30 seconds\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  }\n};\n\n// API Endpoints\nexport const API_ENDPOINTS = {\n  // Authentication Endpoints\n  auth: {\n    phoneRequest: '/api/brand/otp/phone/request/',\n    phoneVerify: '/api/brand/otp/phone/verify/',\n    emailRequest: '/api/brand/otp/email/request/',\n    emailVerify: '/api/brand/otp/email/verify/',\n    signup: '/api/brand/auth/signup/',\n    login: '/api/brand/auth/login/',\n  },\n  profile: {\n    status: '/api/brand/profile/status/',\n  }\n};\n\n// HTTP Methods\nconst HTTP_METHODS = {\n  GET: 'GET',\n  POST: 'POST',\n  PUT: 'PUT',\n  DELETE: 'DELETE',\n  PATCH: 'PATCH'\n};\n\n// Custom API Error Class\nexport class ApiError extends Error {\n  constructor(message, status, data = null) {\n    super(message);\n    this.name = 'ApiError';\n    this.status = status;\n    this.data = data;\n  }\n}\n\n// Generic API Request Function\nasync function apiRequest(endpoint, options = {}) {\n  const {\n    method = HTTP_METHODS.GET,\n    data = null,\n    headers = {},\n    timeout = API_CONFIG.timeout,\n    isFormData = false,\n  } = options;\n\n  const url = `${API_CONFIG.baseURL}${endpoint}`;\n  \n  // Prepare request configuration\n  const config = {\n    method,\n    headers: {\n      ...API_CONFIG.headers,\n      ...headers,\n    },\n  };\n\n  // Handle FormData (for file uploads)\n  if (isFormData && data) {\n    config.body = data;\n    // Remove Content-Type header for FormData (browser will set it with boundary)\n    delete config.headers['Content-Type'];\n  } else if (data) {\n    config.body = JSON.stringify(data);\n  }\n\n  // Add timeout functionality\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n  config.signal = controller.signal;\n\n  try {\n    console.log(`ðŸš€ API Request: ${method} ${url}`, data ? { data } : '');\n    \n    const response = await fetch(url, config);\n    clearTimeout(timeoutId);\n\n    // Parse response\n    let responseData;\n    const contentType = response.headers.get('content-type');\n    \n    if (contentType && contentType.includes('application/json')) {\n      responseData = await response.json();\n    } else {\n      responseData = await response.text();\n    }\n\n    // Handle HTTP errors\n    if (!response.ok) {\n      console.error(`âŒ API Error: ${response.status}`, responseData);\n      throw new ApiError(\n        responseData?.message || responseData?.error || `HTTP ${response.status}`,\n        response.status,\n        responseData\n      );\n    }\n\n    console.log(`âœ… API Success: ${method} ${url}`, responseData);\n    return responseData;\n\n  } catch (error) {\n    clearTimeout(timeoutId);\n    \n    if (error.name === 'AbortError') {\n      console.error('â° API Timeout:', url);\n      throw new ApiError('Request timeout', 408);\n    }\n    \n    if (error instanceof ApiError) {\n      throw error;\n    }\n    \n    console.error('ðŸ”¥ API Network Error:', error);\n    throw new ApiError('Network error', 0, error);\n  }\n}\n\n// ==============================================\n// AUTHENTICATION API FUNCTIONS\n// ==============================================\n\nexport const authApi = {\n  // Request OTP for phone number\n  requestPhoneOTP: async (phoneNumber) => {\n    return apiRequest(API_ENDPOINTS.auth.phoneRequest, {\n      method: HTTP_METHODS.POST,\n      data: { phone_number: phoneNumber }\n    });\n  },\n\n  // Verify phone OTP\n  verifyPhoneOTP: async (phoneNumber, otp) => {\n    return apiRequest(API_ENDPOINTS.auth.phoneVerify, {\n      method: HTTP_METHODS.POST,\n      data: { \n        phone_number: phoneNumber,\n        otp_code: otp\n      }\n    });\n  },\n\n  // Request OTP for email\n  // Request OTP for email\n  requestEmailOTP: async (email, phoneNumber) => {\n    return apiRequest(API_ENDPOINTS.auth.emailRequest, {\n      method: HTTP_METHODS.POST,\n      data: { \n        email: email,\n        phone_number: formatPhoneForAPI(phoneNumber),\n        is_phone_verified: true\n      }\n    });\n  },\n\n  // Verify email OTP\n  verifyEmailOTP: async (email, otp) => {\n    return apiRequest(API_ENDPOINTS.auth.emailVerify, {\n      method: HTTP_METHODS.POST,\n      data: { \n        email: email,\n        otp_code: otp\n      }\n    });\n  },\n\n  // Brand user signup/registration after email verification\n  register: async (userData) => {\n    return apiRequest(API_ENDPOINTS.auth.signup, {\n      method: HTTP_METHODS.POST,\n      data: userData\n    });\n  },\n\n  // User login with email and password\n  login: async (email, password) => {\n    return apiRequest(API_ENDPOINTS.auth.login, {\n      method: HTTP_METHODS.POST,\n      data: {\n        email: email,\n        password: password\n      }\n    });\n  }\n};\n\n// Profile API Functions\nexport const profileApi = {\n  // Get brand profile and onboarding status\n  getStatus: async () => {\n    return apiRequest(API_ENDPOINTS.profile.status, {\n      method: HTTP_METHODS.GET\n    });\n  },\n  \n  // Update registration/onboarding progress\n  updateProgress: async (step, isOnboarding) => {\n    return apiRequest(API_ENDPOINTS.profile.status, {\n      method: HTTP_METHODS.PUT,\n      data: {\n        current_step: step,\n        is_onboarding: isOnboarding\n      }\n    });\n  }\n};\n\n// ==============================================\n// HELPER FUNCTIONS\n// ==============================================\n\n// Format phone number for API (add country code if needed)\nexport function formatPhoneForAPI(phoneNumber) {\n  const cleanNumber = phoneNumber.replace(/\\D/g, '');\n  \n  // If it's a 10-digit Indian number, add country code\n  if (cleanNumber.length === 10 && /^[6-9]/.test(cleanNumber)) {\n    return `+91${cleanNumber}`;\n  }\n  \n  return cleanNumber;\n}\n\n// Handle API errors consistently\nexport function handleApiError(error, defaultMessage = 'An error occurred') {\n  if (error instanceof ApiError) {\n    // Return specific error message from API\n    return error.message || defaultMessage;\n  }\n  \n  if (error.name === 'AbortError') {\n    return 'Request timed out. Please try again.';\n  }\n  \n  if (!navigator.onLine) {\n    return 'No internet connection. Please check your network.';\n  }\n  \n  return defaultMessage;\n}\n\n// Check if response indicates success\nexport function isApiSuccess(response) {\n  return response && (\n    response.success === true ||\n    response.status === 'success' ||\n    response.message?.toLowerCase().includes('success')\n  );\n}\n\n// Default export for convenience\nconst apiUtils = {\n  authApi,\n  profileApi,\n  formatPhoneForAPI,\n  handleApiError,\n  isApiSuccess,\n  ApiError\n};\n\nexport default apiUtils;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/registration/StepHeader.jsx"],"sourcesContent":["import { REGISTRATION_STYLES } from '../../utils/constants';\n\nexport default function StepHeader({ title, subtitle }) {\n  return (\n    <div className={REGISTRATION_STYLES.header}>\n      <h2 className={REGISTRATION_STYLES.title}>\n        {title}\n      </h2>\n      <p className={REGISTRATION_STYLES.subtitle}>\n        {subtitle}\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE;IACpD,qBACE,8OAAC;QAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,MAAM;;0BACxC,8OAAC;gBAAG,WAAW,yHAAA,CAAA,sBAAmB,CAAC,KAAK;0BACrC;;;;;;0BAEH,8OAAC;gBAAE,WAAW,yHAAA,CAAA,sBAAmB,CAAC,QAAQ;0BACvC;;;;;;;;;;;;AAIT","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/registration/PhoneNumberStep.jsx"],"sourcesContent":["import { REGISTRATION_STYLES, MESSAGES } from '../../utils/constants';\nimport { authApi, formatPhoneForAPI, handleApiError } from '../../utils/api';\nimport { useState } from 'react';\n\nexport default function PhoneNumberStep({ formData, handleChange, onSubmit, onBack }) {\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const validateIndianPhoneNumber = (phoneNumber) => {\n    // Remove any spaces or special characters\n    const cleanNumber = phoneNumber.replace(/\\D/g, '');\n    \n    // Check if it's exactly 10 digits and starts with 6, 7, 8, or 9\n    const indianPhoneRegex = /^[6-9]\\d{9}$/;\n    return indianPhoneRegex.test(cleanNumber);\n  };\n\n  const handlePhoneChange = (e) => {\n    let value = e.target.value.replace(/\\D/g, ''); // Remove non-digits\n    \n    // Limit to 10 digits\n    if (value.length > 10) {\n      value = value.slice(0, 10);\n    }\n    \n    // Clear error when user starts typing\n    if (error) {\n      setError('');\n    }\n    \n    // Update the event target value\n    e.target.value = value;\n    handleChange(e);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    if (!validateIndianPhoneNumber(formData.phoneNumber)) {\n      setError(MESSAGES.errors.invalidIndianPhone);\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      // Format phone number for API\n      const formattedPhone = formatPhoneForAPI(formData.phoneNumber);\n      \n      // Call the phone OTP request API\n      const response = await authApi.requestPhoneOTP(formattedPhone);\n      \n      console.log('Phone OTP request successful:', response);\n      \n      // Store the formatted phone number\n      handleChange({\n        target: { name: 'phoneNumber', value: formData.phoneNumber }\n      });\n      \n      // Proceed to verification step\n      onSubmit();\n      \n    } catch (apiError) {\n      console.error('Phone OTP request failed:', apiError);\n      const errorMessage = handleApiError(apiError, 'Failed to send OTP. Please try again.');\n      setError(errorMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n      <div className={REGISTRATION_STYLES.fieldGroup}>\n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"phoneNumber\" className={REGISTRATION_STYLES.label}>\n            Phone Number\n          </label>\n          <div className=\"flex\">\n            <span className=\"inline-flex items-center px-3 py-3 border border-r-0 border-[#241331]/20 bg-[#241331]/5 text-[#241331] text-sm font-bold rounded-l-lg font-itc-gothic\">\n              +91\n            </span>\n            <input\n              id=\"phoneNumber\"\n              name=\"phoneNumber\"\n              type=\"tel\"\n              required\n              minLength={10}\n              maxLength={10}\n              className={`flex-1 appearance-none relative block px-3 py-3 border ${error ? 'border-red-500' : 'border-[#241331]/20'} placeholder-[#241331]/50 text-[#241331] rounded-r-lg focus:outline-none focus:ring-2 focus:ring-[#C3AF6C] focus:border-[#C3AF6C] focus:z-10 sm:text-sm font-itc-gothic transition-all duration-200`}\n              placeholder=\"9876543210\"\n              value={formData.phoneNumber}\n              onChange={handlePhoneChange}\n            />\n          </div>\n          {error && (\n            <p className=\"mt-1 text-xs text-red-600\">\n              {error}\n            </p>\n          )}\n          <p className=\"mt-1 text-xs text-gray-500\">\n            {MESSAGES.info.phoneNumberHelp}\n          </p>\n        </div>\n      </div>\n\n      <div className={REGISTRATION_STYLES.buttonGroup}>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.submitButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {isLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n              Sending OTP...\n            </div>\n          ) : (\n            'Send Verification Code'\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/registration/PhoneVerificationStep.jsx"],"sourcesContent":["import { REGISTRATION_STYLES, MESSAGES } from '../../utils/constants';\nimport { authApi, formatPhoneForAPI, handleApiError } from '../../utils/api';\nimport { useState } from 'react';\n\nexport default function PhoneVerificationStep({ formData, handleChange, onSubmit, onBack, onResend }) {\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isResending, setIsResending] = useState(false);\n\n  const validateVerificationCode = (code) => {\n    // Check if it's exactly 6 digits\n    const codeRegex = /^\\d{6}$/;\n    return codeRegex.test(code) && code.length === 6;\n  };\n\n  const handleCodeChange = (e) => {\n    let value = e.target.value.replace(/\\D/g, ''); // Remove non-digits\n    \n    // Limit to exactly 6 digits\n    if (value.length > 6) {\n      value = value.slice(0, 6);\n    }\n    \n    // Clear error when user starts typing\n    if (error) {\n      setError('');\n    }\n    \n    // Update the event target value\n    e.target.value = value;\n    handleChange(e);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    if (formData.verificationCode.length !== 6) {\n      setError('Please enter exactly 6 digits');\n      return;\n    }\n    \n    if (!validateVerificationCode(formData.verificationCode)) {\n      setError(MESSAGES.errors.invalidVerificationCode);\n      return;\n    }\n    \n    setIsLoading(true);\n\n    try {\n      // Format phone number for API\n      const formattedPhone = formatPhoneForAPI(formData.phoneNumber);\n      \n      // Call the phone OTP verification API\n      const response = await authApi.verifyPhoneOTP(formattedPhone, formData.verificationCode);\n      \n      console.log('Phone OTP verification successful:', response);\n      \n      // Proceed to next step\n      onSubmit();\n      \n    } catch (apiError) {\n      console.error('Phone OTP verification failed:', apiError);\n      const errorMessage = handleApiError(apiError, 'Invalid OTP. Please try again.');\n      setError(errorMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleResend = async () => {\n    setIsResending(true);\n    setError('');\n\n    try {\n      // Format phone number for API\n      const formattedPhone = formatPhoneForAPI(formData.phoneNumber);\n      \n      // Request new OTP\n      const response = await authApi.requestPhoneOTP(formattedPhone);\n      \n      console.log('OTP resent successfully:', response);\n      \n      // Clear the current verification code\n      handleChange({\n        target: { name: 'verificationCode', value: '' }\n      });\n      \n      // Call the original onResend if provided\n      if (onResend) {\n        onResend();\n      }\n      \n    } catch (apiError) {\n      console.error('Resend OTP failed:', apiError);\n      const errorMessage = handleApiError(apiError, 'Failed to resend OTP. Please try again.');\n      setError(errorMessage);\n    } finally {\n      setIsResending(false);\n    }\n  };\n\n  return (\n    <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n      <div className={REGISTRATION_STYLES.fieldGroup}>\n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"verificationCode\" className={REGISTRATION_STYLES.label}>\n            Verification Code\n          </label>\n          <input\n            id=\"verificationCode\"\n            name=\"verificationCode\"\n            type=\"text\"\n            required\n            minLength={6}\n            maxLength={6}\n            className={`${REGISTRATION_STYLES.codeInput} ${error ? 'border-red-500' : ''}`}\n            placeholder=\"123456\"\n            value={formData.verificationCode}\n            onChange={handleCodeChange}\n          />\n          {error && (\n            <p className=\"mt-1 text-xs text-red-600\">\n              {error}\n            </p>\n          )}\n          <p className=\"mt-1 text-xs text-gray-500\">\n            Enter the 6-digit code sent to +91{formData.phoneNumber}\n          </p>\n        </div>\n      </div>\n\n      <div className={REGISTRATION_STYLES.buttonGroup}>\n        <button\n          type=\"button\"\n          onClick={onBack}\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.backButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          Back\n        </button>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.submitButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {isLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n              Verifying...\n            </div>\n          ) : (\n            'Verify Phone'\n          )}\n        </button>\n      </div>\n\n      <button\n        type=\"button\"\n        onClick={handleResend}\n        disabled={isResending || isLoading}\n        className={`${REGISTRATION_STYLES.resendButton} ${\n          isResending || isLoading ? 'opacity-50 cursor-not-allowed' : ''\n        }`}\n      >\n        {isResending ? (\n          <div className=\"flex items-center justify-center\">\n            <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-[#C3AF6C] mr-2\"></div>\n            Resending...\n          </div>\n        ) : (\n          'Resend Code'\n        )}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 694, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/registration/EmailStep.jsx"],"sourcesContent":["import { REGISTRATION_STYLES } from '../../utils/constants';\nimport { authApi, handleApiError } from '../../utils/api';\nimport { useState } from 'react';\n\nexport default function EmailStep({ formData, handleChange, onSubmit, onBack, isPhoneVerified }) {\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    // Validate email before proceeding\n    if (!formData.email || !formData.email.includes('@')) {\n      setError('Please enter a valid email address');\n      return;\n    }\n    \n    // Validate that we have the phone number from previous step\n    if (!formData.phoneNumber) {\n      setError('Phone number is missing. Please go back and verify your phone.');\n      return;\n    }\n    \n    // Check if phone is verified before proceeding\n    if (!isPhoneVerified) {\n      setError('Phone number not verified. Please go back and complete phone verification first.');\n      return;\n    }\n    \n    setIsLoading(true);\n\n    try {\n      const response = await authApi.requestEmailOTP(formData.email, formData.phoneNumber);\n      console.log('Email OTP request successful:', response);\n      \n      // Proceed to verification step\n      setIsLoading(false);\n      onSubmit();\n    } catch (error) {\n      console.error('Failed to request email OTP:', error);\n      setIsLoading(false);\n      setError(handleApiError(error, 'Failed to send verification code. Please try again.'));\n    }\n  };\n\n  const handleInputChange = (e) => {\n    // Clear error when user starts typing\n    if (error) setError('');\n    handleChange(e);\n  };\n\n  return (\n    <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n      <div className={REGISTRATION_STYLES.fieldGroup}>\n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"email\" className={REGISTRATION_STYLES.label}>\n            Email Address\n          </label>\n          <input\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            required\n            className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n            placeholder=\"your.email@example.com\"\n            value={formData.email}\n            onChange={handleInputChange}\n          />\n          {error && (\n            <p className=\"mt-1 text-xs text-red-500 font-itc-gothic\">\n              {error}\n            </p>\n          )}\n        </div>\n      </div>\n\n      <div className={REGISTRATION_STYLES.buttonGroup}>\n        <button\n          type=\"button\"\n          onClick={onBack}\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.backButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          Back\n        </button>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.submitButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {isLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n              Sending...\n            </div>\n          ) : (\n            'Send Email Verification'\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEe,SAAS,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,eAAe,EAAE;IAC7F,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,mCAAmC;QACnC,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,SAAS,KAAK,CAAC,QAAQ,CAAC,MAAM;YACpD,SAAS;YACT;QACF;QAEA,4DAA4D;QAC5D,IAAI,CAAC,SAAS,WAAW,EAAE;YACzB,SAAS;YACT;QACF;QAEA,+CAA+C;QAC/C,IAAI,CAAC,iBAAiB;YACpB,SAAS;YACT;QACF;QAEA,aAAa;QAEb,IAAI;YACF,MAAM,WAAW,MAAM,mHAAA,CAAA,UAAO,CAAC,eAAe,CAAC,SAAS,KAAK,EAAE,SAAS,WAAW;YACnF,QAAQ,GAAG,CAAC,iCAAiC;YAE7C,+BAA+B;YAC/B,aAAa;YACb;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,aAAa;YACb,SAAS,CAAA,GAAA,mHAAA,CAAA,iBAAc,AAAD,EAAE,OAAO;QACjC;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,sCAAsC;QACtC,IAAI,OAAO,SAAS;QACpB,aAAa;IACf;IAEA,qBACE,8OAAC;QAAK,WAAW,yHAAA,CAAA,sBAAmB,CAAC,IAAI;QAAE,UAAU;;0BACnD,8OAAC;gBAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,UAAU;0BAC5C,cAAA,8OAAC;oBAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,cAAc;;sCAChD,8OAAC;4BAAM,SAAQ;4BAAQ,WAAW,yHAAA,CAAA,sBAAmB,CAAC,KAAK;sCAAE;;;;;;sCAG7D,8OAAC;4BACC,IAAG;4BACH,MAAK;4BACL,MAAK;4BACL,QAAQ;4BACR,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,KAAK,CAAC,CAAC,EAAE,QAAQ,mBAAmB,IAAI;4BAC1E,aAAY;4BACZ,OAAO,SAAS,KAAK;4BACrB,UAAU;;;;;;wBAEX,uBACC,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;;;;;;;0BAMT,8OAAC;gBAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,WAAW;;kCAC7C,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,UAAU;wBACV,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,UAAU,CAAC,CAAC,EAC5C,YAAY,kCAAkC,IAC9C;kCACH;;;;;;kCAGD,8OAAC;wBACC,MAAK;wBACL,UAAU;wBACV,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,YAAY,CAAC,CAAC,EAC9C,YAAY,kCAAkC,IAC9C;kCAED,0BACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;;;;;gCAAuE;;;;;;mCAIxF;;;;;;;;;;;;;;;;;;AAMZ","debugId":null}},
    {"offset": {"line": 852, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/registration/EmailVerificationStep.jsx"],"sourcesContent":["import { REGISTRATION_STYLES, MESSAGES } from '../../utils/constants';\nimport { authApi, handleApiError } from '../../utils/api';\nimport { useState } from 'react';\n\nexport default function EmailVerificationStep({ formData, handleChange, onSubmit, onBack, onResend }) {\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isResending, setIsResending] = useState(false);\n\n  const validateVerificationCode = (code) => {\n    // Check if it's exactly 6 digits\n    const codeRegex = /^\\d{6}$/;\n    return codeRegex.test(code) && code.length === 6;\n  };\n\n  const handleCodeChange = (e) => {\n    let value = e.target.value.replace(/\\D/g, ''); // Remove non-digits\n    \n    // Limit to exactly 6 digits\n    if (value.length > 6) {\n      value = value.slice(0, 6);\n    }\n    \n    // Clear error when user starts typing\n    if (error) {\n      setError('');\n    }\n    \n    // Update the event target value\n    e.target.value = value;\n    handleChange(e);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (formData.emailVerificationCode.length !== 6) {\n      setError('Please enter exactly 6 digits');\n      return;\n    }\n\n    if (!validateVerificationCode(formData.emailVerificationCode)) {\n      setError('Please enter a valid 6-digit verification code');\n      return;\n    }\n    \n    setIsLoading(true);\n    \n    try {\n      const response = await authApi.verifyEmailOTP(\n        formData.email, \n        formData.emailVerificationCode\n      );\n      \n      console.log('Email verification successful:', response);\n      setIsLoading(false);\n      onSubmit(); // Proceed to next step\n    } catch (error) {\n      console.error('Email verification failed:', error);\n      setIsLoading(false);\n      setError(handleApiError(error, 'Invalid verification code. Please try again.'));\n    }\n  };\n\n  const handleResend = async () => {\n    setIsResending(true);\n    setError('');\n    \n    try {\n      const response = await authApi.requestEmailOTP(formData.email, formData.phoneNumber);\n      console.log('Email OTP resent successfully:', response);\n      \n      // Clear the verification code\n      handleChange({\n        target: { name: 'emailVerificationCode', value: '' }\n      });\n      \n      // Call onResend if provided\n      if (onResend) {\n        onResend();\n      }\n    } catch (error) {\n      console.error('Failed to resend email OTP:', error);\n      setError(handleApiError(error, 'Failed to resend verification code. Please try again.'));\n    } finally {\n      setIsResending(false);\n    }\n  };\n\n  return (\n    <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n      <div className={REGISTRATION_STYLES.fieldGroup}>\n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"emailVerificationCode\" className={REGISTRATION_STYLES.label}>\n            Email Verification Code\n          </label>\n          <input\n            id=\"emailVerificationCode\"\n            name=\"emailVerificationCode\"\n            type=\"text\"\n            required\n            minLength={6}\n            maxLength={6}\n            className={`${REGISTRATION_STYLES.codeInput} ${error ? 'border-red-500' : ''}`}\n            placeholder=\"123456\"\n            value={formData.emailVerificationCode}\n            onChange={handleCodeChange}\n          />\n          {error && (\n            <p className=\"mt-1 text-xs text-red-500 font-itc-gothic\">\n              {error}\n            </p>\n          )}\n        </div>\n      </div>\n\n      <div className={REGISTRATION_STYLES.buttonGroup}>\n        <button\n          type=\"button\"\n          onClick={onBack}\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.backButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          Back\n        </button>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.submitButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {isLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n              Verifying...\n            </div>\n          ) : (\n            'Verify Email'\n          )}\n        </button>\n      </div>\n\n      <button\n        type=\"button\"\n        onClick={handleResend}\n        disabled={isResending || isLoading}\n        className={`${REGISTRATION_STYLES.resendButton} ${\n          isResending || isLoading ? 'opacity-50 cursor-not-allowed' : ''\n        }`}\n      >\n        {isResending ? (\n          <div className=\"flex items-center justify-center\">\n            <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-[#C3AF6C] mr-2\"></div>\n            Resending...\n          </div>\n        ) : (\n          'Resend Code'\n        )}\n      </button>\n    </form>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1069, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/registration/PasswordStep.jsx"],"sourcesContent":["import { REGISTRATION_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { authApi, handleApiError } from '../../utils/api';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useState } from 'react';\n\nexport default function PasswordStep({ formData, handleChange, onSubmit, onBack, isEmailVerified }) {\n  const { getAuthToken, setAuthToken } = useAuth();\n  const stepData = REGISTRATION_STEPS[5];\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    // Check if email has been verified\n    if (!isEmailVerified) {\n      setError('Email verification required. Please go back and complete email verification first.');\n      return;\n    }\n    \n    if (formData.password !== formData.confirmPassword) {\n      setError('Passwords do not match!');\n      return;\n    }\n\n    if (formData.password.length < 8) {\n      setError('Password must be at least 8 characters long');\n      return;\n    }\n\n    // Validate required fields\n    if (!formData.firstName?.trim()) {\n      setError('First name is required');\n      return;\n    }\n\n    if (!formData.lastName?.trim()) {\n      setError('Last name is required');\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      // Prepare user data for registration\n      const userData = {\n        phone_number: formData.phoneNumber,\n        email: formData.email,\n        first_name: formData.firstName,\n        last_name: formData.lastName,\n        password: formData.password,\n        email_verified: true  // Include email verification status\n      };\n\n      // Call the registration API\n      const response = await authApi.register(userData);\n      \n      console.log('Registration successful:', response);\n      \n      // Store the token directly from the registration response\n      console.log('Registration response structure:', JSON.stringify(response, null, 2));\n      \n      if (response && response.token) {\n        // Check if token is an object with access property\n        if (response.token.access) {\n          // Format the access token with Bearer prefix\n          const accessToken = 'Bearer ' + response.token.access;\n          console.log('Saving access token securely:', accessToken.substring(0, 20) + '...');\n          setAuthToken(accessToken);\n          \n          // Save refresh token separately if needed (handled by AuthContext)\n          if (response.token.refresh) {\n            sessionStorage.setItem('refreshToken', response.token.refresh);\n            console.log('Refresh token saved securely');\n          }\n        } else {\n          console.error('Unexpected token structure in registration response:', response.token);\n        }\n        \n        // Double-check token was saved\n        const savedToken = getAuthToken();\n        if (savedToken) {\n          console.log('Token successfully saved securely:', savedToken.substring(0, 20) + '...');\n        } else {\n          console.error('Failed to save token securely');\n        }\n      } else {\n        console.warn('No token in registration response:', response);\n      }\n      \n      console.log('Authentication completed successfully, moving to brand onboarding');\n      \n      // Move to brand onboarding steps\n      onSubmit();\n      \n    } catch (apiError) {\n      console.error('Registration failed:', apiError);\n      const errorMessage = handleApiError(apiError, 'Registration failed. Please try again.');\n      setError(errorMessage);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    // Clear error when user starts typing\n    if (error) setError('');\n    handleChange(e);\n  };\n\n  return (\n    <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n      <div className={REGISTRATION_STYLES.fieldGroup}>\n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"firstName\" className={REGISTRATION_STYLES.label}>\n            First Name\n          </label>\n          <input\n            id=\"firstName\"\n            name=\"firstName\"\n            type=\"text\"\n            required\n            className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n            placeholder=\"Enter your first name\"\n            value={formData.firstName || ''}\n            onChange={handleInputChange}\n          />\n        </div>\n        \n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"lastName\" className={REGISTRATION_STYLES.label}>\n            Last Name\n          </label>\n          <input\n            id=\"lastName\"\n            name=\"lastName\"\n            type=\"text\"\n            required\n            className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n            placeholder=\"Enter your last name\"\n            value={formData.lastName || ''}\n            onChange={handleInputChange}\n          />\n        </div>\n\n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"password\" className={REGISTRATION_STYLES.label}>\n            {stepData.fields.password.label}\n          </label>\n          <input\n            id=\"password\"\n            name=\"password\"\n            type={stepData.fields.password.type}\n            required={stepData.fields.password.required}\n            className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n            placeholder={stepData.fields.password.placeholder}\n            value={formData.password}\n            onChange={handleInputChange}\n          />\n        </div>\n        \n        <div className={REGISTRATION_STYLES.fieldContainer}>\n          <label htmlFor=\"confirmPassword\" className={REGISTRATION_STYLES.label}>\n            {stepData.fields.confirmPassword.label}\n          </label>\n          <input\n            id=\"confirmPassword\"\n            name=\"confirmPassword\"\n            type={stepData.fields.confirmPassword.type}\n            required={stepData.fields.confirmPassword.required}\n            className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n            placeholder={stepData.fields.confirmPassword.placeholder}\n            value={formData.confirmPassword}\n            onChange={handleInputChange}\n          />\n        </div>\n\n        {error && (\n          <div className=\"mt-2\">\n            <p className=\"text-xs text-red-600\">\n              {error}\n            </p>\n          </div>\n        )}\n      </div>\n\n      <div className={REGISTRATION_STYLES.buttonGroup}>\n        <button\n          type=\"button\"\n          onClick={onBack}\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.backButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {stepData.buttons.back}\n        </button>\n        <button\n          type=\"submit\"\n          disabled={isLoading}\n          className={`${REGISTRATION_STYLES.submitButton} ${\n            isLoading ? 'opacity-50 cursor-not-allowed' : ''\n          }`}\n        >\n          {isLoading ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n              Creating Account...\n            </div>\n          ) : (\n            stepData.buttons.submit\n          )}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1382, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/GSTVerificationStep.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { REGISTRATION_STYLES } from '../../utils/constants';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function GSTVerificationStep({ formData, handleChange, onSubmit, onBack, isFirstOnboardingStep = false }) {\n  const [error, setError] = useState('');\n  const [gstDetails, setGstDetails] = useState(null);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [verificationToken, setVerificationToken] = useState('');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n  \n  const { getAuthToken, authenticatedFetch } = useAuth();\n\n  // Get auth token on component mount and handle authentication checking\n  useEffect(() => {\n    // Function to check if user is authenticated\n    const checkAuthentication = async () => {\n      setIsLoading(true);\n      const token = getAuthToken();\n      \n      if (!token) {\n        console.warn('No authentication token found in localStorage');\n        setError('Authentication required. Please log in before proceeding.');\n        setIsAuthenticated(false);\n        \n        // Redirect to login page after a brief delay\n        setTimeout(() => {\n          router.push('/login');\n        }, 2000);\n        \n        setIsLoading(false);\n        return;\n      }\n      \n      setVerificationToken(token.trim());\n      setIsAuthenticated(true);\n      setIsLoading(false);\n      console.log('Auth token loaded, authentication successful');\n    };\n    \n    checkAuthentication();\n  }, [router]);\n\n  const validateGSTNumber = (gstNumber) => {\n    // Basic GST validation: 15 characters, starts with 2 digits (state code)\n    const gstRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;\n    return gstRegex.test(gstNumber);\n  };\n\n  const handleGSTChange = (e) => {\n    let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');\n    \n    // Limit to 15 characters\n    if (value.length > 15) {\n      value = value.slice(0, 15);\n    }\n    \n    // Clear error and GST details when user types\n    if (error) setError('');\n    if (gstDetails) setGstDetails(null);\n    \n    e.target.value = value;\n    handleChange(e);\n  };\n\n  const handleVerifyGST = async () => {\n    if (!formData.gstNumber) {\n      setError('Please enter GST number');\n      return;\n    }\n\n    if (!validateGSTNumber(formData.gstNumber)) {\n      setError('Please enter a valid GST number (15 characters)');\n      return;\n    }\n\n    setIsVerifying(true);\n    setError('');\n\n    try {\n      // Use the token we already validated in useEffect\n      if (!verificationToken) {\n        // Try to get the token again - it might have been set after component mounted\n        const token = getAuthToken();\n        if (token) {\n          // We found a token now, let's use it\n          setVerificationToken(token.trim());\n          console.log('Found token on verification attempt');\n        } else {\n          setError('Authentication token not found. Please log in again.');\n          setIsVerifying(false);\n          return;\n        }\n      }\n      \n      console.log('Using verified auth token');\n      \n      // Format token properly - ensure it starts with Bearer if not already included\n      let formattedToken = verificationToken;\n      if (!formattedToken.startsWith('Bearer ')) {\n        formattedToken = `Bearer ${formattedToken}`;\n      }\n      \n      console.log('Request headers:', {\n        'Content-Type': 'application/json',\n        'Authorization': formattedToken.substring(0, 15) + '...'\n      });\n      console.log('Request payload:', {\n        gst_number: formData.gstNumber,\n        // company_name: formData.companyName || 'Test Company Name' // Default test company name\n      });\n      \n      // Add more verbose debugging\n      console.log('Making API request with headers:', {\n        'Content-Type': 'application/json',\n        'Authorization': formattedToken.substring(0, 15) + '...' + formattedToken.substring(formattedToken.length - 5)\n      });\n      \n      // Use authenticated fetch with automatic token refresh\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/gst/verify/', {\n        method: 'POST',\n        body: JSON.stringify({\n          gst_number: formData.gstNumber,\n          // company_name: formData.companyName || 'Test Company Name' // Default test company name\n        })\n      });\n      \n      // Log detailed response information\n      console.log('Response headers:', [...response.headers.entries()]);\n      console.log('Response status:', response.status);\n      console.log('Response statusText:', response.statusText);\n      \n      console.log('Response status:', response.status);\n      \n      // Handle 401 Unauthorized specifically\n      if (response.status === 401) {\n        console.error('Authentication error: 401 Unauthorized');\n        setError('Authentication failed. Please log out and log in again.');\n        setGstDetails(null);\n        setIsVerifying(false);\n        return;\n      }\n      \n      const data = await response.json();\n      console.log('GST verification response:', data);\n      \n      if (response.ok && data.success && data.verified) {\n        // Extract GST details from response\n        const gstData = {\n          businessName: data.company_name || data.business_name || '',\n          tradeName: data.trade_name || data.business_name || '',\n          registrationDate: data.registration_date || '',\n          constitution: data.constitution || '',\n          address: data.address || '',\n          status: data.status || 'Active',\n          taxpayerType: data.taxpayer_type || 'Regular'\n        };\n        \n        setGstDetails(gstData);\n        setError('');\n        \n        // Store GST details in formData for prepopulation in next steps\n        handleChange({\n          target: { name: 'gstBusinessName', value: gstData.businessName }\n        });\n        handleChange({\n          target: { name: 'gstTradeName', value: gstData.tradeName }\n        });\n        handleChange({\n          target: { name: 'gstConstitution', value: gstData.constitution }\n        });\n        handleChange({\n          target: { name: 'gstAddress', value: gstData.address }\n        });\n        handleChange({\n          target: { name: 'gstStatus', value: gstData.status }\n        });\n        handleChange({\n          target: { name: 'gstRegistrationDate', value: gstData.registrationDate }\n        });\n      } else {\n        // Handle specific error types\n        if (response.status === 401) {\n          console.error('Authentication error during GST verification:', data);\n          setError('Authentication failed. Please log out and log in again.');\n        } else {\n          setError(data.message || data.detail || 'GST verification failed. Please check your GST number and try again.');\n        }\n        setGstDetails(null);\n      }\n    } catch (error) {\n      console.error('GST verification error:', error);\n      setError('Network error while verifying GST. Please try again.');\n      setGstDetails(null);\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!gstDetails) {\n      setError('Please verify your GST number first');\n      return;\n    }\n    \n    console.log('GST verification completed, proceeding to next step');\n    onSubmit();\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      {isLoading ? (\n        <div className=\"flex justify-center items-center min-h-[300px]\">\n          <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500\"></div>\n          <p className=\"ml-3 text-gray-600\">Checking authentication...</p>\n        </div>\n      ) : !isAuthenticated ? (\n        <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-4\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <h3 className=\"text-sm font-medium text-red-800\">Authentication Required</h3>\n              <div className=\"mt-2 text-sm text-red-700\">\n                <p>You must be logged in to access the brand onboarding process.</p>\n                <p className=\"mt-2\">Redirecting you to the login page...</p>\n              </div>\n              <div className=\"mt-4\">\n                <a \n                  href=\"/login\" \n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-red-600 hover:bg-red-500 focus:outline-none focus:border-red-700 focus:shadow-outline-red active:bg-red-700 transition ease-in-out duration-150\"\n                >\n                  Go to Login\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <>\n          {isFirstOnboardingStep && (\n            <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <div className=\"flex items-start\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"w-5 h-5 text-blue-600 mt-0.5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-blue-800\">Welcome to Brand Onboarding!</h3>\n                  <p className=\"mt-1 text-sm text-blue-700\">\n                    You've successfully completed the authentication process. Now let's set up your brand profile. \n                    You can complete this process at your own pace.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">GST Verification</h2>\n            <p className=\"text-gray-600\">Enter your GST number to verify your business details</p>\n          </div>\n\n          <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n            <div className={REGISTRATION_STYLES.fieldGroup}>\n              <div className={REGISTRATION_STYLES.fieldContainer}>\n                <label htmlFor=\"gstNumber\" className={REGISTRATION_STYLES.label}>\n                  GST Number\n                </label>\n                <div className=\"flex gap-3\">\n                  <input\n                    id=\"gstNumber\"\n                    name=\"gstNumber\"\n                    type=\"text\"\n                    required\n                    maxLength={15}\n                    className={`flex-1 ${REGISTRATION_STYLES.input} ${error && !gstDetails ? 'border-red-500' : ''}`}\n                    placeholder=\"07AAACG0569H1ZH\"\n                    value={formData.gstNumber || ''}\n                    onChange={handleGSTChange}\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={handleVerifyGST}\n                    disabled={isVerifying || !formData.gstNumber}\n                    className={`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed ${isVerifying ? 'animate-pulse' : ''}`}\n                  >\n                    {isVerifying ? 'Verifying...' : 'Verify'}\n                  </button>\n                </div>\n                <p className=\"mt-1 text-xs text-gray-500\">\n                  Enter your 15-digit GST number (e.g., 07AAACG0569H1ZH or 29AABCU9603R1ZX)\n                </p>\n                \n                {error && (\n                  <div className=\"mt-1\">\n                    <p className=\"text-xs text-red-600\">\n                      {error}\n                    </p>\n                    {error.includes('log in') && (\n                      <a \n                        href=\"/login\" \n                        className=\"mt-2 inline-block text-xs text-blue-600 hover:text-blue-800\"\n                      >\n                        Click here to log in\n                      </a>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {gstDetails && (\n                <div className=\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n                  <div className=\"flex items-center mb-3\">\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full mr-2\"></div>\n                    <h3 className=\"text-lg font-semibold text-green-800\">GST Details Verified</h3>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                    <div>\n                      <p className=\"font-medium text-gray-700\">Business Name:</p>\n                      <p className=\"text-gray-900\">{gstDetails.businessName}</p>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-700\">Trade Name:</p>\n                      <p className=\"text-gray-900\">{gstDetails.tradeName}</p>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-700\">Constitution:</p>\n                      <p className=\"text-gray-900\">{gstDetails.constitution}</p>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-700\">Status:</p>\n                      <span className=\"inline-flex px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs\">\n                        {gstDetails.status}\n                      </span>\n                    </div>\n                    <div className=\"md:col-span-2\">\n                      <p className=\"font-medium text-gray-700\">Registered Address:</p>\n                      <p className=\"text-gray-900\">{gstDetails.address}</p>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-700\">Registration Date:</p>\n                      <p className=\"text-gray-900\">{gstDetails.registrationDate}</p>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-700\">Taxpayer Type:</p>\n                      <p className=\"text-gray-900\">{gstDetails.taxpayerType}</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className={REGISTRATION_STYLES.buttonGroup}>\n              {!isFirstOnboardingStep && (\n                <button\n                  type=\"button\"\n                  onClick={onBack}\n                  className={REGISTRATION_STYLES.backButton}\n                >\n                  Back\n                </button>\n              )}\n              <button\n                type=\"submit\"\n                disabled={!gstDetails}\n                className={`${REGISTRATION_STYLES.submitButton} ${!gstDetails ? 'opacity-50 cursor-not-allowed' : ''} ${isFirstOnboardingStep ? 'w-full' : ''}`}\n              >\n                Continue\n              </button>\n            </div>\n          </form>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2165, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/BasicInformationStep.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function BasicInformationStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[2];\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { formData: savedFormData, userData, saveFormData, getAuthToken, authenticatedFetch } = useAuth();\n\n  // Prepopulate fields with data from previous steps and saved data\n  useEffect(() => {\n    // Only prepopulate if no form data exists yet (initial load)\n    const hasAnyFormData = formData.ownerName || formData.contactNumber || formData.businessEmail || \n                          formData.companyName || formData.companyType || formData.addressLine1 || \n                          formData.addressLine2 || formData.state || formData.zipCode;\n    \n    if (hasAnyFormData) {\n      return; // Don't prepopulate if user has already started filling the form\n    }\n\n    let hasUpdates = false;\n    const updates = {};\n\n    // Use saved form data as fallback for prepopulation\n    const sourceData = { ...savedFormData, ...formData };\n\n    // Prepopulate owner name from registration data or saved data\n    if (!formData.ownerName && (sourceData.firstName || sourceData.lastName || sourceData.ownerName)) {\n      const ownerName = sourceData.ownerName || `${sourceData.firstName || ''} ${sourceData.lastName || ''}`.trim();\n      if (ownerName) {\n        updates.ownerName = ownerName;\n        hasUpdates = true;\n      }\n    }\n\n    // Prepopulate contact number from verified user details in AuthContext\n    if (!formData.contactNumber && userData?.user_details?.phone_number) {\n      const contactNumber = userData.user_details.phone_number;\n      if (contactNumber) {\n        // Remove +91 prefix if present to show only the 10-digit number\n        const cleanNumber = contactNumber.replace(/^\\+91/, '');\n        updates.contactNumber = cleanNumber;\n        hasUpdates = true;\n      }\n    }\n\n    // Prepopulate business email from verified user details in AuthContext\n    if (!formData.businessEmail && userData?.user_details?.email) {\n      const businessEmail = userData.user_details.email;\n      if (businessEmail) {\n        updates.businessEmail = businessEmail;\n        hasUpdates = true;\n      }\n    }\n\n    // Prepopulate company name from GST data or saved data\n    if (!formData.companyName && (sourceData.gstBusinessName || sourceData.gstTradeName || sourceData.companyName)) {\n      const companyName = sourceData.companyName || sourceData.gstBusinessName || sourceData.gstTradeName;\n      if (companyName) {\n        updates.companyName = companyName;\n        hasUpdates = true;\n      }\n    }\n\n    // Prepopulate company type from GST constitution or saved data\n    if (!formData.companyType && (sourceData.gstConstitution || sourceData.companyType)) {\n      const companyType = sourceData.companyType || sourceData.gstConstitution;\n      if (companyType) {\n        updates.companyType = companyType;\n        hasUpdates = true;\n      }\n    }\n\n    // Prepopulate business address from GST data or saved data\n    if (!formData.addressLine1 && !formData.addressLine2 && !formData.state && !formData.zipCode) {\n      \n      // Use individual address components if available from saved data\n      if (sourceData.addressLine1) {\n        updates.addressLine1 = sourceData.addressLine1;\n        hasUpdates = true;\n      }\n      if (sourceData.addressLine2) {\n        updates.addressLine2 = sourceData.addressLine2;\n        hasUpdates = true;\n      }\n      if (sourceData.state) {\n        updates.state = sourceData.state;\n        hasUpdates = true;\n      }\n      if (sourceData.zipCode) {\n        updates.zipCode = sourceData.zipCode;\n        hasUpdates = true;\n      }\n      \n      // Only if no individual components exist, try to use the full address in addressLine1\n      if (!sourceData.addressLine1 && !sourceData.addressLine2 && !sourceData.state && !sourceData.zipCode) {\n        const fullAddress = sourceData.businessAddress || sourceData.gstAddress;\n        if (fullAddress && typeof fullAddress === 'string') {\n          // Put the full address in addressLine1 as a starting point\n          updates.addressLine1 = fullAddress;\n          hasUpdates = true;\n        }\n      }\n    }\n\n    // Apply all updates at once to avoid multiple re-renders\n    if (hasUpdates) {\n      Object.entries(updates).forEach(([key, value]) => {\n        handleChange({\n          target: { name: key, value: value }\n        });\n      });\n    }\n  }, [\n    // Only depend on key data sources, not the form data itself to prevent loops\n    userData?.user_details?.phone_number,\n    userData?.user_details?.email,\n    savedFormData?.firstName,\n    savedFormData?.lastName,\n    savedFormData?.gstBusinessName,\n    savedFormData?.gstTradeName,\n    savedFormData?.gstConstitution,\n    savedFormData?.gstAddress,\n    savedFormData?.addressLine1,\n    savedFormData?.addressLine2,\n    savedFormData?.state,\n    savedFormData?.zipCode,\n    handleChange\n  ]);\n\n  // Company type options\n  const companyTypes = [\n    'Private Limited Company',\n    'Public Limited Company',\n    'Limited Liability Partnership (LLP)',\n    'Partnership Firm',\n    'Sole Proprietorship',\n    'One Person Company (OPC)',\n    'Section 8 Company',\n    'Producer Company',\n    'Other'\n  ];\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    // Get effective values (including verified data from AuthContext)\n    const effectiveOwnerName = formData.ownerName || `${formData.firstName || ''} ${formData.lastName || ''}`.trim();\n    const effectiveContactNumber = formData.contactNumber || \n                                 (userData?.user_details?.phone_number?.replace(/^\\+91/, '')); // Always use verified number from AuthContext\n    const effectiveBusinessEmail = formData.businessEmail || \n                                 userData?.user_details?.email; // Always use verified email from AuthContext\n    const effectiveCompanyName = formData.companyName || formData.gstBusinessName || formData.gstTradeName;\n    const effectiveCompanyType = formData.companyType || formData.gstConstitution;\n    \n    // Concatenate address fields for API submission\n    const addressParts = [\n      formData.addressLine1?.trim(),\n      formData.addressLine2?.trim(),\n      formData.state?.trim(),\n      formData.zipCode?.trim()\n    ].filter(Boolean); // Remove empty parts\n    \n    const effectiveBusinessAddress = addressParts.length > 0 ? addressParts.join(', ') : (formData.gstAddress || '');\n\n    // Validation\n    if (!effectiveOwnerName?.trim()) {\n      setError('Owner name is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Skip validation for contact number and email since they are verified and read-only\n    if (!effectiveContactNumber?.trim()) {\n      setError('Contact number is missing. Please contact support.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!effectiveBusinessEmail?.trim()) {\n      setError('Business email is missing. Please contact support.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!effectiveCompanyName?.trim()) {\n      setError('Company name is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!effectiveCompanyType?.trim()) {\n      setError('Please select a company type');\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Validate required address fields\n    if (!formData.addressLine1?.trim()) {\n      setError('Address Line 1 is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!formData.state?.trim()) {\n      setError('State is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!formData.zipCode?.trim()) {\n      setError('ZIP Code is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    // Validate ZIP code format (6 digits for Indian PIN codes)\n    const zipCodeRegex = /^\\d{6}$/;\n    if (!zipCodeRegex.test(formData.zipCode?.trim())) {\n      setError('ZIP Code must be exactly 6 digits');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!effectiveBusinessAddress?.trim()) {\n      setError('Business address is required. Please fill in at least Address Line 1.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      // Get authentication token using secure method\n      const token = getAuthToken();\n      if (!token) {\n        setError('Authentication required. Please log in again.');\n        setIsSubmitting(false);\n        return;\n      }\n\n      // Prepare data for API\n      const basicInfoData = {\n        owner_name: effectiveOwnerName,\n        contact_number: effectiveContactNumber.startsWith('+91') ? effectiveContactNumber : `+91${effectiveContactNumber}`, // Ensure +91 prefix for API\n        email: effectiveBusinessEmail,\n        company_name: effectiveCompanyName,\n        company_type: effectiveCompanyType,\n        address: effectiveBusinessAddress\n      };\n\n      console.log('Submitting basic information:', basicInfoData);\n\n      // Use authenticated fetch with automatic token refresh\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/basic-info/', {\n        method: 'POST',\n        body: JSON.stringify(basicInfoData)\n      });\n\n      const data = await response.json();\n      console.log('Basic info API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Basic information submitted successfully, proceeding to next step');\n        \n        // Save the submitted data for future prepopulation\n        const savedData = {\n          ownerName: effectiveOwnerName,\n          contactNumber: effectiveContactNumber,\n          businessEmail: effectiveBusinessEmail,\n          companyName: effectiveCompanyName,\n          companyType: effectiveCompanyType,\n          addressLine1: formData.addressLine1 || '',\n          addressLine2: formData.addressLine2 || '',\n          state: formData.state || '',\n          zipCode: formData.zipCode || '',\n          businessAddress: effectiveBusinessAddress\n        };\n        saveFormData(savedData);\n        \n        onSubmit();\n      } else {\n        // Handle API errors\n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else {\n          setError(data.message || data.detail || 'Failed to submit basic information. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error submitting basic information:', error);\n      setError('Network error while submitting information. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    if (error) setError('');\n    handleChange(e);\n  };\n\n  const handleZipCodeChange = (e) => {\n    let value = e.target.value.replace(/\\D/g, ''); // Remove non-digits\n    \n    // Limit to 6 digits\n    if (value.length > 6) {\n      value = value.slice(0, 6);\n    }\n    \n    // Clear error when user starts typing\n    if (error) setError('');\n    \n    e.target.value = value;\n    handleChange(e);\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Basic Information</h2>\n        <p className=\"text-gray-600\">Provide your business and contact details</p>\n      </div>\n\n      <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n        <div className={REGISTRATION_STYLES.fieldGroup}>\n          {/* Owner Name */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"ownerName\" className={REGISTRATION_STYLES.label}>\n              Owner Name *\n            </label>\n            <input\n              id=\"ownerName\"\n              name=\"ownerName\"\n              type=\"text\"\n              required\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              placeholder=\"Enter owner's full name\"\n              value={formData.ownerName || ''}\n              onChange={handleInputChange}\n            />\n          </div>\n\n          {/* Contact Number - Read Only (Verified) */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"contactNumber\" className={REGISTRATION_STYLES.label}>\n              Contact Number * (Verified)\n            </label>\n            <div className=\"flex\">\n              <span className=\"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-md\">\n                +91\n              </span>\n              <input\n                id=\"contactNumber\"\n                name=\"contactNumber\"\n                type=\"text\"\n                required\n                maxLength={10}\n                readOnly\n                className={`flex-1 ${REGISTRATION_STYLES.input} bg-gray-50 text-gray-600 cursor-not-allowed rounded-l-none`}\n                placeholder=\"Verified contact number\"\n                value={formData.contactNumber || \n                       (userData?.user_details?.phone_number?.replace(/^\\+91/, '')) || ''}\n              />\n            </div>\n            <p className=\"mt-1 text-xs text-gray-500\">\n              This is your verified phone number and cannot be changed\n            </p>\n          </div>\n\n          {/* Business Email - Read Only (Verified) */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"businessEmail\" className={REGISTRATION_STYLES.label}>\n              Business Email * (Verified)\n            </label>\n            <input\n              id=\"businessEmail\"\n              name=\"businessEmail\"\n              type=\"email\"\n              required\n              readOnly\n              className={`${REGISTRATION_STYLES.input} bg-gray-50 text-gray-600 cursor-not-allowed`}\n              placeholder=\"Verified email address\"\n              value={formData.businessEmail || \n                     userData?.user_details?.email || ''}\n            />\n            <p className=\"mt-1 text-xs text-gray-500\">\n              This is your verified email address and cannot be changed\n            </p>\n          </div>\n\n          {/* Company Name */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"companyName\" className={REGISTRATION_STYLES.label}>\n              Company Name *\n            </label>\n            <input\n              id=\"companyName\"\n              name=\"companyName\"\n              type=\"text\"\n              required\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              placeholder=\"Enter your company name\"\n              value={formData.companyName || ''}\n              onChange={handleInputChange}\n            />\n          </div>\n\n          {/* Company Type */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"companyType\" className={REGISTRATION_STYLES.label}>\n              Company Type *\n            </label>\n            <select\n              id=\"companyType\"\n              name=\"companyType\"\n              required\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              value={formData.companyType || ''}\n              onChange={handleInputChange}\n            >\n              <option value=\"\">Select company type</option>\n              {companyTypes.map((type) => (\n                <option key={type} value={type}>\n                  {type}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* Business Address */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Business Address *\n            </label>\n            \n            {/* Address Line 1 */}\n            <input\n              id=\"addressLine1\"\n              name=\"addressLine1\"\n              type=\"text\"\n              required\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''} mb-3`}\n              placeholder=\"Address Line 1 *\"\n              value={formData.addressLine1 || ''}\n              onChange={handleInputChange}\n            />\n            \n            {/* Address Line 2 */}\n            <input\n              id=\"addressLine2\"\n              name=\"addressLine2\"\n              type=\"text\"\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''} mb-3`}\n              placeholder=\"Address Line 2 (Optional)\"\n              value={formData.addressLine2 || ''}\n              onChange={handleInputChange}\n            />\n            \n            {/* State and ZIP Code in a row */}\n            <div className=\"flex gap-3\">\n              <div className=\"flex-1\">\n                <input\n                  id=\"state\"\n                  name=\"state\"\n                  type=\"text\"\n                  required\n                  className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n                  placeholder=\"State *\"\n                  value={formData.state || ''}\n                  onChange={handleInputChange}\n                />\n              </div>\n              <div className=\"flex-1\">\n                <input\n                  id=\"zipCode\"\n                  name=\"zipCode\"\n                  type=\"text\"\n                  required\n                  maxLength={6}\n                  className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n                  placeholder=\"ZIP Code *\"\n                  value={formData.zipCode || ''}\n                  onChange={handleZipCodeChange}\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"mt-2\">\n              <p className=\"text-xs text-red-600\">\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className={REGISTRATION_STYLES.buttonGroup}>\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className={REGISTRATION_STYLES.backButton}\n          >\n            Back\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className={`${REGISTRATION_STYLES.submitButton} ${\n              isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          >\n            {isSubmitting ? 'Submitting...' : 'Continue'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2861, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/SignatureUploadStep.jsx"],"sourcesContent":["import { useState, useRef } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function SignatureUploadStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[3];\n  const [error, setError] = useState('');\n  const [dragActive, setDragActive] = useState(false);\n  const [preview, setPreview] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [localSignatureFile, setLocalSignatureFile] = useState(null); // Local fallback\n  const [localSignatureFileName, setLocalSignatureFileName] = useState(''); // Local fallback\n  const fileInputRef = useRef(null);\n  const { saveFormData, getAuthToken, authenticatedFetch } = useAuth();\n\n  // Accepted file types for signature\n  const acceptedTypes = ['image/png', 'image/jpeg', 'image/jpg'];\n  const maxFileSize = 5 * 1024 * 1024; // 5MB\n\n  const validateFile = (file) => {\n    if (!acceptedTypes.includes(file.type)) {\n      setError('Please upload a PNG or JPEG image file');\n      return false;\n    }\n\n    if (file.size > maxFileSize) {\n      setError('File size should be less than 5MB');\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleFileUpload = (file) => {\n    console.log('ðŸ“ File selected for upload:', file);\n    console.log('File validation starting...');\n    \n    if (validateFile(file)) {\n      console.log('âœ… File validation passed');\n      setError('');\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        console.log('âœ… File preview created');\n        setPreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n\n      // Store file in local state as fallback\n      setLocalSignatureFile(file);\n      setLocalSignatureFileName(file.name);\n      console.log('âœ… File stored in local state as fallback');\n\n      // Try to store file in parent formData\n      console.log('Attempting to call parent handleChange...');\n      if (handleChange && typeof handleChange === 'function') {\n        handleChange({\n          target: { name: 'signatureFile', value: file }\n        });\n        handleChange({\n          target: { name: 'signatureFileName', value: file.name }\n        });\n        console.log('âœ… Called parent handleChange for signatureFile');\n      } else {\n        console.log('âŒ handleChange is not available or not a function:', handleChange);\n      }\n    } else {\n      console.log('âŒ File validation failed');\n    }\n  };\n\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      handleFileUpload(e.dataTransfer.files[0]);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      handleFileUpload(e.target.files[0]);\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setPreview(null);\n    setError('');\n    setLocalSignatureFile(null);\n    setLocalSignatureFileName('');\n    \n    // Also try to clear parent formData\n    if (handleChange && typeof handleChange === 'function') {\n      handleChange({\n        target: { name: 'signatureFile', value: null }\n      });\n      handleChange({\n        target: { name: 'signatureFileName', value: '' }\n      });\n    }\n    \n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    console.log('ðŸ”„ SIGNATURE UPLOAD: handleSubmit called');\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    // Use parent formData if available, otherwise fallback to local state\n    const currentSignatureFile = formData.signatureFile || localSignatureFile;\n    const currentSignatureFileName = formData.signatureFileName || localSignatureFileName;\n\n    console.log('File source check:');\n    console.log('- Parent formData.signatureFile:', formData.signatureFile);\n    console.log('- Local signatureFile:', localSignatureFile);\n    console.log('- Using file:', currentSignatureFile);\n    console.log('File exists?', !!currentSignatureFile);\n\n    if (!currentSignatureFile) {\n      console.log('âŒ No signature file found in either parent formData or local state, stopping upload');\n      setError('Please upload your signature');\n      setIsSubmitting(false);\n      return;\n    }\n\n    console.log('âœ… Signature file found, proceeding with upload...');\n\n    try {\n      console.log('=== SIGNATURE UPLOAD DEBUG START ===');\n      \n      // Verify authentication token\n      const token = getAuthToken();\n      if (!token) {\n        setError('Authentication required. Please log in again.');\n        setIsSubmitting(false);\n        return;\n      }\n      console.log('Auth token available:', token.substring(0, 20) + '...');\n\n      // Create FormData for file upload\n      const formDataToSend = new FormData();\n      formDataToSend.append('signature_file', currentSignatureFile);\n\n      console.log('File upload details:', {\n        name: currentSignatureFile.name,\n        size: currentSignatureFile.size,\n        type: currentSignatureFile.type,\n        lastModified: currentSignatureFile.lastModified,\n        constructor: currentSignatureFile.constructor.name\n      });\n\n      // Verify FormData contents\n      console.log('FormData contents:');\n      for (let [key, value] of formDataToSend.entries()) {\n        if (value instanceof File) {\n          console.log(`- ${key}: File(${value.name}, ${value.size} bytes, ${value.type})`);\n        } else {\n          console.log(`- ${key}: ${value}`);\n        }\n      }\n\n      // Validate file before upload\n      if (!acceptedTypes.includes(currentSignatureFile.type)) {\n        setError('Invalid file type. Please upload PNG or JPEG files only.');\n        setIsSubmitting(false);\n        return;\n      }\n\n      if (currentSignatureFile.size > maxFileSize) {\n        setError('File too large. Please upload a file smaller than 5MB.');\n        setIsSubmitting(false);\n        return;\n      }\n\n      console.log('Making API request to:', 'http://15.207.254.95:8080/api/brand/signature/upload/');\n\n      // Call the signature upload API using secure authenticated fetch\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/signature/upload/', {\n        method: 'POST',\n        body: formDataToSend\n      });\n\n      console.log('API Response details:', {\n        status: response.status,\n        statusText: response.statusText,\n        ok: response.ok,\n        headers: Object.fromEntries(response.headers.entries())\n      });\n\n      // Check if response is JSON\n      const contentType = response.headers.get('content-type');\n      let data;\n      \n      try {\n        if (contentType && contentType.includes('application/json')) {\n          data = await response.json();\n        } else {\n          const textResponse = await response.text();\n          console.error('Non-JSON response received:', {\n            contentType,\n            status: response.status,\n            text: textResponse.substring(0, 500)\n          });\n          throw new Error(`Server returned non-JSON response (${response.status}): ${textResponse.substring(0, 200)}`);\n        }\n      } catch (parseError) {\n        console.error('Failed to parse response:', parseError);\n        throw new Error(`Invalid response format from server (${response.status})`);\n      }\n      \n      console.log('Parsed response data:', data);\n      console.log('=== SIGNATURE UPLOAD DEBUG END ===');\n\n      if (response.ok && data.success) {\n        console.log('âœ… Signature uploaded successfully:', data);\n        \n        // Save the signature data for future reference\n        const savedData = {\n          signatureId: data.signature_id || data.id,\n          signatureFileName: currentSignatureFileName,\n          signatureUploaded: true,\n          signatureUrl: data.signature_url || data.url\n        };\n        saveFormData(savedData);\n        \n        console.log('Signature upload completed, proceeding to next step');\n        onSubmit();\n      } else {\n        // Enhanced error handling with detailed logging\n        console.error('âŒ API Error Details:', {\n          status: response.status,\n          statusText: response.statusText,\n          data: data,\n          responseOk: response.ok,\n          expectedSuccess: data?.success\n        });\n        \n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 400) {\n          const errorMsg = data?.message || data?.detail || data?.error || 'Invalid file format or size. Please check the file requirements.';\n          setError(`Upload failed: ${errorMsg}`);\n        } else if (response.status === 403) {\n          setError('Email or phone not verified. Please complete verification first.');\n        } else if (response.status === 413) {\n          setError('File too large. Please upload a smaller file (max 5MB).');\n        } else if (response.status === 415) {\n          setError('Unsupported file type. Please upload PNG or JPEG files only.');\n        } else if (response.status >= 500) {\n          setError('Server error occurred. Please try again later.');\n        } else {\n          const errorMsg = data?.message || data?.detail || data?.error || `Upload failed (${response.status})`;\n          setError(`Upload error: ${errorMsg}`);\n        }\n      }\n    } catch (error) {\n      console.error('âŒ SIGNATURE UPLOAD ERROR - Full details:', {\n        message: error.message,\n        stack: error.stack,\n        name: error.name,\n        cause: error.cause\n      });\n      \n      // More specific error handling\n      if (error.message.includes('No authentication token')) {\n        setError('Authentication required. Please log in again.');\n      } else if (error.message.includes('Authentication failed after token refresh')) {\n        setError('Session expired. Please log in again.');\n      } else if (error.name === 'TypeError' && error.message.includes('fetch')) {\n        setError('Network connection failed. Please check your internet connection and try again.');\n      } else if (error.message.includes('Invalid response format')) {\n        setError('Server error: Invalid response format. Please try again or contact support.');\n      } else if (error.message.includes('non-JSON response')) {\n        setError('Server error: Unexpected response format. Please try again later.');\n      } else if (error.message.includes('Network request failed')) {\n        setError('Network error. Please check your connection and try again.');\n      } else {\n        setError(`Upload failed: ${error.message}`);\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleInputFocus = () => {\n    if (error) setError('');\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">{stepData.title}</h2>\n        <p className=\"text-gray-600\">{stepData.subtitle}</p>\n      </div>\n\n      <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n        <div className={REGISTRATION_STYLES.fieldGroup}>\n          {/* Signature Upload Area */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Digital Signature *\n            </label>\n            \n            <div\n              className={`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n                dragActive\n                  ? 'border-blue-400 bg-blue-50'\n                  : error\n                  ? 'border-red-300 bg-red-50'\n                  : 'border-gray-300 bg-gray-50 hover:border-gray-400'\n              }`}\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".png,.jpg,.jpeg\"\n                onChange={handleInputChange}\n                onFocus={handleInputFocus}\n                className=\"hidden\"\n              />\n\n              {preview ? (\n                <div className=\"space-y-4\">\n                  <div className=\"relative inline-block\">\n                    <img\n                      src={preview}\n                      alt=\"Signature preview\"\n                      className=\"max-w-full max-h-48 mx-auto border border-gray-200 rounded-md shadow-sm\"\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleRemoveFile();\n                      }}\n                      className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 flex items-center justify-center\"\n                    >\n                      Ã—\n                    </button>\n                  </div>\n                  <div className=\"text-sm text-gray-600\">\n                    <p className=\"font-medium\">{formData.signatureFileName || localSignatureFileName}</p>\n                    <p className=\"text-green-600\">âœ“ File uploaded successfully</p>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <div className=\"w-12 h-12 mx-auto bg-gray-300 rounded-full flex items-center justify-center\">\n                    <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <p className=\"text-gray-700 font-medium\">Upload your signature</p>\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Drag and drop your signature image here, or click to browse\n                    </p>\n                  </div>\n                  <div className=\"text-xs text-gray-400\">\n                    Supported formats: PNG, JPEG, JPG (Max 5MB)\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Instructions */}\n            <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <h4 className=\"text-sm font-medium text-blue-800 mb-2\">Signature Guidelines:</h4>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>â€¢ Use a clear, high-resolution image of your signature</li>\n                <li>â€¢ Signature should be on a white or transparent background</li>\n                <li>â€¢ Ensure the signature is clearly visible and not blurry</li>\n                <li>â€¢ This signature will be used for official documents</li>\n              </ul>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"mt-2\">\n                <p className=\"text-xs text-red-600\">\n                  {error}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className={REGISTRATION_STYLES.buttonGroup}>\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className={REGISTRATION_STYLES.backButton}\n          >\n            {stepData.buttons.back}\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            onClick={() => console.log('ðŸ–±ï¸ Submit button clicked, formData.signatureFile:', !!formData.signatureFile)}\n            className={`${REGISTRATION_STYLES.submitButton} ${\n              isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          >\n            {isSubmitting ? 'Uploading...' : stepData.buttons.submit}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3478, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/BusinessPreferencesStep.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function BusinessPreferencesStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[4];\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { saveFormData, getAuthToken, authenticatedFetch } = useAuth();\n\n  // Business preference options\n  const businessPreferences = [\n    {\n      value: 'marketplace_only',\n      title: 'Marketplace Only',\n      description: 'Sell products exclusively through our marketplace platform',\n      features: [\n        'Access to marketplace dashboard',\n        'Built-in customer base',\n        'Marketplace marketing tools',\n        'Simplified order management'\n      ]\n    },\n    {\n      value: 'marketplace_and_api',\n      title: 'Marketplace & API',\n      description: 'Sell through marketplace and integrate with your own systems via API',\n      features: [\n        'All marketplace features',\n        'API access for integration',\n        'Custom workflow automation',\n        'Advanced reporting and analytics',\n        'Bulk operations support'\n      ]\n    }\n  ];\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    if (!formData.business_preference) {\n      setError('Please select a business preference');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      // Prepare data for API - trying string format instead of array\n      const businessPreferenceData = {\n        business_preference: formData.business_preference // Sending as string\n      };\n\n      console.log('Raw formData.business_preference:', formData.business_preference);\n      console.log('Type of formData.business_preference:', typeof formData.business_preference);\n      console.log('Submitting business preference as string:', businessPreferenceData);\n      console.log('JSON stringified:', JSON.stringify(businessPreferenceData));\n\n      // Call the business preference API using secure authenticated fetch\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/business-preference/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(businessPreferenceData)\n      });\n\n      const data = await response.json();\n      console.log('Business preference API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Business preference saved successfully:', data);\n        \n        // Save the submitted data for future reference\n        const savedData = {\n          business_preference: formData.business_preference,\n          businessPreferenceSaved: true\n        };\n        saveFormData(savedData);\n        \n        console.log('Business preferences completed, proceeding to next step');\n        onSubmit();\n      } else {\n        // Handle API errors\n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 400) {\n          setError(data.message || data.detail || 'Invalid business preference data. Please try again.');\n        } else {\n          setError(data.message || data.detail || 'Failed to save business preference. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error saving business preference:', error);\n      setError('Network error while saving business preference. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handlePreferenceChange = (value) => {\n    setError('');\n    handleChange({\n      target: { name: 'business_preference', value }\n    });\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">{stepData.title}</h2>\n        <p className=\"text-gray-600\">{stepData.subtitle}</p>\n      </div>\n\n      <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n        <div className={REGISTRATION_STYLES.fieldGroup}>\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Business Preference *\n            </label>\n            \n            <div className=\"space-y-4 mt-3\">\n              {businessPreferences.map((preference) => (\n                <div\n                  key={preference.value}\n                  className={`relative border rounded-lg p-4 cursor-pointer transition-all ${\n                    formData.business_preference === preference.value\n                      ? 'border-blue-500 bg-blue-50 ring-2 ring-blue-200'\n                      : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50'\n                  }`}\n                  onClick={() => handlePreferenceChange(preference.value)}\n                >\n                  <div className=\"flex items-start\">\n                    <div className=\"flex items-center h-5\">\n                      <input\n                        id={preference.value}\n                        name=\"business_preference\"\n                        type=\"radio\"\n                        value={preference.value}\n                        checked={formData.business_preference === preference.value}\n                        onChange={() => handlePreferenceChange(preference.value)}\n                        className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2\"\n                      />\n                    </div>\n                    <div className=\"ml-3 flex-1\">\n                      <label\n                        htmlFor={preference.value}\n                        className=\"block text-lg font-medium text-gray-900 cursor-pointer\"\n                      >\n                        {preference.title}\n                      </label>\n                      <p className=\"text-sm text-gray-600 mt-1\">\n                        {preference.description}\n                      </p>\n                      \n                      {/* Features List */}\n                      <div className=\"mt-3\">\n                        <p className=\"text-sm font-medium text-gray-700 mb-2\">Features included:</p>\n                        <ul className=\"text-sm text-gray-600 space-y-1\">\n                          {preference.features.map((feature, index) => (\n                            <li key={index} className=\"flex items-center\">\n                              <svg className=\"w-4 h-4 text-green-500 mr-2 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                              </svg>\n                              {feature}\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Information Box */}\n            <div className=\"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg\">\n              <div className=\"flex items-start\">\n                <svg className=\"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                  <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n                </svg>\n                <div>\n                  <h4 className=\"font-medium text-gray-900\">Good to know</h4>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    You can upgrade your business preference later from your account settings. \n                    API access includes additional technical setup and may require developer resources.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"mt-4\">\n                <p className=\"text-sm text-red-600\">\n                  {error}\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className={REGISTRATION_STYLES.buttonGroup}>\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className={REGISTRATION_STYLES.backButton}\n          >\n            {stepData.buttons.back}\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className={`${REGISTRATION_STYLES.submitButton} ${\n              isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          >\n            {isSubmitting ? 'Saving...' : stepData.buttons.submit}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3884, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/WarehouseDetailsStep.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function WarehouseDetailsStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[5];\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { saveFormData, getAuthToken, authenticatedFetch } = useAuth();\n\n  // Initialize city_warehouses if not present\n  const cityWarehouses = formData.city_warehouses || [{ city_name: '', warehouse_count: 1 }];\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    // Validate city warehouses\n    if (!cityWarehouses || cityWarehouses.length === 0) {\n      setError('Please add at least one warehouse location');\n      setIsSubmitting(false);\n      return;\n    }\n\n    for (let i = 0; i < cityWarehouses.length; i++) {\n      const warehouse = cityWarehouses[i];\n      \n      if (!warehouse.city_name?.trim()) {\n        setError(`City name is required for warehouse ${i + 1}`);\n        setIsSubmitting(false);\n        return;\n      }\n\n      if (!warehouse.warehouse_count || warehouse.warehouse_count < 1) {\n        setError(`Warehouse count must be at least 1 for ${warehouse.city_name || `warehouse ${i + 1}`}`);\n        setIsSubmitting(false);\n        return;\n      }\n    }\n\n    // Validate daily order volume\n    if (formData.daily_order_volume === undefined || formData.daily_order_volume === null || formData.daily_order_volume === '') {\n      setError('Daily order volume is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (formData.daily_order_volume < 0) {\n      setError('Daily order volume cannot be negative');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      // Prepare warehouse data for API\n      const warehouseData = {\n        city_warehouses: cityWarehouses.map(warehouse => ({\n          city_name: warehouse.city_name.trim(),\n          warehouse_count: parseInt(warehouse.warehouse_count)\n        })),\n        daily_order_volume: parseInt(formData.daily_order_volume)\n      };\n\n      console.log('Submitting warehouse details:', warehouseData);\n\n      // Call the warehouse details API using secure authenticated fetch\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/warehouse-details/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(warehouseData)\n      });\n\n      const data = await response.json();\n      console.log('Warehouse details API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Warehouse details saved successfully:', data);\n        \n        // Save the warehouse data for future reference\n        const savedData = {\n          city_warehouses: cityWarehouses,\n          daily_order_volume: formData.daily_order_volume,\n          warehouseDetailsCompleted: true\n        };\n        saveFormData(savedData);\n        \n        console.log('Warehouse details completed, proceeding to next step');\n        onSubmit();\n      } else {\n        // Handle API errors\n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 400) {\n          setError(data.message || data.detail || 'Invalid warehouse details. Please check your input.');\n        } else if (response.status === 403) {\n          setError('Access denied. Please ensure your account is properly verified.');\n        } else {\n          setError(data.message || data.detail || 'Failed to save warehouse details. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error saving warehouse details:', error);\n      setError('Network error while saving warehouse details. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleCityWarehouseChange = (index, field, value) => {\n    setError('');\n    const updatedWarehouses = [...cityWarehouses];\n    \n    if (field === 'warehouse_count') {\n      // Ensure warehouse count is a positive integer\n      const numValue = parseInt(value) || 1;\n      updatedWarehouses[index] = {\n        ...updatedWarehouses[index],\n        [field]: Math.max(1, numValue)\n      };\n    } else {\n      updatedWarehouses[index] = {\n        ...updatedWarehouses[index],\n        [field]: value\n      };\n    }\n\n    handleChange({\n      target: { name: 'city_warehouses', value: updatedWarehouses }\n    });\n  };\n\n  const addWarehouse = () => {\n    setError('');\n    const updatedWarehouses = [...cityWarehouses, { city_name: '', warehouse_count: 1 }];\n    handleChange({\n      target: { name: 'city_warehouses', value: updatedWarehouses }\n    });\n  };\n\n  const removeWarehouse = (index) => {\n    setError('');\n    if (cityWarehouses.length > 1) {\n      const updatedWarehouses = cityWarehouses.filter((_, i) => i !== index);\n      handleChange({\n        target: { name: 'city_warehouses', value: updatedWarehouses }\n      });\n    }\n  };\n\n  const handleDailyOrderVolumeChange = (e) => {\n    setError('');\n    const value = parseInt(e.target.value) || 0;\n    handleChange({\n      target: { name: 'daily_order_volume', value: Math.max(0, value) }\n    });\n  };\n\n  const handleInputChange = (e) => {\n    if (error) setError('');\n    handleChange(e);\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">{stepData.title}</h2>\n        <p className=\"text-gray-600\">{stepData.subtitle}</p>\n      </div>\n\n      <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n        <div className={REGISTRATION_STYLES.fieldGroup}>\n          \n          {/* City Warehouses Section */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Warehouse Locations *\n            </label>\n            <div className=\"space-y-4 mt-3\">\n              {cityWarehouses.map((warehouse, index) => (\n                <div key={index} className=\"border border-gray-300 rounded-lg p-4 bg-gray-50\">\n                  <div className=\"flex justify-between items-center mb-3\">\n                    <h4 className=\"font-medium text-gray-900\">\n                      Warehouse {index + 1}\n                    </h4>\n                    {cityWarehouses.length > 1 && (\n                      <button\n                        type=\"button\"\n                        onClick={() => removeWarehouse(index)}\n                        className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                      >\n                        Remove\n                      </button>\n                    )}\n                  </div>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {/* City Name */}\n                    <div>\n                      <label htmlFor={`city_name_${index}`} className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        City Name *\n                      </label>\n                      <input\n                        id={`city_name_${index}`}\n                        type=\"text\"\n                        required\n                        className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n                        placeholder=\"Enter city name\"\n                        value={warehouse.city_name || ''}\n                        onChange={(e) => handleCityWarehouseChange(index, 'city_name', e.target.value)}\n                      />\n                    </div>\n\n                    {/* Warehouse Count */}\n                    <div>\n                      <label htmlFor={`warehouse_count_${index}`} className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Warehouse Count *\n                      </label>\n                      <input\n                        id={`warehouse_count_${index}`}\n                        type=\"number\"\n                        min=\"1\"\n                        required\n                        className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n                        placeholder=\"Number of warehouses\"\n                        value={warehouse.warehouse_count || 1}\n                        onChange={(e) => handleCityWarehouseChange(index, 'warehouse_count', e.target.value)}\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Add Warehouse Button */}\n            <button\n              type=\"button\"\n              onClick={addWarehouse}\n              className=\"mt-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n              </svg>\n              Add Another Warehouse\n            </button>\n          </div>\n\n          {/* Daily Order Volume */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"daily_order_volume\" className={REGISTRATION_STYLES.label}>\n              Daily Order Volume *\n            </label>\n            <input\n              id=\"daily_order_volume\"\n              name=\"daily_order_volume\"\n              type=\"number\"\n              min=\"0\"\n              required\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              placeholder=\"Enter expected daily order volume\"\n              value={formData.daily_order_volume || ''}\n              onChange={handleDailyOrderVolumeChange}\n            />\n            <p className=\"mt-1 text-xs text-gray-500\">\n              Enter the number of orders you expect to process per day\n            </p>\n          </div>\n\n          {/* Information Box */}\n          <div className=\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n            <div className=\"flex items-start\">\n              <svg className=\"w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n              </svg>\n              <div>\n                <h4 className=\"font-medium text-blue-900\">Warehouse Information</h4>\n                <div className=\"text-sm text-blue-800 mt-1 space-y-1\">\n                  <p>â€¢ Add all cities where you have warehouse facilities</p>\n                  <p>â€¢ Include the total number of warehouses in each city</p>\n                  <p>â€¢ Daily order volume helps us optimize your fulfillment process</p>\n                  <p>â€¢ You can add more warehouse locations later from your dashboard</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"mt-4\">\n              <p className=\"text-sm text-red-600\">\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className={REGISTRATION_STYLES.buttonGroup}>\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className={REGISTRATION_STYLES.backButton}\n          >\n            {stepData.buttons.back}\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className={`${REGISTRATION_STYLES.submitButton} ${\n              isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          >\n            {isSubmitting ? 'Saving...' : stepData.buttons.submit}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4456, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/BrandProductDetailsStep.jsx"],"sourcesContent":["import { useState, useRef } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function BrandProductDetailsStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[6];\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [logoPreview, setLogoPreview] = useState(null);\n  const [catalogPreview, setCatalogPreview] = useState(null);\n  const logoInputRef = useRef(null);\n  const catalogInputRef = useRef(null);\n  const { saveFormData, getAuthToken, authenticatedFetch } = useAuth();\n\n  // Options for form fields\n  const productCategories = [\n    'Clothing', 'Footwear', 'Accessories', 'Electronics', 'Home & Garden',\n    'Sports & Outdoors', 'Beauty & Personal Care', 'Health & Wellness',\n    'Books & Media', 'Toys & Games', 'Automotive', 'Food & Beverages', 'Other'\n  ];\n\n  const genderOptions = [\n    { value: 'men', label: 'Men' },\n    { value: 'women', label: 'Women' },\n    { value: 'kids', label: 'Kids' },\n    { value: 'unisex', label: 'Unisex' }\n  ];\n\n  // Initialize arrays if not present\n  const selectedCategories = formData.product_categories || [];\n  const selectedGenders = formData.gender || [];\n  const targetAgeGroups = formData.target_age_groups || [18, 65];\n  const priceRange = formData.price_range || ['', ''];\n\n  const validateFile = (file, type) => {\n    const maxSize = type === 'logo' ? 5 * 1024 * 1024 : 10 * 1024 * 1024; // 5MB for logo, 10MB for catalog\n    const allowedTypes = type === 'logo' \n      ? ['image/png', 'image/jpeg', 'image/jpg']\n      : ['application/pdf', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/csv'];\n\n    if (!allowedTypes.includes(file.type)) {\n      const typesText = type === 'logo' ? 'PNG, JPEG, JPG' : 'PDF, Excel, CSV';\n      setError(`Please upload a valid ${typesText} file for ${type}`);\n      return false;\n    }\n\n    if (file.size > maxSize) {\n      const sizeText = type === 'logo' ? '5MB' : '10MB';\n      setError(`${type} file size should be less than ${sizeText}`);\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleFileUpload = (file, type) => {\n    if (validateFile(file, type)) {\n      setError('');\n      \n      const reader = new FileReader();\n      reader.onload = (e) => {\n        if (type === 'logo') {\n          setLogoPreview(e.target.result);\n        } else {\n          setCatalogPreview({ name: file.name, size: file.size });\n        }\n      };\n      \n      if (type === 'logo') {\n        reader.readAsDataURL(file);\n      } else {\n        setCatalogPreview({ name: file.name, size: file.size });\n      }\n\n      // Store file in formData\n      handleChange({\n        target: { name: type === 'logo' ? 'brand_logo' : 'product_catalog', value: file }\n      });\n    }\n  };\n\n  const handleCategoryChange = (category) => {\n    setError('');\n    const updatedCategories = selectedCategories.includes(category)\n      ? selectedCategories.filter(cat => cat !== category)\n      : [...selectedCategories, category];\n    \n    handleChange({\n      target: { name: 'product_categories', value: updatedCategories }\n    });\n  };\n\n  const handleGenderChange = (gender) => {\n    setError('');\n    const updatedGenders = selectedGenders.includes(gender)\n      ? selectedGenders.filter(g => g !== gender)\n      : [...selectedGenders, gender];\n    \n    handleChange({\n      target: { name: 'gender', value: updatedGenders }\n    });\n  };\n\n  const handleAgeRangeChange = (index, value) => {\n    setError('');\n    const updatedRange = [...targetAgeGroups];\n    updatedRange[index] = parseInt(value) || 0;\n    \n    handleChange({\n      target: { name: 'target_age_groups', value: updatedRange }\n    });\n  };\n\n  const handlePriceRangeChange = (index, value) => {\n    setError('');\n    const updatedRange = [...priceRange];\n    updatedRange[index] = value;\n    \n    handleChange({\n      target: { name: 'price_range', value: updatedRange }\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    // Validation\n    if (!formData.brand_logo) {\n      setError('Brand logo is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!selectedCategories.length) {\n      setError('Please select at least one product category');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!selectedGenders.length) {\n      setError('Please select at least one target gender');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (targetAgeGroups[0] >= targetAgeGroups[1]) {\n      setError('Maximum age must be greater than minimum age');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!priceRange[0] || !priceRange[1]) {\n      setError('Please specify both minimum and maximum price');\n      setIsSubmitting(false);\n      return;\n    }\n\n    const minPrice = parseFloat(priceRange[0]);\n    const maxPrice = parseFloat(priceRange[1]);\n\n    if (minPrice >= maxPrice) {\n      setError('Maximum price must be greater than minimum price');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      // Create FormData for file upload\n      const formDataToSend = new FormData();\n      \n      // Add brand logo (required)\n      formDataToSend.append('brand_logo', formData.brand_logo);\n      \n      // Add product categories as array\n      selectedCategories.forEach(category => {\n        formDataToSend.append('product_categories', category);\n      });\n      \n      // Add gender as array\n      selectedGenders.forEach(gender => {\n        formDataToSend.append('gender', gender);\n      });\n      \n      // Add target age groups as array\n      targetAgeGroups.forEach(age => {\n        formDataToSend.append('target_age_groups', age.toString());\n      });\n      \n      // Add price range as array\n      priceRange.forEach(price => {\n        formDataToSend.append('price_range', price);\n      });\n      \n      // Add product catalog if provided (optional)\n      if (formData.product_catalog) {\n        formDataToSend.append('product_catalog', formData.product_catalog);\n      }\n\n      console.log('Submitting brand and product details...');\n      \n      // Debug: Log FormData contents\n      for (let [key, value] of formDataToSend.entries()) {\n        console.log(`${key}:`, value);\n      }\n\n      // Call the brand product details API using secure authenticated fetch\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/product-details/', {\n        method: 'POST',\n        headers: {\n          // Don't set Content-Type for FormData, let browser set it with boundary\n        },\n        body: formDataToSend\n      });\n\n      const data = await response.json();\n      console.log('Brand product details API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Brand and product details saved successfully:', data);\n        \n        // Save the form data for future reference\n        const savedData = {\n          brand_logo_uploaded: true,\n          product_categories: selectedCategories,\n          gender: selectedGenders,\n          target_age_groups: targetAgeGroups,\n          price_range: priceRange,\n          product_catalog_uploaded: !!formData.product_catalog,\n          brandProductDetailsCompleted: true\n        };\n        saveFormData(savedData);\n        \n        console.log('Brand and product details completed, proceeding to next step');\n        onSubmit();\n      } else {\n        // Handle API errors\n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 400) {\n          setError(data.message || data.detail || 'Invalid data provided. Please check your inputs.');\n        } else if (response.status === 403) {\n          setError('Access denied. Please ensure your account is properly verified.');\n        } else if (response.status === 413) {\n          setError('File size too large. Please reduce file sizes and try again.');\n        } else {\n          setError(data.message || data.detail || 'Failed to save brand and product details. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error saving brand and product details:', error);\n      setError('Network error while saving details. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">{stepData.title}</h2>\n        <p className=\"text-gray-600\">{stepData.subtitle}</p>\n      </div>\n\n      <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n        <div className={REGISTRATION_STYLES.fieldGroup}>\n          \n          {/* Brand Logo Upload */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Brand Logo *\n            </label>\n            <div\n              className=\"relative border-2 border-dashed rounded-lg p-6 text-center transition-colors border-gray-300 bg-gray-50 hover:border-gray-400 cursor-pointer\"\n              onClick={() => logoInputRef.current?.click()}\n            >\n              <input\n                ref={logoInputRef}\n                type=\"file\"\n                accept=\".png,.jpg,.jpeg\"\n                onChange={(e) => e.target.files?.[0] && handleFileUpload(e.target.files[0], 'logo')}\n                className=\"hidden\"\n              />\n\n              {logoPreview ? (\n                <div className=\"space-y-3\">\n                  <img src={logoPreview} alt=\"Logo preview\" className=\"max-w-32 max-h-32 mx-auto rounded-md\" />\n                  <p className=\"text-sm text-green-600\">âœ“ Logo uploaded successfully</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <div className=\"w-12 h-12 mx-auto bg-gray-300 rounded-full flex items-center justify-center\">\n                    <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <p className=\"text-gray-700 font-medium\">Upload your brand logo</p>\n                    <p className=\"text-sm text-gray-500\">PNG, JPEG, JPG (Max 5MB)</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Product Categories */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Product Categories *\n            </label>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mt-2\">\n              {productCategories.map((category) => (\n                <label key={category} className=\"flex items-center space-x-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedCategories.includes(category)}\n                    onChange={() => handleCategoryChange(category)}\n                    className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">{category}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* Target Gender */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Target Gender *\n            </label>\n            <div className=\"flex flex-wrap gap-3 mt-2\">\n              {genderOptions.map((option) => (\n                <label key={option.value} className=\"flex items-center space-x-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedGenders.includes(option.value)}\n                    onChange={() => handleGenderChange(option.value)}\n                    className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">{option.label}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* Target Age Groups */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Target Age Range *\n            </label>\n            <div className=\"flex items-center gap-3 mt-2\">\n              <input\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                placeholder=\"Min age\"\n                value={targetAgeGroups[0] || ''}\n                onChange={(e) => handleAgeRangeChange(0, e.target.value)}\n                className={`${REGISTRATION_STYLES.input} flex-1`}\n              />\n              <span className=\"text-gray-500\">to</span>\n              <input\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                placeholder=\"Max age\"\n                value={targetAgeGroups[1] || ''}\n                onChange={(e) => handleAgeRangeChange(1, e.target.value)}\n                className={`${REGISTRATION_STYLES.input} flex-1`}\n              />\n            </div>\n            <p className=\"mt-1 text-xs text-gray-500\">Age range in years</p>\n          </div>\n\n          {/* Price Range */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Price Range *\n            </label>\n            <div className=\"flex items-center gap-3 mt-2\">\n              <div className=\"flex items-center flex-1\">\n                <span className=\"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-md\">â‚¹</span>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  placeholder=\"Min price\"\n                  value={priceRange[0] || ''}\n                  onChange={(e) => handlePriceRangeChange(0, e.target.value)}\n                  className={`${REGISTRATION_STYLES.input} rounded-l-none flex-1`}\n                />\n              </div>\n              <span className=\"text-gray-500\">to</span>\n              <div className=\"flex items-center flex-1\">\n                <span className=\"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-md\">â‚¹</span>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  step=\"0.01\"\n                  placeholder=\"Max price\"\n                  value={priceRange[1] || ''}\n                  onChange={(e) => handlePriceRangeChange(1, e.target.value)}\n                  className={`${REGISTRATION_STYLES.input} rounded-l-none flex-1`}\n                />\n              </div>\n            </div>\n            <p className=\"mt-1 text-xs text-gray-500\">Price range in Indian Rupees</p>\n          </div>\n\n          {/* Product Catalog Upload (Optional) */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Product Catalog (Optional)\n            </label>\n            <div\n              className=\"relative border-2 border-dashed rounded-lg p-4 text-center transition-colors border-gray-300 bg-gray-50 hover:border-gray-400 cursor-pointer\"\n              onClick={() => catalogInputRef.current?.click()}\n            >\n              <input\n                ref={catalogInputRef}\n                type=\"file\"\n                accept=\".pdf,.xlsx,.csv\"\n                onChange={(e) => e.target.files?.[0] && handleFileUpload(e.target.files[0], 'catalog')}\n                className=\"hidden\"\n              />\n\n              {catalogPreview ? (\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-center\">\n                    <svg className=\"w-8 h-8 text-green-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </div>\n                  <p className=\"text-sm font-medium text-gray-900\">{catalogPreview.name}</p>\n                  <p className=\"text-xs text-gray-500\">{formatFileSize(catalogPreview.size)}</p>\n                  <p className=\"text-sm text-green-600\">âœ“ Catalog uploaded successfully</p>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  <div className=\"w-8 h-8 mx-auto bg-gray-300 rounded-full flex items-center justify-center\">\n                    <svg className=\"w-4 h-4 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-700\">Upload product catalog</p>\n                    <p className=\"text-xs text-gray-500\">PDF, Excel, CSV (Max 10MB)</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"mt-4\">\n              <p className=\"text-sm text-red-600\">\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className={REGISTRATION_STYLES.buttonGroup}>\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className={REGISTRATION_STYLES.backButton}\n          >\n            {stepData.buttons.back}\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isSubmitting}\n            className={`${REGISTRATION_STYLES.submitButton} ${\n              isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          >\n            {isSubmitting ? 'Saving...' : stepData.buttons.submit}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5406, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/BankingDetailsStep.jsx"],"sourcesContent":["import { useState, useRef } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function BankingDetailsStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[7];\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [chequePreview, setChequePreview] = useState(null);\n  const chequeInputRef = useRef(null);\n  const { saveFormData, getAuthToken, authenticatedFetch } = useAuth();\n\n  // New states for micro deposit verification\n  const [bankDetailsSubmitted, setBankDetailsSubmitted] = useState(false);\n  const [bankReferenceId, setBankReferenceId] = useState('');\n  const [microDepositAmount, setMicroDepositAmount] = useState('');\n  const [isVerifying, setIsVerifying] = useState(false);\n\n  const validateIFSC = (ifscCode) => {\n    // IFSC code format: First 4 characters are alphabets, 5th character is 0, last 6 characters are alphanumeric\n    const ifscRegex = /^[A-Z]{4}0[A-Z0-9]{6}$/;\n    return ifscRegex.test(ifscCode.toUpperCase());\n  };\n\n  const validateAccountNumber = (accountNumber) => {\n    // Account number should be between 1-18 digits\n    const cleanNumber = accountNumber.replace(/\\D/g, '');\n    return cleanNumber.length >= 1 && cleanNumber.length <= 18;\n  };\n\n  const validateFile = (file) => {\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf'];\n\n    if (!allowedTypes.includes(file.type)) {\n      setError('Please upload a PNG, JPEG, JPG, or PDF file for cancelled cheque');\n      return false;\n    }\n\n    if (file.size > maxSize) {\n      setError('Cancelled cheque file size should be less than 5MB');\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleFileUpload = (file) => {\n    if (validateFile(file)) {\n      setError('');\n      \n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n          setChequePreview({ type: 'image', src: e.target.result, name: file.name });\n        };\n        reader.readAsDataURL(file);\n      } else {\n        setChequePreview({ type: 'pdf', name: file.name, size: file.size });\n      }\n\n      handleChange({\n        target: { name: 'cancelled_cheque', value: file }\n      });\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setChequePreview(null);\n    setError('');\n    handleChange({\n      target: { name: 'cancelled_cheque', value: null }\n    });\n    if (chequeInputRef.current) {\n      chequeInputRef.current.value = '';\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    // Validation\n    if (!formData.account_holder_name?.trim()) {\n      setError('Account holder name is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (formData.account_holder_name.length > 100) {\n      setError('Account holder name must be less than 100 characters');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!formData.account_number?.trim()) {\n      setError('Account number is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!validateAccountNumber(formData.account_number)) {\n      setError('Please enter a valid account number (1-18 digits)');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!formData.ifsc_code?.trim()) {\n      setError('IFSC code is required');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!validateIFSC(formData.ifsc_code)) {\n      setError('Please enter a valid IFSC code (e.g., SBIN0001234)');\n      setIsSubmitting(false);\n      return;\n    }\n\n    if (!formData.cancelled_cheque) {\n      setError('Please upload a cancelled cheque');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      // Create FormData for file upload\n      const formDataToSend = new FormData();\n      formDataToSend.append('account_holder_name', formData.account_holder_name.trim());\n      formDataToSend.append('account_number', formData.account_number.trim());\n      formDataToSend.append('ifsc_code', formData.ifsc_code.trim().toUpperCase());\n      formDataToSend.append('cancelled_cheque', formData.cancelled_cheque);\n\n      console.log('Submitting bank details...');\n      \n      // Debug: Log FormData contents\n      for (let [key, value] of formDataToSend.entries()) {\n        console.log(`${key}:`, value);\n      }\n\n      // Call the bank details API using secure authenticated fetch\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/bank-details/', {\n        method: 'POST',\n        headers: {\n          // Don't set Content-Type for FormData, let browser set it with boundary\n        },\n        body: formDataToSend\n      });\n\n      const data = await response.json();\n      console.log('Bank details API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Bank details saved successfully:', data);\n        \n        // Extract bank reference ID from API response\n        const referenceId = data.bank_reference_id || data.reference_id || '';\n        setBankReferenceId(referenceId);\n        \n        // Save the bank data for future reference\n        const savedData = {\n          account_holder_name: formData.account_holder_name.trim(),\n          account_number: formData.account_number.trim(),\n          ifsc_code: formData.ifsc_code.trim().toUpperCase(),\n          cancelled_cheque_uploaded: true,\n          bankDetailsCompleted: true,\n          bank_reference_id: referenceId\n        };\n        saveFormData(savedData);\n        \n        // Show micro deposit verification section\n        setBankDetailsSubmitted(true);\n        setError('');\n        console.log('Bank details submitted. Awaiting micro deposit verification.');\n      } else {\n        // Handle API errors\n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 400) {\n          setError(data.message || data.detail || 'Invalid bank details. Please check your input.');\n        } else if (response.status === 403) {\n          setError('Email or phone not verified. Please complete verification first.');\n        } else if (response.status === 404) {\n          setError('Brand profile not found. Please complete previous steps.');\n        } else if (response.status === 413) {\n          setError('File size too large. Please reduce file size and try again.');\n        } else {\n          setError(data.message || data.detail || 'Failed to save bank details. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error saving bank details:', error);\n      setError('Network error while saving bank details. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleMicroDepositVerification = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsVerifying(true);\n\n    // Validation for micro deposit fields\n    if (!microDepositAmount.trim()) {\n      setError('Please enter the micro deposit amount');\n      setIsVerifying(false);\n      return;\n    }\n\n    if (!bankReferenceId) {\n      setError('Bank reference ID not found. Please contact support.');\n      setIsVerifying(false);\n      return;\n    }\n\n    // Validate amount format (should be a valid decimal number)\n    const amount = parseFloat(microDepositAmount);\n    if (isNaN(amount) || amount <= 0) {\n      setError('Please enter a valid deposit amount');\n      setIsVerifying(false);\n      return;\n    }\n\n    try {\n      // Prepare verification data\n      const verificationData = {\n        amount_received: parseFloat(microDepositAmount),\n        bank_reference_id: bankReferenceId\n      };\n\n      console.log('Submitting micro deposit verification:', verificationData);\n\n      // Call the micro deposit verification API using secure authenticated fetch\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/bank-verification/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(verificationData)\n      });\n\n      const data = await response.json();\n      console.log('Micro deposit verification API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Bank verification successful:', data);\n        \n        // Save verification success data\n        const savedData = {\n          bankVerificationCompleted: true,\n          micro_deposit_verified: true,\n          verification_date: new Date().toISOString()\n        };\n        saveFormData(savedData);\n        \n        console.log('Bank verification completed, proceeding to next step');\n        onSubmit();\n      } else {\n        // Handle API errors\n        if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 400) {\n          setError(data.message || data.detail || 'Invalid verification details. Please check your input.');\n        } else if (response.status === 404) {\n          setError('Bank reference not found. Please contact support.');\n        } else if (response.status === 422) {\n          setError('Verification failed. Please check the amount and reference ID.');\n        } else {\n          setError(data.message || data.detail || 'Verification failed. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error verifying micro deposit:', error);\n      setError('Network error while verifying deposit. Please try again.');\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    if (error) setError('');\n    handleChange(e);\n  };\n\n  const handleAccountNumberChange = (e) => {\n    // Allow only digits and limit to 18 characters\n    let value = e.target.value.replace(/\\D/g, '');\n    if (value.length > 18) {\n      value = value.slice(0, 18);\n    }\n    \n    if (error) setError('');\n    e.target.value = value;\n    handleChange(e);\n  };\n\n  const handleIFSCChange = (e) => {\n    // Convert to uppercase and limit to 11 characters\n    let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');\n    if (value.length > 11) {\n      value = value.slice(0, 11);\n    }\n    \n    if (error) setError('');\n    e.target.value = value;\n    handleChange(e);\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">{stepData.title}</h2>\n        <p className=\"text-gray-600\">{stepData.subtitle}</p>\n      </div>\n\n      <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n        <div className={REGISTRATION_STYLES.fieldGroup}>\n          \n          {/* Account Holder Name */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"account_holder_name\" className={REGISTRATION_STYLES.label}>\n              Account Holder Name *\n            </label>\n            <input\n              id=\"account_holder_name\"\n              name=\"account_holder_name\"\n              type=\"text\"\n              required\n              maxLength={100}\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              placeholder=\"Enter account holder's full name\"\n              value={formData.account_holder_name || ''}\n              onChange={handleInputChange}\n            />\n            <p className=\"mt-1 text-xs text-gray-500\">\n              Name as per bank records (max 100 characters)\n            </p>\n          </div>\n\n          {/* Account Number */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"account_number\" className={REGISTRATION_STYLES.label}>\n              Account Number *\n            </label>\n            <input\n              id=\"account_number\"\n              name=\"account_number\"\n              type=\"text\"\n              required\n              maxLength={18}\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              placeholder=\"Enter bank account number\"\n              value={formData.account_number || ''}\n              onChange={handleAccountNumberChange}\n            />\n            <p className=\"mt-1 text-xs text-gray-500\">\n              Enter your bank account number (1-18 digits)\n            </p>\n          </div>\n\n          {/* IFSC Code */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label htmlFor=\"ifsc_code\" className={REGISTRATION_STYLES.label}>\n              IFSC Code *\n            </label>\n            <input\n              id=\"ifsc_code\"\n              name=\"ifsc_code\"\n              type=\"text\"\n              required\n              maxLength={11}\n              className={`${REGISTRATION_STYLES.input} ${error ? 'border-red-500' : ''}`}\n              placeholder=\"Enter IFSC code (e.g., SBIN0001234)\"\n              value={formData.ifsc_code || ''}\n              onChange={handleIFSCChange}\n            />\n            <p className=\"mt-1 text-xs text-gray-500\">\n              11-character IFSC code of your bank branch\n            </p>\n          </div>\n\n          {/* Cancelled Cheque Upload */}\n          <div className={REGISTRATION_STYLES.fieldContainer}>\n            <label className={REGISTRATION_STYLES.label}>\n              Cancelled Cheque *\n            </label>\n            \n            <div\n              className={`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n                error\n                  ? 'border-red-300 bg-red-50'\n                  : 'border-gray-300 bg-gray-50 hover:border-gray-400'\n              } cursor-pointer`}\n              onClick={() => chequeInputRef.current?.click()}\n            >\n              <input\n                ref={chequeInputRef}\n                type=\"file\"\n                accept=\".png,.jpg,.jpeg,.pdf\"\n                onChange={(e) => e.target.files?.[0] && handleFileUpload(e.target.files[0])}\n                className=\"hidden\"\n              />\n\n              {chequePreview ? (\n                <div className=\"space-y-4\">\n                  {chequePreview.type === 'image' ? (\n                    <div className=\"relative inline-block\">\n                      <img\n                        src={chequePreview.src}\n                        alt=\"Cancelled cheque preview\"\n                        className=\"max-w-full max-h-48 mx-auto border border-gray-200 rounded-md shadow-sm\"\n                      />\n                      <button\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleRemoveFile();\n                        }}\n                        className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 flex items-center justify-center\"\n                      >\n                        Ã—\n                      </button>\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center justify-center space-x-3\">\n                      <svg className=\"w-8 h-8 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z\" clipRule=\"evenodd\" />\n                      </svg>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{chequePreview.name}</p>\n                        <p className=\"text-sm text-gray-500\">{formatFileSize(chequePreview.size)}</p>\n                      </div>\n                      <button\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleRemoveFile();\n                        }}\n                        className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n                  )}\n                  <p className=\"text-sm text-green-600\">âœ“ Cancelled cheque uploaded successfully</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  <div className=\"w-12 h-12 mx-auto bg-gray-300 rounded-full flex items-center justify-center\">\n                    <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                    </svg>\n                  </div>\n                  <div>\n                    <p className=\"text-gray-700 font-medium\">Upload cancelled cheque</p>\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      Drag and drop or click to browse\n                    </p>\n                  </div>\n                  <div className=\"text-xs text-gray-400\">\n                    Supported formats: PNG, JPEG, JPG, PDF (Max 5MB)\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Information Box */}\n            <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n              <h4 className=\"text-sm font-medium text-blue-800 mb-2\">Cancelled Cheque Requirements:</h4>\n              <ul className=\"text-sm text-blue-700 space-y-1\">\n                <li>â€¢ Must be a clear, readable image or PDF</li>\n                <li>â€¢ Should contain account holder name, account number, and IFSC code</li>\n                <li>â€¢ Write \"CANCELLED\" across the cheque</li>\n                <li>â€¢ Do not sign the cancelled cheque</li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Micro Deposit Verification Section - Show after bank details are submitted */}\n          {bankDetailsSubmitted && (\n            <>\n              <div className=\"mt-8 p-6 bg-green-50 border border-green-200 rounded-lg\">\n                <div className=\"flex items-start\">\n                  <svg className=\"w-6 h-6 text-green-500 mr-3 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                  </svg>\n                  <div>\n                    <h4 className=\"font-medium text-green-900 mb-2\">Bank Details Submitted Successfully!</h4>\n                    <p className=\"text-sm text-green-800\">\n                      A micro deposit has been initiated to your bank account. Please check your bank statement and enter the deposit details below to verify your account.\n                    </p>\n                    {bankReferenceId && (\n                      <p className=\"text-sm text-green-700 mt-2\">\n                        <strong>Reference ID:</strong> {bankReferenceId}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6 space-y-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Verify Micro Deposit</h3>\n                \n                {/* Micro Deposit Amount */}\n                <div className={REGISTRATION_STYLES.fieldContainer}>\n                  <label htmlFor=\"micro_deposit_amount\" className={REGISTRATION_STYLES.label}>\n                    Micro Deposit Amount *\n                  </label>\n                  <div className=\"flex items-center\">\n                    <span className=\"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-md\">â‚¹</span>\n                    <input\n                      id=\"micro_deposit_amount\"\n                      name=\"micro_deposit_amount\"\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      required\n                      className={`${REGISTRATION_STYLES.input} rounded-l-none ${error ? 'border-red-500' : ''}`}\n                      placeholder=\"Enter the exact amount deposited\"\n                      value={microDepositAmount}\n                      onChange={(e) => {\n                        setMicroDepositAmount(e.target.value);\n                        if (error) setError('');\n                      }}\n                    />\n                  </div>\n                  <p className=\"mt-1 text-xs text-gray-500\">\n                    Enter the exact amount that was deposited to your account (e.g., 1.23)\n                  </p>\n                </div>\n\n                {/* Verification Instructions */}\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-blue-800 mb-2\">Verification Instructions:</h4>\n                  <ul className=\"text-sm text-blue-700 space-y-1\">\n                    <li>â€¢ Check your bank account statement for a small deposit (usually â‚¹1-10)</li>\n                    <li>â€¢ Note the exact amount from the transaction</li>\n                    <li>â€¢ The deposit may take 1-2 business days to appear</li>\n                    <li>â€¢ Contact support if you don't receive the deposit within 2 business days</li>\n                  </ul>\n                </div>\n\n                {/* Verify Button */}\n                <div className=\"flex justify-end\">\n                  <button\n                    type=\"button\"\n                    onClick={handleMicroDepositVerification}\n                    disabled={isVerifying || !microDepositAmount}\n                    className={`px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${\n                      (isVerifying || !microDepositAmount) ? 'opacity-50 cursor-not-allowed' : ''\n                    }`}\n                  >\n                    {isVerifying ? 'Verifying...' : 'Verify Deposit'}\n                  </button>\n                </div>\n              </div>\n            </>\n          )}\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"mt-4\">\n              <p className=\"text-sm text-red-600\">\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className={REGISTRATION_STYLES.buttonGroup}>\n          <button\n            type=\"button\"\n            onClick={onBack}\n            className={REGISTRATION_STYLES.backButton}\n          >\n            {stepData.buttons.back}\n          </button>\n          {!bankDetailsSubmitted && (\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className={`${REGISTRATION_STYLES.submitButton} ${\n                isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {isSubmitting ? 'Saving...' : stepData.buttons.submit}\n            </button>\n          )}\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6440, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/OnboardingStatusStep.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { REGISTRATION_STYLES } from '../../utils/constants';\n\nexport default function OnboardingStatusStep({ \n  submissionData = null, \n  onGoToDashboard = null, \n  onStartNewApplication = null \n}) {\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Simulate loading state for smooth transition\n    const timer = setTimeout(() => {\n      setIsLoading(false);\n    }, 1000);\n\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Default data structure if no submission data provided\n  const defaultData = {\n    success: true,\n    message: \"Onboarding completed successfully. Your account is now under review.\",\n    onboarding_id: \"ONBOARD-XXXX-XXXX\",\n    verification_status: {\n      code: 1,\n      status: \"Pending\",\n      message: \"Your brand profile is pending verification by our team.\"\n    }\n  };\n\n  const data = submissionData || defaultData;\n\n  // Status configurations based on verification status code\n  const getStatusConfig = (verificationStatus) => {\n    const code = verificationStatus?.code || 1;\n    const status = verificationStatus?.status || 'Pending';\n\n    switch (code) {\n      case 0:\n        return {\n          icon: 'âŒ',\n          bgColor: 'bg-red-50',\n          borderColor: 'border-red-200',\n          textColor: 'text-red-800',\n          iconBg: 'bg-red-100',\n          statusText: 'Rejected',\n          description: 'Application needs revision'\n        };\n      case 1:\n        return {\n          icon: 'â³',\n          bgColor: 'bg-yellow-50',\n          borderColor: 'border-yellow-200',\n          textColor: 'text-yellow-800',\n          iconBg: 'bg-yellow-100',\n          statusText: 'Under Review',\n          description: 'Your application is being processed'\n        };\n      case 2:\n        return {\n          icon: 'âœ…',\n          bgColor: 'bg-green-50',\n          borderColor: 'border-green-200',\n          textColor: 'text-green-800',\n          iconBg: 'bg-green-100',\n          statusText: 'Approved',\n          description: 'Welcome to the marketplace!'\n        };\n      default:\n        return {\n          icon: 'ðŸ“‹',\n          bgColor: 'bg-blue-50',\n          borderColor: 'border-blue-200',\n          textColor: 'text-blue-800',\n          iconBg: 'bg-blue-100',\n          statusText: status || 'Pending',\n          description: 'Processing your application'\n        };\n    }\n  };\n\n  const statusConfig = getStatusConfig(data.verification_status);\n\n  if (isLoading) {\n    return (\n      <div className=\"max-w-7xl mx-auto p-4 sm:p-6\">\n        <div className=\"flex items-center justify-center py-20\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-green-600 mx-auto mb-6\"></div>\n            <p className=\"text-lg text-gray-600\">Processing your submission...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6\">\n      <div className=\"text-center mb-8\">\n        {/* Success Animation */}\n        <div className=\"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-6 animate-pulse\">\n          <div className=\"text-4xl\">ðŸŽ‰</div>\n        </div>\n        \n        <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 mb-4\">\n          Submission Successful!\n        </h1>\n        \n        <p className=\"text-lg text-gray-600 mb-8\">\n          {data.message}\n        </p>\n      </div>\n\n      {/* Main Status Card */}\n      <div className=\"bg-white border-2 border-green-200 rounded-xl shadow-lg p-6 sm:p-8 mb-8\">\n        {/* Onboarding ID */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center bg-gray-100 rounded-lg px-4 py-2 mb-4\">\n            <span className=\"text-sm font-medium text-gray-600 mr-2\">Application ID:</span>\n            <span className=\"text-lg font-bold text-gray-900 font-mono\">\n              {data.onboarding_id}\n            </span>\n          </div>\n          <p className=\"text-sm text-gray-500\">\n            Keep this ID for your records and future reference\n          </p>\n        </div>\n\n        {/* Verification Status */}\n        <div className={`${statusConfig.bgColor} ${statusConfig.borderColor} border-2 rounded-lg p-6 mb-6`}>\n          <div className=\"flex items-start space-x-4\">\n            <div className={`${statusConfig.iconBg} rounded-full p-3 flex-shrink-0`}>\n              <span className=\"text-2xl\">{statusConfig.icon}</span>\n            </div>\n            <div className=\"flex-1\">\n              <h3 className={`text-lg font-semibold ${statusConfig.textColor} mb-2`}>\n                {statusConfig.statusText}\n              </h3>\n              <p className={`${statusConfig.textColor} text-sm mb-2`}>\n                {data.verification_status?.message || statusConfig.description}\n              </p>\n              <div className=\"text-xs text-gray-600\">\n                Status Code: {data.verification_status?.code || 1}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Timeline */}\n        <div className=\"border-t border-gray-200 pt-6\">\n          <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">What happens next?</h4>\n          <div className=\"space-y-4\">\n            <div className=\"flex items-start space-x-3\">\n              <div className=\"flex-shrink-0 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\n                <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n              </div>\n              <div>\n                <p className=\"font-medium text-gray-900\">Application Submitted</p>\n                <p className=\"text-sm text-gray-600\">Your onboarding application has been successfully submitted</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start space-x-3\">\n              <div className=\"flex-shrink-0 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center\">\n                <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n              </div>\n              <div>\n                <p className=\"font-medium text-gray-900\">Under Review</p>\n                <p className=\"text-sm text-gray-600\">Our team is reviewing your documents and information (2-3 business days)</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-start space-x-3\">\n              <div className=\"flex-shrink-0 w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center\">\n                <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n              </div>\n              <div>\n                <p className=\"font-medium text-gray-500\">Approval & Activation</p>\n                <p className=\"text-sm text-gray-500\">Once approved, you'll receive access to the brand dashboard</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Important Information */}\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8\">\n        <h4 className=\"text-lg font-semibold text-blue-900 mb-4\">ðŸ“¢ Important Information</h4>\n        <ul className=\"space-y-2 text-sm text-blue-800\">\n          <li className=\"flex items-start space-x-2\">\n            <span className=\"text-blue-600 mt-1\">â€¢</span>\n            <span>You will receive email notifications about your application status updates</span>\n          </li>\n          <li className=\"flex items-start space-x-2\">\n            <span className=\"text-blue-600 mt-1\">â€¢</span>\n            <span>If additional documentation is required, our team will contact you</span>\n          </li>\n          <li className=\"flex items-start space-x-2\">\n            <span className=\"text-blue-600 mt-1\">â€¢</span>\n            <span>Review process typically takes 2-3 business days</span>\n          </li>\n          <li className=\"flex items-start space-x-2\">\n            <span className=\"text-blue-600 mt-1\">â€¢</span>\n            <span>Keep your application ID handy for any support inquiries</span>\n          </li>\n        </ul>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n        {onGoToDashboard && (\n          <button\n            onClick={onGoToDashboard}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2\"\n          >\n            <span>ðŸ“Š</span>\n            <span>Go to Dashboard</span>\n          </button>\n        )}\n        \n        <button\n          onClick={() => window.location.href = 'mailto:support@yourmarketplace.com'}\n          className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2\"\n        >\n          <span>ðŸ’¬</span>\n          <span>Contact Support</span>\n        </button>\n        \n        {onStartNewApplication && (\n          <button\n            onClick={onStartNewApplication}\n            className=\"bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center space-x-2\"\n          >\n            <span>ðŸ†•</span>\n            <span>New Application</span>\n          </button>\n        )}\n      </div>\n\n      {/* Footer Note */}\n      <div className=\"text-center mt-8 p-4 bg-gray-50 rounded-lg\">\n        <p className=\"text-sm text-gray-600\">\n          Thank you for choosing our marketplace! We're excited to have you as a potential brand partner.\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7115, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/ReviewSubmitStep.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ONBOARDING_STEPS, REGISTRATION_STYLES } from '../../utils/constants';\nimport { useAuth } from '../../hooks/useAuth';\nimport OnboardingStatusStep from './OnboardingStatusStep';\n\nexport default function ReviewSubmitStep({ formData, handleChange, onSubmit, onBack }) {\n  const stepData = ONBOARDING_STEPS[8];\n  const [error, setError] = useState('');\n  const [termsAccepted, setTermsAccepted] = useState(false);\n  const [privacyAccepted, setPrivacyAccepted] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [onboardingData, setOnboardingData] = useState(null);\n  const [showStatus, setShowStatus] = useState(false);\n  const [submissionData, setSubmissionData] = useState(null);\n  const [isOnboardingComplete, setIsOnboardingComplete] = useState(false);\n  const { saveFormData, formData: authFormData, authenticatedFetch, getAuthToken } = useAuth();\n\n  // Fetch onboarding summary data from API\n  useEffect(() => {\n    const fetchOnboardingSummary = async () => {\n      try {\n        setIsLoading(true);\n        \n        // Get authentication token using secure method\n        const token = getAuthToken();\n        if (!token) {\n          setError('Authentication required. Please log in again.');\n          setIsLoading(false);\n          return;\n        }\n\n        console.log('Fetching onboarding summary...');\n\n        // Use authenticated fetch with automatic token refresh\n        const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/onboarding-summary/', {\n          method: 'GET'\n        });\n\n        const data = await response.json();\n        console.log('Onboarding summary API response:', { status: response.status, data });\n\n        if (response.ok && data.success) {\n          console.log('Onboarding summary fetched successfully:', data);\n          setOnboardingData(data.data);\n          setError('');\n          \n          // Check if onboarding is complete from auth context or API response\n          const isComplete = authFormData?.isOnboardingComplete || data.data?.is_onboarding_complete || false;\n          setIsOnboardingComplete(isComplete);\n          \n          // If onboarding is complete, show status immediately\n          if (isComplete) {\n            setShowStatus(true);\n            setSubmissionData(data); // Use the API response as submission data\n          }\n        } else {\n          // Handle API errors\n          if (response.status === 401) {\n            setError('Authentication failed. Please log in again.');\n          } else if (response.status === 403) {\n            setError('Email or phone not verified. Please complete verification first.');\n          } else if (response.status === 404) {\n            setError('Brand profile not found. Please complete previous steps.');\n          } else {\n            setError(data.message || data.detail || 'Failed to fetch onboarding summary. Please try again.');\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching onboarding summary:', error);\n        setError('Network error while fetching data. Please try again.');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchOnboardingSummary();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    if (!termsAccepted) {\n      setError('Please accept the Terms & Conditions to continue');\n      return;\n    }\n\n    if (!privacyAccepted) {\n      setError('Please accept the Privacy Policy to continue');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      \n      // Get authentication token using secure method\n      const token = getAuthToken();\n      if (!token) {\n        setError('Authentication required. Please log in again.');\n        return;\n      }\n\n      console.log('Submitting final onboarding application...');\n\n      // Prepare submission data\n      const submissionData = {\n        terms_accepted: termsAccepted,\n        privacy_policy_accepted: privacyAccepted\n      };\n\n      console.log('Final submission data:', submissionData);\n\n      // Use authenticated fetch with automatic token refresh\n      const response = await authenticatedFetch('http://15.207.254.95:8080/api/brand/final-submission/', {\n        method: 'POST',\n        body: JSON.stringify(submissionData)\n      });\n\n      const data = await response.json();\n      console.log('Final submission API response:', { status: response.status, data });\n\n      if (response.ok && data.success) {\n        console.log('Final submission successful:', data);\n        setError('');\n        \n        // Store submission data and show status component\n        setSubmissionData(data);\n        setShowStatus(true);\n      } else {\n        // Handle API errors\n        if (response.status === 400) {\n          setError(data.message || data.detail || 'Bad request. Please check your submission data.');\n        } else if (response.status === 401) {\n          setError('Authentication failed. Please log in again.');\n        } else if (response.status === 403) {\n          setError('Email or phone not verified. Please complete verification first.');\n        } else if (response.status === 404) {\n          setError('Brand profile not found. Please complete previous steps.');\n        } else if (response.status === 422) {\n          setError('Incomplete onboarding steps. Please complete all previous steps first.');\n        } else {\n          setError(data.message || data.detail || 'Failed to submit application. Please try again.');\n        }\n      }\n    } catch (error) {\n      console.error('Error submitting final application:', error);\n      setError('Network error while submitting application. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleTermsChange = (e) => {\n    setTermsAccepted(e.target.checked);\n    if (error) setError('');\n  };\n\n  const handlePrivacyChange = (e) => {\n    setPrivacyAccepted(e.target.checked);\n    if (error) setError('');\n  };\n\n  // Helper function to format arrays for display\n  const formatArray = (arr, fallback = 'Not specified') => {\n    if (!arr || arr.length === 0) return fallback;\n    const joined = arr.join(', ');\n    // Truncate if too long\n    if (joined.length > 100) {\n      return joined.substring(0, 97) + '...';\n    }\n    return joined;\n  };\n\n  // Helper function to format file names  \n  const formatFileName = (file) => {\n    if (!file) return 'Not uploaded';\n    const name = file.name || 'File uploaded';\n    // Truncate long file names\n    if (name.length > 50) {\n      const ext = name.split('.').pop();\n      const baseName = name.substring(0, 40);\n      return `${baseName}...${ext ? '.' + ext : ''}`;\n    }\n    return name;\n  };\n\n  // Get effective values with fallbacks and truncation\n  const getEffectiveValue = (primary, ...fallbacks) => {\n    let value = primary;\n    \n    if (!value || (typeof value === 'string' && !value.trim())) {\n      for (const fallback of fallbacks) {\n        if (fallback && (typeof fallback !== 'string' || fallback.trim())) {\n          value = fallback;\n          break;\n        }\n      }\n    }\n    \n    if (!value || (typeof value === 'string' && !value.trim())) {\n      return 'Not specified';\n    }\n    \n    // Truncate long text values\n    if (typeof value === 'string' && value.length > 150) {\n      return value.substring(0, 147) + '...';\n    }\n    \n    return value;\n  };\n\n  // Get data from API response or fallback to form data\n  const getDataValue = (apiPath, fallback = 'Not specified') => {\n    if (!onboardingData) return fallback;\n    \n    // Navigate through nested object path\n    const pathParts = apiPath.split('.');\n    let value = onboardingData;\n    \n    for (const part of pathParts) {\n      if (value && typeof value === 'object' && part in value) {\n        value = value[part];\n      } else {\n        return fallback;\n      }\n    }\n    \n    if (!value || (typeof value === 'string' && !value.trim())) {\n      return fallback;\n    }\n    \n    // Truncate long text values\n    if (typeof value === 'string' && value.length > 150) {\n      return value.substring(0, 147) + '...';\n    }\n    \n    return value;\n  };\n\n  const reviewSections = [\n    {\n      title: 'Personal Information',\n      items: [\n        { \n          label: 'Full Name', \n          value: onboardingData?.basic_info ? \n            `${onboardingData.basic_info.owner_name || ''}`.trim() || 'Not specified' :\n            `${formData.firstName || ''} ${formData.lastName || ''}`.trim() || 'Not specified'\n        },\n        { \n          label: 'Phone Number', \n          value: getDataValue('basic_info.contact_number', formData.phoneNumber || 'Not specified')\n        },\n        { \n          label: 'Email Address', \n          value: getDataValue('basic_info.email', formData.email || 'Not specified')\n        },\n      ]\n    },\n    {\n      title: 'GST Information',\n      items: [\n        { label: 'GST Number', value: getDataValue('gst_info.gst_number', formData.gstNumber || 'Not specified') },\n        { label: 'Business Name', value: getDataValue('gst_info.company_name', formData.gstBusinessName || 'Not specified') },\n        { label: 'Trade Name', value: getDataValue('gst_info.trade_name', formData.gstTradeName || 'Not specified') },\n        { label: 'Constitution', value: getDataValue('gst_info.constitution', formData.gstConstitution || 'Not specified') },\n        { label: 'Verification Status', value: getDataValue('gst_info.verification_status') ? 'âœ“ Verified' : 'â³ Pending Verification' },\n      ]\n    },\n    {\n      title: 'Business Information',\n      items: [\n        { label: 'Owner Name', value: getDataValue('basic_info.owner_name', formData.ownerName || 'Not specified') },\n        { label: 'Contact Number', value: getDataValue('basic_info.contact_number', formData.contactNumber || 'Not specified') },\n        { label: 'Business Email', value: getDataValue('basic_info.email', formData.businessEmail || 'Not specified') },\n        { label: 'Company Name', value: getDataValue('basic_info.company_name', formData.companyName || 'Not specified') },\n        { label: 'Company Type', value: getDataValue('basic_info.company_type', formData.companyType || 'Not specified') },\n        { label: 'Business Address', value: getDataValue('basic_info.address', formData.businessAddress || 'Not specified') },\n      ]\n    },\n    {\n      title: 'Business Preferences',\n      items: [\n        { \n          label: 'Business Preference', \n          value: (() => {\n            const pref = getDataValue('business_preference.preference', formData.business_preference);\n            if (pref === 'marketplace_only') return 'Marketplace Only';\n            if (pref === 'marketplace_and_api') return 'Marketplace & API';\n            return 'Not specified';\n          })()\n        },\n      ]\n    },\n    {\n      title: 'Warehouse Details',\n      items: [\n        { \n          label: 'Warehouse Locations', \n          value: (() => {\n            const warehouses = onboardingData?.warehouse_details?.city_warehouses;\n            if (warehouses && warehouses.length > 0) {\n              const formatted = warehouses.map(w => `${w.city_name} (${w.warehouse_count})`);\n              const joined = formatted.join(', ');\n              return joined.length > 120 ? joined.substring(0, 117) + '...' : joined;\n            }\n            return formData.city_warehouses && formData.city_warehouses.length > 0 \n              ? formData.city_warehouses.map(w => `${w.city_name} (${w.warehouse_count})`).join(', ')\n              : 'Not specified';\n          })()\n        },\n        { \n          label: 'Daily Order Volume', \n          value: (() => {\n            const volume = getDataValue('warehouse_details.daily_order_volume', formData.daily_order_volume);\n            return volume !== 'Not specified' ? `${volume} orders/day` : 'Not specified';\n          })()\n        },\n      ]\n    },\n    {\n      title: 'Brand & Product Details',\n      items: [\n        { label: 'Brand Logo', value: getDataValue('product_details.brand_logo') ? 'Uploaded' : 'Not uploaded' },\n        { \n          label: 'Product Categories', \n          value: (() => {\n            const categories = onboardingData?.product_details?.product_categories;\n            return formatArray(categories, formatArray(formData.product_categories));\n          })()\n        },\n        { \n          label: 'Target Gender', \n          value: (() => {\n            const genders = onboardingData?.product_details?.gender;\n            return formatArray(genders, formatArray(formData.gender));\n          })()\n        },\n        { \n          label: 'Target Age Range', \n          value: (() => {\n            const ageGroups = onboardingData?.product_details?.age_group_range;\n            if (ageGroups && ageGroups.length === 2) {\n              return `${ageGroups[0]} - ${ageGroups[1]} years`;\n            }\n            if (formData.target_age_groups && formData.target_age_groups.length === 2) {\n              return `${formData.target_age_groups[0]} - ${formData.target_age_groups[1]} years`;\n            }\n            return 'Not specified';\n          })()\n        },\n        { \n          label: 'Price Range', \n          value: (() => {\n            const priceRange = onboardingData?.product_details?.price_range;\n            if (priceRange && priceRange.length === 2 && priceRange[0] && priceRange[1]) {\n              return `â‚¹${priceRange[0]} - â‚¹${priceRange[1]}`;\n            }\n            if (formData.price_range && formData.price_range.length === 2 && formData.price_range[0] && formData.price_range[1]) {\n              return `â‚¹${formData.price_range[0]} - â‚¹${formData.price_range[1]}`;\n            }\n            return 'Not specified';\n          })()\n        },\n        { label: 'Total SKUs', value: getDataValue('product_details.total_skus', 'Not specified') },\n        { label: 'Average Order Value', value: (() => {\n            const aov = getDataValue('product_details.average_order_value', 0);\n            return aov > 0 ? `â‚¹${aov}` : 'Not specified';\n          })() \n        },\n      ]\n    },\n    {\n      title: 'Banking Details',\n      items: [\n        { label: 'Account Holder Name', value: getDataValue('bank_details.account_holder_name', formData.account_holder_name || 'Not specified') },\n        { label: 'Account Number', value: getDataValue('bank_details.account_number', formData.account_number || 'Not specified') },\n        { label: 'IFSC Code', value: getDataValue('bank_details.ifsc_code', formData.ifsc_code || 'Not specified') },\n        { label: 'Bank Reference ID', value: getDataValue('bank_details.bank_reference_id', 'Not assigned') },\n        { label: 'Cancelled Cheque', value: getDataValue('bank_details.cancelled_cheque_uploaded') ? 'Uploaded' : 'Not uploaded' },\n        { \n          label: 'Verification Status', \n          value: (() => {\n            const status = getDataValue('bank_details.bank_verification_status', false);\n            return status ? 'âœ“ Verified' : 'â³ Pending Verification';\n          })()\n        },\n      ]\n    },\n    {\n      title: 'Documents',\n      items: [\n        { label: 'Digital Signature', value: getDataValue('signature_info.signature_id') ? 'Uploaded' : 'Not uploaded' },\n        { label: 'TAN Number', value: getDataValue('signature_info.tan_number', 'Not specified') },\n      ]\n    },\n    {\n      title: 'Verification Status',\n      items: [\n        { label: 'Email Verified', value: getDataValue('verification_status.email_verified') ? 'âœ“ Verified' : 'â³ Pending' },\n        { label: 'Phone Verified', value: getDataValue('verification_status.phone_verified') ? 'âœ“ Verified' : 'â³ Pending' },\n        { label: 'GST Verified', value: getDataValue('verification_status.gst_verified') ? 'âœ“ Verified' : 'â³ Pending' },\n        { label: 'Bank Verified', value: getDataValue('verification_status.bank_verified') ? 'âœ“ Verified' : 'â³ Pending' },\n      ]\n    }\n  ];\n\n  // Show status component after successful submission\n  if (showStatus && submissionData) {\n    return (\n      <OnboardingStatusStep\n        submissionData={submissionData}\n        onGoToDashboard={() => {\n          // Navigate to dashboard\n          window.location.href = '/dashboard';\n        }}\n        onStartNewApplication={() => {\n          // Reset form and start new application\n          setShowStatus(false);\n          setSubmissionData(null);\n          window.location.href = '/register';\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900 mb-2\">\n          {isOnboardingComplete ? 'Your Onboarding Details' : stepData.title}\n        </h2>\n        <p className=\"text-gray-600 text-sm sm:text-base\">\n          {isOnboardingComplete \n            ? 'Review your submitted onboarding information. Your application has been successfully submitted and is under review.' \n            : stepData.subtitle\n          }\n        </p>\n      </div>\n\n      {/* Loading State */}\n      {isLoading && (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading your onboarding summary...</p>\n          </div>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && !isLoading && (\n        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg mb-6\">\n          <p className=\"text-sm text-red-600 break-words\">\n            {error}\n          </p>\n          <button\n            onClick={() => window.location.reload()}\n            className=\"mt-2 text-sm text-red-700 hover:text-red-900 underline\"\n          >\n            Try again\n          </button>\n        </div>\n      )}\n\n      {/* Main Content */}\n      {!isLoading && !error && (\n        <div className=\"space-y-6 sm:space-y-8\">\n          \n          {/* Review Sections */}\n          {reviewSections.map((section, sectionIndex) => (\n            <div key={sectionIndex} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 sm:p-6\">\n              <h3 className=\"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 pb-2 border-b border-gray-300\">\n                {section.title}\n              </h3>\n              <div className=\"grid grid-cols-1 gap-4\">\n                {section.items.map((item, itemIndex) => (\n                  <div key={itemIndex} className=\"flex flex-col\">\n                    <dt className=\"text-sm font-medium text-gray-600 mb-1\">\n                      {item.label}\n                    </dt>\n                    <dd className=\"text-sm text-gray-900 bg-white px-3 py-2 rounded border border-gray-200 min-h-[2.5rem] flex items-start break-words overflow-hidden\">\n                      <span className=\"w-full overflow-hidden text-ellipsis\">\n                        {item.value}\n                      </span>\n                    </dd>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n\n          {/* Terms and Conditions - Only show when onboarding is not complete */}\n          {!isOnboardingComplete && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6\">\n              <h3 className=\"text-base sm:text-lg font-semibold text-blue-900 mb-4\">\n                Terms & Conditions\n              </h3>\n              \n              <div className=\"space-y-4\">\n                {/* Terms & Conditions Checkbox */}\n                <div className=\"flex items-start space-x-3\">\n                  <input\n                    id=\"terms\"\n                    type=\"checkbox\"\n                    checked={termsAccepted}\n                    onChange={handleTermsChange}\n                    className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1 flex-shrink-0\"\n                  />\n                  <label htmlFor=\"terms\" className=\"text-xs sm:text-sm text-gray-700 cursor-pointer leading-relaxed\">\n                    I have read and agree to the{' '}\n                    <a href=\"#\" className=\"text-blue-600 hover:text-blue-800 underline\">\n                      Terms & Conditions\n                    </a>{' '}\n                    of the marketplace. I understand the terms of service, fees, and policies governing my participation as a brand partner.\n                  </label>\n                </div>\n\n                {/* Privacy Policy Checkbox */}\n                <div className=\"flex items-start space-x-3\">\n                  <input\n                    id=\"privacy\"\n                    type=\"checkbox\"\n                    checked={privacyAccepted}\n                    onChange={handlePrivacyChange}\n                    className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1 flex-shrink-0\"\n                  />\n                  <label htmlFor=\"privacy\" className=\"text-xs sm:text-sm text-gray-700 cursor-pointer leading-relaxed\">\n                    I acknowledge that I have read and understood the{' '}\n                    <a href=\"#\" className=\"text-blue-600 hover:text-blue-800 underline\">\n                      Privacy Policy\n                    </a>{' '}\n                    and consent to the collection, processing, and storage of my personal and business data as described.\n                  </label>\n                </div>\n              </div>\n\n              {/* Additional Information */}\n              <div className=\"mt-6 p-3 sm:p-4 bg-white border border-blue-200 rounded-md\">\n                <h4 className=\"font-medium text-blue-900 mb-2 text-sm sm:text-base\">Important Information:</h4>\n                <ul className=\"text-xs sm:text-sm text-blue-800 space-y-1 leading-relaxed\">\n                  <li>â€¢ Your application will be reviewed within 2-3 business days</li>\n                  <li>â€¢ You will receive email notifications about your application status</li>\n                  <li>â€¢ Additional documentation may be requested during the review process</li>\n                  <li>â€¢ Once approved, you can start listing your products on the marketplace</li>\n                </ul>\n              </div>\n            </div>\n          )}\n\n          {/* Completion Status - Show when onboarding is complete */}\n          {isOnboardingComplete && (\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6\">\n              <h3 className=\"text-base sm:text-lg font-semibold text-green-900 mb-4\">\n                âœ… Application Status\n              </h3>\n              <div className=\"space-y-3\">\n                <p className=\"text-sm text-green-800\">\n                  <strong>Status:</strong> Your onboarding application has been successfully submitted and is currently under review.\n                </p>\n                <p className=\"text-sm text-green-800\">\n                  <strong>Submitted:</strong> All required information and documents have been provided.\n                </p>\n                <p className=\"text-sm text-green-800\">\n                  <strong>Next Steps:</strong> Our team will review your application within 2-3 business days. You will receive email notifications about any status updates.\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Error Message */}\n          {error && (\n            <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-sm text-red-600 break-words\">\n                {error}\n              </p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Navigation Buttons - Different based on onboarding status */}\n      {!isOnboardingComplete ? (\n        // Show submission form when onboarding is not complete\n        <form className={REGISTRATION_STYLES.form} onSubmit={handleSubmit}>\n          <div className={`${REGISTRATION_STYLES.buttonGroup} mt-6 sm:mt-8`}>\n            <button\n              type=\"button\"\n              onClick={onBack}\n              className={`${REGISTRATION_STYLES.backButton} text-sm sm:text-base px-4 py-2`}\n            >\n              {stepData.buttons.back}\n            </button>\n            <button\n              type=\"submit\"\n              disabled={!termsAccepted || !privacyAccepted || isLoading || isSubmitting}\n              className={`${REGISTRATION_STYLES.submitButton} ${\n                !termsAccepted || !privacyAccepted || isLoading || isSubmitting\n                  ? 'opacity-50 cursor-not-allowed' \n                  : 'bg-green-600 hover:bg-green-700'\n              } text-sm sm:text-base px-4 py-2 flex items-center justify-center`}\n            >\n              {isSubmitting ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Submitting...\n                </>\n              ) : (\n                stepData.buttons.submit\n              )}\n            </button>\n          </div>\n        </form>\n      ) : (\n        // Show dashboard navigation when onboarding is complete\n        <div className={`${REGISTRATION_STYLES.buttonGroup} mt-6 sm:mt-8`}>\n          <button\n            type=\"button\"\n            onClick={() => window.location.href = '/signup?step=1'}\n            className={`${REGISTRATION_STYLES.backButton} text-sm sm:text-base px-4 py-2`}\n          >\n            Start New Application\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => window.location.href = '/dashboard'}\n            className={`${REGISTRATION_STYLES.submitButton} bg-blue-600 hover:bg-blue-700 text-sm sm:text-base px-4 py-2 flex items-center justify-center`}\n          >\n            Go to Dashboard\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;AACA;;;;;;AAEe,SAAS,iBAAiB,EAAE,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE;IACnF,MAAM,WAAW,yHAAA,CAAA,mBAAgB,CAAC,EAAE;IACpC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjE,MAAM,EAAE,YAAY,EAAE,UAAU,YAAY,EAAE,kBAAkB,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IAEzF,yCAAyC;IACzC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,yBAAyB;YAC7B,IAAI;gBACF,aAAa;gBAEb,+CAA+C;gBAC/C,MAAM,QAAQ;gBACd,IAAI,CAAC,OAAO;oBACV,SAAS;oBACT,aAAa;oBACb;gBACF;gBAEA,QAAQ,GAAG,CAAC;gBAEZ,uDAAuD;gBACvD,MAAM,WAAW,MAAM,mBAAmB,2DAA2D;oBACnG,QAAQ;gBACV;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,QAAQ,GAAG,CAAC,oCAAoC;oBAAE,QAAQ,SAAS,MAAM;oBAAE;gBAAK;gBAEhF,IAAI,SAAS,EAAE,IAAI,KAAK,OAAO,EAAE;oBAC/B,QAAQ,GAAG,CAAC,4CAA4C;oBACxD,kBAAkB,KAAK,IAAI;oBAC3B,SAAS;oBAET,oEAAoE;oBACpE,MAAM,aAAa,cAAc,wBAAwB,KAAK,IAAI,EAAE,0BAA0B;oBAC9F,wBAAwB;oBAExB,qDAAqD;oBACrD,IAAI,YAAY;wBACd,cAAc;wBACd,kBAAkB,OAAO,0CAA0C;oBACrE;gBACF,OAAO;oBACL,oBAAoB;oBACpB,IAAI,SAAS,MAAM,KAAK,KAAK;wBAC3B,SAAS;oBACX,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;wBAClC,SAAS;oBACX,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;wBAClC,SAAS;oBACX,OAAO;wBACL,SAAS,KAAK,OAAO,IAAI,KAAK,MAAM,IAAI;oBAC1C;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;gBACpD,SAAS;YACX,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,CAAC,eAAe;YAClB,SAAS;YACT;QACF;QAEA,IAAI,CAAC,iBAAiB;YACpB,SAAS;YACT;QACF;QAEA,IAAI;YACF,gBAAgB;YAEhB,+CAA+C;YAC/C,MAAM,QAAQ;YACd,IAAI,CAAC,OAAO;gBACV,SAAS;gBACT;YACF;YAEA,QAAQ,GAAG,CAAC;YAEZ,0BAA0B;YAC1B,MAAM,iBAAiB;gBACrB,gBAAgB;gBAChB,yBAAyB;YAC3B;YAEA,QAAQ,GAAG,CAAC,0BAA0B;YAEtC,uDAAuD;YACvD,MAAM,WAAW,MAAM,mBAAmB,yDAAyD;gBACjG,QAAQ;gBACR,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,kCAAkC;gBAAE,QAAQ,SAAS,MAAM;gBAAE;YAAK;YAE9E,IAAI,SAAS,EAAE,IAAI,KAAK,OAAO,EAAE;gBAC/B,QAAQ,GAAG,CAAC,gCAAgC;gBAC5C,SAAS;gBAET,kDAAkD;gBAClD,kBAAkB;gBAClB,cAAc;YAChB,OAAO;gBACL,oBAAoB;gBACpB,IAAI,SAAS,MAAM,KAAK,KAAK;oBAC3B,SAAS,KAAK,OAAO,IAAI,KAAK,MAAM,IAAI;gBAC1C,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;oBAClC,SAAS;gBACX,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;oBAClC,SAAS;gBACX,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;oBAClC,SAAS;gBACX,OAAO,IAAI,SAAS,MAAM,KAAK,KAAK;oBAClC,SAAS;gBACX,OAAO;oBACL,SAAS,KAAK,OAAO,IAAI,KAAK,MAAM,IAAI;gBAC1C;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uCAAuC;YACrD,SAAS;QACX,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,oBAAoB,CAAC;QACzB,iBAAiB,EAAE,MAAM,CAAC,OAAO;QACjC,IAAI,OAAO,SAAS;IACtB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,mBAAmB,EAAE,MAAM,CAAC,OAAO;QACnC,IAAI,OAAO,SAAS;IACtB;IAEA,+CAA+C;IAC/C,MAAM,cAAc,CAAC,KAAK,WAAW,eAAe;QAClD,IAAI,CAAC,OAAO,IAAI,MAAM,KAAK,GAAG,OAAO;QACrC,MAAM,SAAS,IAAI,IAAI,CAAC;QACxB,uBAAuB;QACvB,IAAI,OAAO,MAAM,GAAG,KAAK;YACvB,OAAO,OAAO,SAAS,CAAC,GAAG,MAAM;QACnC;QACA,OAAO;IACT;IAEA,yCAAyC;IACzC,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,OAAO,KAAK,IAAI,IAAI;QAC1B,2BAA2B;QAC3B,IAAI,KAAK,MAAM,GAAG,IAAI;YACpB,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG;YAC/B,MAAM,WAAW,KAAK,SAAS,CAAC,GAAG;YACnC,OAAO,GAAG,SAAS,GAAG,EAAE,MAAM,MAAM,MAAM,IAAI;QAChD;QACA,OAAO;IACT;IAEA,qDAAqD;IACrD,MAAM,oBAAoB,CAAC,SAAS,GAAG;QACrC,IAAI,QAAQ;QAEZ,IAAI,CAAC,SAAU,OAAO,UAAU,YAAY,CAAC,MAAM,IAAI,IAAK;YAC1D,KAAK,MAAM,YAAY,UAAW;gBAChC,IAAI,YAAY,CAAC,OAAO,aAAa,YAAY,SAAS,IAAI,EAAE,GAAG;oBACjE,QAAQ;oBACR;gBACF;YACF;QACF;QAEA,IAAI,CAAC,SAAU,OAAO,UAAU,YAAY,CAAC,MAAM,IAAI,IAAK;YAC1D,OAAO;QACT;QAEA,4BAA4B;QAC5B,IAAI,OAAO,UAAU,YAAY,MAAM,MAAM,GAAG,KAAK;YACnD,OAAO,MAAM,SAAS,CAAC,GAAG,OAAO;QACnC;QAEA,OAAO;IACT;IAEA,sDAAsD;IACtD,MAAM,eAAe,CAAC,SAAS,WAAW,eAAe;QACvD,IAAI,CAAC,gBAAgB,OAAO;QAE5B,sCAAsC;QACtC,MAAM,YAAY,QAAQ,KAAK,CAAC;QAChC,IAAI,QAAQ;QAEZ,KAAK,MAAM,QAAQ,UAAW;YAC5B,IAAI,SAAS,OAAO,UAAU,YAAY,QAAQ,OAAO;gBACvD,QAAQ,KAAK,CAAC,KAAK;YACrB,OAAO;gBACL,OAAO;YACT;QACF;QAEA,IAAI,CAAC,SAAU,OAAO,UAAU,YAAY,CAAC,MAAM,IAAI,IAAK;YAC1D,OAAO;QACT;QAEA,4BAA4B;QAC5B,IAAI,OAAO,UAAU,YAAY,MAAM,MAAM,GAAG,KAAK;YACnD,OAAO,MAAM,SAAS,CAAC,GAAG,OAAO;QACnC;QAEA,OAAO;IACT;IAEA,MAAM,iBAAiB;QACrB;YACE,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,gBAAgB,aACrB,GAAG,eAAe,UAAU,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,MAAM,kBAC1D,GAAG,SAAS,SAAS,IAAI,GAAG,CAAC,EAAE,SAAS,QAAQ,IAAI,IAAI,CAAC,IAAI,MAAM;gBACvE;gBACA;oBACE,OAAO;oBACP,OAAO,aAAa,6BAA6B,SAAS,WAAW,IAAI;gBAC3E;gBACA;oBACE,OAAO;oBACP,OAAO,aAAa,oBAAoB,SAAS,KAAK,IAAI;gBAC5D;aACD;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBAAE,OAAO;oBAAc,OAAO,aAAa,uBAAuB,SAAS,SAAS,IAAI;gBAAiB;gBACzG;oBAAE,OAAO;oBAAiB,OAAO,aAAa,yBAAyB,SAAS,eAAe,IAAI;gBAAiB;gBACpH;oBAAE,OAAO;oBAAc,OAAO,aAAa,uBAAuB,SAAS,YAAY,IAAI;gBAAiB;gBAC5G;oBAAE,OAAO;oBAAgB,OAAO,aAAa,yBAAyB,SAAS,eAAe,IAAI;gBAAiB;gBACnH;oBAAE,OAAO;oBAAuB,OAAO,aAAa,kCAAkC,eAAe;gBAAyB;aAC/H;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBAAE,OAAO;oBAAc,OAAO,aAAa,yBAAyB,SAAS,SAAS,IAAI;gBAAiB;gBAC3G;oBAAE,OAAO;oBAAkB,OAAO,aAAa,6BAA6B,SAAS,aAAa,IAAI;gBAAiB;gBACvH;oBAAE,OAAO;oBAAkB,OAAO,aAAa,oBAAoB,SAAS,aAAa,IAAI;gBAAiB;gBAC9G;oBAAE,OAAO;oBAAgB,OAAO,aAAa,2BAA2B,SAAS,WAAW,IAAI;gBAAiB;gBACjH;oBAAE,OAAO;oBAAgB,OAAO,aAAa,2BAA2B,SAAS,WAAW,IAAI;gBAAiB;gBACjH;oBAAE,OAAO;oBAAoB,OAAO,aAAa,sBAAsB,SAAS,eAAe,IAAI;gBAAiB;aACrH;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,OAAO,aAAa,kCAAkC,SAAS,mBAAmB;wBACxF,IAAI,SAAS,oBAAoB,OAAO;wBACxC,IAAI,SAAS,uBAAuB,OAAO;wBAC3C,OAAO;oBACT,CAAC;gBACH;aACD;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,aAAa,gBAAgB,mBAAmB;wBACtD,IAAI,cAAc,WAAW,MAAM,GAAG,GAAG;4BACvC,MAAM,YAAY,WAAW,GAAG,CAAC,CAAA,IAAK,GAAG,EAAE,SAAS,CAAC,EAAE,EAAE,EAAE,eAAe,CAAC,CAAC,CAAC;4BAC7E,MAAM,SAAS,UAAU,IAAI,CAAC;4BAC9B,OAAO,OAAO,MAAM,GAAG,MAAM,OAAO,SAAS,CAAC,GAAG,OAAO,QAAQ;wBAClE;wBACA,OAAO,SAAS,eAAe,IAAI,SAAS,eAAe,CAAC,MAAM,GAAG,IACjE,SAAS,eAAe,CAAC,GAAG,CAAC,CAAA,IAAK,GAAG,EAAE,SAAS,CAAC,EAAE,EAAE,EAAE,eAAe,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAChF;oBACN,CAAC;gBACH;gBACA;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,SAAS,aAAa,wCAAwC,SAAS,kBAAkB;wBAC/F,OAAO,WAAW,kBAAkB,GAAG,OAAO,WAAW,CAAC,GAAG;oBAC/D,CAAC;gBACH;aACD;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBAAE,OAAO;oBAAc,OAAO,aAAa,gCAAgC,aAAa;gBAAe;gBACvG;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,aAAa,gBAAgB,iBAAiB;wBACpD,OAAO,YAAY,YAAY,YAAY,SAAS,kBAAkB;oBACxE,CAAC;gBACH;gBACA;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,UAAU,gBAAgB,iBAAiB;wBACjD,OAAO,YAAY,SAAS,YAAY,SAAS,MAAM;oBACzD,CAAC;gBACH;gBACA;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,YAAY,gBAAgB,iBAAiB;wBACnD,IAAI,aAAa,UAAU,MAAM,KAAK,GAAG;4BACvC,OAAO,GAAG,SAAS,CAAC,EAAE,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE,CAAC,MAAM,CAAC;wBAClD;wBACA,IAAI,SAAS,iBAAiB,IAAI,SAAS,iBAAiB,CAAC,MAAM,KAAK,GAAG;4BACzE,OAAO,GAAG,SAAS,iBAAiB,CAAC,EAAE,CAAC,GAAG,EAAE,SAAS,iBAAiB,CAAC,EAAE,CAAC,MAAM,CAAC;wBACpF;wBACA,OAAO;oBACT,CAAC;gBACH;gBACA;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,aAAa,gBAAgB,iBAAiB;wBACpD,IAAI,cAAc,WAAW,MAAM,KAAK,KAAK,UAAU,CAAC,EAAE,IAAI,UAAU,CAAC,EAAE,EAAE;4BAC3E,OAAO,CAAC,CAAC,EAAE,UAAU,CAAC,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC,EAAE,EAAE;wBAChD;wBACA,IAAI,SAAS,WAAW,IAAI,SAAS,WAAW,CAAC,MAAM,KAAK,KAAK,SAAS,WAAW,CAAC,EAAE,IAAI,SAAS,WAAW,CAAC,EAAE,EAAE;4BACnH,OAAO,CAAC,CAAC,EAAE,SAAS,WAAW,CAAC,EAAE,CAAC,IAAI,EAAE,SAAS,WAAW,CAAC,EAAE,EAAE;wBACpE;wBACA,OAAO;oBACT,CAAC;gBACH;gBACA;oBAAE,OAAO;oBAAc,OAAO,aAAa,8BAA8B;gBAAiB;gBAC1F;oBAAE,OAAO;oBAAuB,OAAO,CAAC;wBACpC,MAAM,MAAM,aAAa,uCAAuC;wBAChE,OAAO,MAAM,IAAI,CAAC,CAAC,EAAE,KAAK,GAAG;oBAC/B,CAAC;gBACH;aACD;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBAAE,OAAO;oBAAuB,OAAO,aAAa,oCAAoC,SAAS,mBAAmB,IAAI;gBAAiB;gBACzI;oBAAE,OAAO;oBAAkB,OAAO,aAAa,+BAA+B,SAAS,cAAc,IAAI;gBAAiB;gBAC1H;oBAAE,OAAO;oBAAa,OAAO,aAAa,0BAA0B,SAAS,SAAS,IAAI;gBAAiB;gBAC3G;oBAAE,OAAO;oBAAqB,OAAO,aAAa,kCAAkC;gBAAgB;gBACpG;oBAAE,OAAO;oBAAoB,OAAO,aAAa,4CAA4C,aAAa;gBAAe;gBACzH;oBACE,OAAO;oBACP,OAAO,CAAC;wBACN,MAAM,SAAS,aAAa,yCAAyC;wBACrE,OAAO,SAAS,eAAe;oBACjC,CAAC;gBACH;aACD;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBAAE,OAAO;oBAAqB,OAAO,aAAa,iCAAiC,aAAa;gBAAe;gBAC/G;oBAAE,OAAO;oBAAc,OAAO,aAAa,6BAA6B;gBAAiB;aAC1F;QACH;QACA;YACE,OAAO;YACP,OAAO;gBACL;oBAAE,OAAO;oBAAkB,OAAO,aAAa,wCAAwC,eAAe;gBAAY;gBAClH;oBAAE,OAAO;oBAAkB,OAAO,aAAa,wCAAwC,eAAe;gBAAY;gBAClH;oBAAE,OAAO;oBAAgB,OAAO,aAAa,sCAAsC,eAAe;gBAAY;gBAC9G;oBAAE,OAAO;oBAAiB,OAAO,aAAa,uCAAuC,eAAe;gBAAY;aACjH;QACH;KACD;IAED,oDAAoD;IACpD,IAAI,cAAc,gBAAgB;QAChC,qBACE,8OAAC,wJAAA,CAAA,UAAoB;YACnB,gBAAgB;YAChB,iBAAiB;gBACf,wBAAwB;gBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;YACA,uBAAuB;gBACrB,uCAAuC;gBACvC,cAAc;gBACd,kBAAkB;gBAClB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB;;;;;;IAGN;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX,uBAAuB,4BAA4B,SAAS,KAAK;;;;;;kCAEpE,8OAAC;wBAAE,WAAU;kCACV,uBACG,wHACA,SAAS,QAAQ;;;;;;;;;;;;YAMxB,2BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;;;;;;;YAMlC,SAAS,CAAC,2BACT,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCACV;;;;;;kCAEH,8OAAC;wBACC,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;wBACrC,WAAU;kCACX;;;;;;;;;;;;YAOJ,CAAC,aAAa,CAAC,uBACd,8OAAC;gBAAI,WAAU;;oBAGZ,eAAe,GAAG,CAAC,CAAC,SAAS,6BAC5B,8OAAC;4BAAuB,WAAU;;8CAChC,8OAAC;oCAAG,WAAU;8CACX,QAAQ,KAAK;;;;;;8CAEhB,8OAAC;oCAAI,WAAU;8CACZ,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,0BACxB,8OAAC;4CAAoB,WAAU;;8DAC7B,8OAAC;oDAAG,WAAU;8DACX,KAAK,KAAK;;;;;;8DAEb,8OAAC;oDAAG,WAAU;8DACZ,cAAA,8OAAC;wDAAK,WAAU;kEACb,KAAK,KAAK;;;;;;;;;;;;2CANP;;;;;;;;;;;2BANN;;;;;oBAsBX,CAAC,sCACA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAwD;;;;;;0CAItE,8OAAC;gCAAI,WAAU;;kDAEb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,SAAS;gDACT,UAAU;gDACV,WAAU;;;;;;0DAEZ,8OAAC;gDAAM,SAAQ;gDAAQ,WAAU;;oDAAkE;oDACpE;kEAC7B,8OAAC;wDAAE,MAAK;wDAAI,WAAU;kEAA8C;;;;;;oDAE/D;oDAAI;;;;;;;;;;;;;kDAMb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,IAAG;gDACH,MAAK;gDACL,SAAS;gDACT,UAAU;gDACV,WAAU;;;;;;0DAEZ,8OAAC;gDAAM,SAAQ;gDAAU,WAAU;;oDAAkE;oDACjD;kEAClD,8OAAC;wDAAE,MAAK;wDAAI,WAAU;kEAA8C;;;;;;oDAE/D;oDAAI;;;;;;;;;;;;;;;;;;;0CAOf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAG,WAAU;kDAAsD;;;;;;kDACpE,8OAAC;wCAAG,WAAU;;0DACZ,8OAAC;0DAAG;;;;;;0DACJ,8OAAC;0DAAG;;;;;;0DACJ,8OAAC;0DAAG;;;;;;0DACJ,8OAAC;0DAAG;;;;;;;;;;;;;;;;;;;;;;;;oBAOX,sCACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAyD;;;;;;0CAGvE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;;0DACX,8OAAC;0DAAO;;;;;;4CAAgB;;;;;;;kDAE1B,8OAAC;wCAAE,WAAU;;0DACX,8OAAC;0DAAO;;;;;;4CAAmB;;;;;;;kDAE7B,8OAAC;wCAAE,WAAU;;0DACX,8OAAC;0DAAO;;;;;;4CAAoB;;;;;;;;;;;;;;;;;;;oBAOnC,uBACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCACV;;;;;;;;;;;;;;;;;YAQV,CAAC,uBACA,uDAAuD;0BACvD,8OAAC;gBAAK,WAAW,yHAAA,CAAA,sBAAmB,CAAC,IAAI;gBAAE,UAAU;0BACnD,cAAA,8OAAC;oBAAI,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,WAAW,CAAC,aAAa,CAAC;;sCAC/D,8OAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,UAAU,CAAC,+BAA+B,CAAC;sCAE5E,SAAS,OAAO,CAAC,IAAI;;;;;;sCAExB,8OAAC;4BACC,MAAK;4BACL,UAAU,CAAC,iBAAiB,CAAC,mBAAmB,aAAa;4BAC7D,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,YAAY,CAAC,CAAC,EAC9C,CAAC,iBAAiB,CAAC,mBAAmB,aAAa,eAC/C,kCACA,kCACL,gEAAgE,CAAC;sCAEjE,6BACC;;kDACE,8OAAC;wCAAI,WAAU;;;;;;oCAAuE;;+CAIxF,SAAS,OAAO,CAAC,MAAM;;;;;;;;;;;;;;;;uBAM/B,wDAAwD;0BACxD,8OAAC;gBAAI,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,WAAW,CAAC,aAAa,CAAC;;kCAC/D,8OAAC;wBACC,MAAK;wBACL,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;wBACtC,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,UAAU,CAAC,+BAA+B,CAAC;kCAC9E;;;;;;kCAGD,8OAAC;wBACC,MAAK;wBACL,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;wBACtC,WAAW,GAAG,yHAAA,CAAA,sBAAmB,CAAC,YAAY,CAAC,8FAA8F,CAAC;kCAC/I;;;;;;;;;;;;;;;;;;AAOX","debugId":null}},
    {"offset": {"line": 8087, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/onboarding/OnboardingSidebar.jsx"],"sourcesContent":["import { ONBOARDING_STEPS } from '../../utils/constants';\n\nexport default function OnboardingSidebar({ currentStep = 1 }) {\n  const steps = [\n    { number: 1, title: 'GSTIN Check', icon: 'ðŸ¢' },\n    { number: 2, title: 'Basic Information', icon: 'ðŸ“‹' },\n    { number: 3, title: 'Signature Upload', icon: 'âœï¸' },\n    { number: 4, title: 'Business Preferences', icon: 'âš™ï¸' },\n    { number: 5, title: 'Brand Details', icon: 'ðŸ›ï¸' },\n    { number: 6, title: 'Warehouse Details', icon: 'ðŸª' },\n    { number: 7, title: 'Bank Details', icon: 'ðŸ¦' },\n    { number: 8, title: 'Declaration', icon: 'âœ…' },\n  ];\n\n  const completedSteps = steps.filter(step => step.number < currentStep).length;\n  const progressPercentage = Math.round((completedSteps / steps.length) * 100);\n\n  return (\n    <div className=\"fixed left-0 top-16 h-[calc(100vh-4rem)] w-80 bg-white/95 backdrop-blur-md border-r-2 border-[#241331]/20 shadow-xl z-40 overflow-y-auto\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-[#241331]/20 bg-gradient-to-r from-[#241331]/5 to-[#C3AF6C]/5\">\n        <div className=\"flex items-center mb-3\">\n          <div className=\"w-8 h-8 bg-[#241331] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3 font-itc-gothic\">\n            F\n          </div>\n          <h2 className=\"text-lg font-bold text-[#241331] font-itc-gothic\">Brand Registration</h2>\n        </div>\n        <p className=\"text-sm text-[#241331]/70 font-itc-gothic\">Brand Onboarding Process</p>\n      </div>\n\n      {/* Progress Section */}\n      <div className=\"p-6 bg-[#C3AF6C]/5 border-b border-[#241331]/20\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm font-medium text-[#241331] font-itc-gothic\">Completion Progress</span>\n          <span className=\"text-sm font-bold text-[#C3AF6C] font-itc-gothic\">{progressPercentage}% Complete</span>\n        </div>\n        <div className=\"w-full bg-[#241331]/10 rounded-full h-3\">\n          <div \n            className=\"bg-gradient-to-r from-[#241331] to-[#C3AF6C] h-3 rounded-full transition-all duration-500 shadow-lg\" \n            style={{ width: `${(currentStep / 8) * 100}%` }}\n          ></div>\n        </div>\n      </div>\n\n      {/* Steps List */}\n      <div className=\"p-4\">\n        <div className=\"space-y-2\">\n          {steps.map((step) => {\n            const isActive = step.number === currentStep;\n            const isCompleted = step.number < currentStep;\n            const isAccessible = step.number <= currentStep;\n\n            return (\n              <div \n                key={step.number}\n                className={`flex items-center p-3 rounded-lg border transition-all duration-200 ${\n                  isActive \n                    ? 'bg-[#C3AF6C]/10 border-[#C3AF6C] shadow-lg' \n                    : isCompleted\n                    ? 'bg-[#241331]/5 border-[#241331]/30'\n                    : isAccessible\n                    ? 'bg-white border-[#241331]/20 hover:bg-[#241331]/5'\n                    : 'bg-gray-50 border-gray-200'\n                }`}\n              >\n                {/* Step Icon/Number */}\n                <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold mr-3 font-itc-gothic ${\n                  isCompleted\n                    ? 'bg-[#241331] text-white'\n                    : isActive\n                    ? 'bg-[#C3AF6C] text-white'\n                    : isAccessible\n                    ? 'bg-[#241331]/20 text-[#241331]'\n                    : 'bg-gray-100 text-gray-400'\n                }`}>\n                  {isCompleted ? 'âœ“' : step.number}\n                </div>\n\n                {/* Step Details */}\n                <div className=\"flex-1 min-w-0\">\n                  <p className={`text-sm font-bold truncate font-itc-gothic ${\n                    isActive \n                      ? 'text-[#C3AF6C]' \n                      : isCompleted\n                      ? 'text-[#241331]'\n                      : isAccessible\n                      ? 'text-[#241331]'\n                      : 'text-gray-400'\n                  }`}>\n                    {step.title}\n                  </p>\n                  {isActive && (\n                    <p className=\"text-xs text-[#C3AF6C] mt-1 font-itc-gothic font-medium\">Current Step</p>\n                  )}\n                  {isCompleted && (\n                    <p className=\"text-xs text-[#241331] mt-1 font-itc-gothic font-medium\">Completed</p>\n                  )}\n                </div>\n\n                {/* Status Icon */}\n                <span className=\"text-lg ml-2\">{step.icon}</span>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Help Section */}\n      <div className=\"p-4 border-t border-[#241331]/20 bg-gradient-to-r from-[#C3AF6C]/5 to-[#241331]/5\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 bg-[#C3AF6C]/20 rounded-full flex items-center justify-center mx-auto mb-3\">\n            <span className=\"text-[#C3AF6C] text-xl\">ðŸ’¡</span>\n          </div>\n          <h3 className=\"text-sm font-bold text-[#241331] mb-2 font-itc-gothic\">Need Help?</h3>\n          <p className=\"text-xs text-[#241331]/70 mb-3 font-itc-gothic\">\n            Our support team is here to assist you with the onboarding process.\n          </p>\n          <button className=\"w-full px-3 py-2 bg-[#241331] text-white text-xs font-bold rounded-lg hover:bg-[#1a0e24] transition-all duration-200 shadow-lg hover:shadow-xl font-itc-gothic\">\n            Contact Support\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS,kBAAkB,EAAE,cAAc,CAAC,EAAE;IAC3D,MAAM,QAAQ;QACZ;YAAE,QAAQ;YAAG,OAAO;YAAe,MAAM;QAAK;QAC9C;YAAE,QAAQ;YAAG,OAAO;YAAqB,MAAM;QAAK;QACpD;YAAE,QAAQ;YAAG,OAAO;YAAoB,MAAM;QAAK;QACnD;YAAE,QAAQ;YAAG,OAAO;YAAwB,MAAM;QAAK;QACvD;YAAE,QAAQ;YAAG,OAAO;YAAiB,MAAM;QAAM;QACjD;YAAE,QAAQ;YAAG,OAAO;YAAqB,MAAM;QAAK;QACpD;YAAE,QAAQ;YAAG,OAAO;YAAgB,MAAM;QAAK;QAC/C;YAAE,QAAQ;YAAG,OAAO;YAAe,MAAM;QAAI;KAC9C;IAED,MAAM,iBAAiB,MAAM,MAAM,CAAC,CAAA,OAAQ,KAAK,MAAM,GAAG,aAAa,MAAM;IAC7E,MAAM,qBAAqB,KAAK,KAAK,CAAC,AAAC,iBAAiB,MAAM,MAAM,GAAI;IAExE,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CAAuH;;;;;;0CAGtI,8OAAC;gCAAG,WAAU;0CAAmD;;;;;;;;;;;;kCAEnE,8OAAC;wBAAE,WAAU;kCAA4C;;;;;;;;;;;;0BAI3D,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CAAqD;;;;;;0CACrE,8OAAC;gCAAK,WAAU;;oCAAoD;oCAAmB;;;;;;;;;;;;;kCAEzF,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,AAAC,cAAc,IAAK,IAAI,CAAC,CAAC;4BAAC;;;;;;;;;;;;;;;;;0BAMpD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACZ,MAAM,GAAG,CAAC,CAAC;wBACV,MAAM,WAAW,KAAK,MAAM,KAAK;wBACjC,MAAM,cAAc,KAAK,MAAM,GAAG;wBAClC,MAAM,eAAe,KAAK,MAAM,IAAI;wBAEpC,qBACE,8OAAC;4BAEC,WAAW,CAAC,oEAAoE,EAC9E,WACI,+CACA,cACA,uCACA,eACA,sDACA,8BACJ;;8CAGF,8OAAC;oCAAI,WAAW,CAAC,2GAA2G,EAC1H,cACI,4BACA,WACA,4BACA,eACA,mCACA,6BACJ;8CACC,cAAc,MAAM,KAAK,MAAM;;;;;;8CAIlC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAW,CAAC,2CAA2C,EACxD,WACI,mBACA,cACA,mBACA,eACA,mBACA,iBACJ;sDACC,KAAK,KAAK;;;;;;wCAEZ,0BACC,8OAAC;4CAAE,WAAU;sDAA0D;;;;;;wCAExE,6BACC,8OAAC;4CAAE,WAAU;sDAA0D;;;;;;;;;;;;8CAK3E,8OAAC;oCAAK,WAAU;8CAAgB,KAAK,IAAI;;;;;;;2BA9CpC,KAAK,MAAM;;;;;oBAiDtB;;;;;;;;;;;0BAKJ,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAK,WAAU;0CAAyB;;;;;;;;;;;sCAE3C,8OAAC;4BAAG,WAAU;sCAAwD;;;;;;sCACtE,8OAAC;4BAAE,WAAU;sCAAiD;;;;;;sCAG9D,8OAAC;4BAAO,WAAU;sCAAiK;;;;;;;;;;;;;;;;;;;;;;;AAO7L","debugId":null}},
    {"offset": {"line": 8381, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/debug/AuthDiagnostic.jsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function AuthDiagnostic() {\n  const [diagnosis, setDiagnosis] = useState(null);\n  const [isRunning, setIsRunning] = useState(false);\n  const { diagnoseAuthIssue, handleAuthError, getAuthToken, logout } = useAuth();\n\n  const runDiagnosis = async () => {\n    setIsRunning(true);\n    try {\n      const result = await diagnoseAuthIssue();\n      setDiagnosis(result);\n    } catch (error) {\n      setDiagnosis({ issue: 'ERROR', error: error.message });\n    } finally {\n      setIsRunning(false);\n    }\n  };\n\n  const forceLogout = () => {\n    logout();\n    window.location.href = '/login';\n  };\n\n  const token = getAuthToken();\n\n  return (\n    <div className=\"fixed top-4 right-4 bg-white border border-gray-300 rounded-lg shadow-lg p-4 max-w-md z-50\">\n      <div className=\"mb-4\">\n        <h3 className=\"text-lg font-bold text-gray-800 mb-2\">ðŸ” Auth Diagnostic</h3>\n        \n        <div className=\"space-y-2 text-sm\">\n          <div>\n            <strong>Token Status:</strong> {token ? 'âœ… Present' : 'âŒ Missing'}\n          </div>\n          {token && (\n            <div className=\"text-xs font-mono bg-gray-100 p-2 rounded\">\n              {token.substring(0, 30)}...\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        <button\n          onClick={runDiagnosis}\n          disabled={isRunning}\n          className=\"w-full px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50\"\n        >\n          {isRunning ? 'Running...' : 'Run Diagnosis'}\n        </button>\n\n        <button\n          onClick={forceLogout}\n          className=\"w-full px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700\"\n        >\n          Force Logout & Redirect to Login\n        </button>\n      </div>\n\n      {diagnosis && (\n        <div className=\"mt-4 p-3 border rounded bg-gray-50\">\n          <div className=\"font-semibold mb-2\">\n            Issue: <span className={`${diagnosis.issue === 'NONE' ? 'text-green-600' : 'text-red-600'}`}>\n              {diagnosis.issue}\n            </span>\n          </div>\n          \n          {diagnosis.recommendation && (\n            <div className=\"text-sm text-gray-700 mb-2\">\n              <strong>Recommendation:</strong> {diagnosis.recommendation}\n            </div>\n          )}\n          \n          {diagnosis.error && (\n            <div className=\"text-sm\">\n              <strong>Error:</strong>\n              <pre className=\"text-xs bg-red-100 p-2 rounded mt-1 overflow-auto\">\n                {JSON.stringify(diagnosis.error, null, 2)}\n              </pre>\n            </div>\n          )}\n          \n          {diagnosis.data && (\n            <div className=\"text-sm\">\n              <strong>User Data:</strong>\n              <pre className=\"text-xs bg-green-100 p-2 rounded mt-1 overflow-auto max-h-32\">\n                {JSON.stringify(diagnosis.data, null, 2)}\n              </pre>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,EAAE,iBAAiB,EAAE,eAAe,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IAE3E,MAAM,eAAe;QACnB,aAAa;QACb,IAAI;YACF,MAAM,SAAS,MAAM;YACrB,aAAa;QACf,EAAE,OAAO,OAAO;YACd,aAAa;gBAAE,OAAO;gBAAS,OAAO,MAAM,OAAO;YAAC;QACtD,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,cAAc;QAClB;QACA,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,MAAM,QAAQ;IAEd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAErD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;kDAAO;;;;;;oCAAsB;oCAAE,QAAQ,cAAc;;;;;;;4BAEvD,uBACC,8OAAC;gCAAI,WAAU;;oCACZ,MAAM,SAAS,CAAC,GAAG;oCAAI;;;;;;;;;;;;;;;;;;;0BAMhC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;kCAET,YAAY,eAAe;;;;;;kCAG9B,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAKF,2BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;4BAAqB;0CAC3B,8OAAC;gCAAK,WAAW,GAAG,UAAU,KAAK,KAAK,SAAS,mBAAmB,gBAAgB;0CACxF,UAAU,KAAK;;;;;;;;;;;;oBAInB,UAAU,cAAc,kBACvB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAO;;;;;;4BAAwB;4BAAE,UAAU,cAAc;;;;;;;oBAI7D,UAAU,KAAK,kBACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAO;;;;;;0CACR,8OAAC;gCAAI,WAAU;0CACZ,KAAK,SAAS,CAAC,UAAU,KAAK,EAAE,MAAM;;;;;;;;;;;;oBAK5C,UAAU,IAAI,kBACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAO;;;;;;0CACR,8OAAC;gCAAI,WAAU;0CACZ,KAAK,SAAS,CAAC,UAAU,IAAI,EAAE,MAAM;;;;;;;;;;;;;;;;;;;;;;;;AAQtD","debugId":null}},
    {"offset": {"line": 8603, "column": 0}, "map": {"version":3,"sources":["file:///Users/bogusdeck/Projects/fasfas/twek/src/components/RegistrationForm.jsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport { useAuth } from '../contexts/AuthContext';\nimport { REGISTRATION_STEPS, ONBOARDING_STEPS, REGISTRATION_PROGRESS, REGISTRATION_STYLES } from '../utils/constants';\nimport { profileApi } from '../utils/api';\nimport StepHeader from './registration/StepHeader';\nimport PhoneNumberStep from './registration/PhoneNumberStep';\nimport PhoneVerificationStep from './registration/PhoneVerificationStep';\nimport EmailStep from './registration/EmailStep';\nimport EmailVerificationStep from './registration/EmailVerificationStep';\nimport PasswordStep from './registration/PasswordStep';\nimport GSTVerificationStep from './onboarding/GSTVerificationStep';\nimport BasicInformationStep from './onboarding/BasicInformationStep';\nimport SignatureUploadStep from './onboarding/SignatureUploadStep';\nimport BusinessPreferencesStep from './onboarding/BusinessPreferencesStep';\nimport WarehouseDetailsStep from './onboarding/WarehouseDetailsStep';\nimport BrandProductDetailsStep from './onboarding/BrandProductDetailsStep';\nimport BankingDetailsStep from './onboarding/BankingDetailsStep';\nimport ReviewSubmitStep from './onboarding/ReviewSubmitStep';\nimport OnboardingSidebar from './onboarding/OnboardingSidebar';\nimport AuthDiagnostic from './debug/AuthDiagnostic';\n\nexport default function RegistrationForm() {\n  const { getAuthToken, authenticatedFetch, formData: authFormData, saveFormData } = useAuth();\n  const searchParams = useSearchParams();\n  const stepFromUrl = searchParams.get('step');\n  const onboardingFromUrl = searchParams.get('onboarding');\n  \n  const [currentStep, setCurrentStep] = useState(stepFromUrl ? parseInt(stepFromUrl) : 1);\n  const [isOnboarding, setIsOnboarding] = useState(onboardingFromUrl === 'true'); // Start with authentication unless specified\n  const [isPhoneVerified, setIsPhoneVerified] = useState(false); // Track phone verification status\n  const [isEmailVerified, setIsEmailVerified] = useState(false); // Track email verification status\n  const [isLoading, setIsLoading] = useState(true);\n  const [profileData, setProfileData] = useState(null);\n  \n  // Initialize formData from AuthContext if available, otherwise use default values\n  const [formData, setFormData] = useState({\n    phoneNumber: '',\n    verificationCode: '',\n    email: '',\n    emailVerificationCode: '',\n    password: '',\n    confirmPassword: '',\n    firstName: '',\n    lastName: '',\n    gstNumber: '',\n    gstBusinessName: '',\n    gstTradeName: '',\n    gstConstitution: '',\n    gstAddress: '',\n    gstStatus: '',\n    gstRegistrationDate: '',\n    ownerName: '',\n    contactNumber: '',\n    businessEmail: '',\n    companyName: '',\n    companyType: '',\n    businessAddress: '',\n    signatureFile: null,\n    signatureFileName: '',\n    business_preference: '',\n    city_warehouses: [{ city_name: '', warehouse_count: 1 }],\n    daily_order_volume: '',\n    brand_logo: null,\n    product_categories: [],\n    gender: [],\n    target_age_groups: [18, 65],\n    price_range: ['', ''],\n    product_catalog: null,\n    account_holder_name: '',\n    account_number: '',\n    ifsc_code: '',\n    cancelled_cheque: null,\n  });\n\n  // Update local formData when AuthContext formData changes\n  useEffect(() => {\n    if (authFormData) {\n      console.log('=== FORM DATA POPULATION DEBUG ===');\n      console.log('AuthContext formData received:', authFormData);\n      \n      const updatedFormData = {\n        ...formData,\n        ...authFormData,\n        // Ensure array fields are properly handled\n        city_warehouses: authFormData.cityWarehouses && authFormData.cityWarehouses.length > 0 \n          ? authFormData.cityWarehouses \n          : formData.city_warehouses,\n        product_categories: authFormData.product_categories || formData.product_categories,\n        gender: authFormData.gender || formData.gender,\n        target_age_groups: authFormData.target_age_groups || formData.target_age_groups,\n        price_range: authFormData.price_range || formData.price_range,\n      };\n      \n      console.log('Updated RegistrationForm formData:', updatedFormData);\n      console.log('Key field values:');\n      console.log('- gstNumber:', updatedFormData.gstNumber);\n      console.log('- ownerName:', updatedFormData.ownerName);\n      console.log('- companyName:', updatedFormData.companyName);\n      console.log('- companyType:', updatedFormData.companyType);\n      console.log('- businessAddress:', updatedFormData.businessAddress);\n      console.log('- addressLine1:', updatedFormData.addressLine1);\n      console.log('- city_warehouses:', updatedFormData.city_warehouses);\n      console.log('=====================================');\n      \n      setFormData(updatedFormData);\n    }\n  }, [authFormData]);\n\n  // Check for authentication token and fetch profile status\n  useEffect(() => {\n    const checkAuthAndStatus = async () => {\n      const token = getAuthToken();\n      \n      if (token) {\n        try {\n          setIsLoading(true);\n          // const statusResponse = await profileApi.getStatus();\n          \n          // if (statusResponse.success && statusResponse.data?.profile) {\n          //   const { profile } = statusResponse.data;\n          //   setProfileData(profile);\n            \n          //   // Set verification status based on profile data\n          //   if (profile.status_code && profile.status_code >= 'PHONE_VERIFIED') {\n          //     setIsPhoneVerified(true);\n          //   }\n            \n          //   if (profile.status_code && profile.status_code >= 'EMAIL_VERIFIED') {\n          //     setIsEmailVerified(true);\n          //   }\n            \n          //   // Update form data with any existing profile data\n          //   setFormData(prevData => ({\n          //     ...prevData,\n          //     ...extractFormDataFromProfile(profile)\n          //   }));\n            \n          //   // Determine where to resume from\n          //   if (profile.is_onboarding_complete) {\n          //     // If fully completed, redirect to dashboard (this would be handled by the login flow)\n          //   } else if (profile.current_step) {\n          //     // Resume from where they left off\n          //     setCurrentStep(profile.current_step);\n          //     setIsOnboarding(profile.status_code && profile.status_code >= 'PASSWORD_SET');\n          //   }\n          // }\n        } catch (error) {\n          console.error('Failed to fetch profile status:', error);\n        } finally {\n          setIsLoading(false);\n        }\n      } else {\n        setIsLoading(false);\n      }\n    };\n    \n    checkAuthAndStatus();\n  }, []);\n  \n  // Helper function to extract form data from profile\n  // const extractFormDataFromProfile = (profile) => {\n  //   const data = {};\n    \n  //   // Map profile fields to form fields\n  //   if (profile.phone_number) data.phoneNumber = profile.phone_number;\n  //   if (profile.email) data.email = profile.email;\n  //   if (profile.first_name) data.firstName = profile.first_name;\n  //   if (profile.last_name) data.lastName = profile.last_name;\n    \n  //   // Handle onboarding data if available\n  //   if (profile.onboarding_data) {\n  //     const onboardingData = profile.onboarding_data;\n      \n  //     // Map GST info\n  //     if (onboardingData.gst_number) data.gstNumber = onboardingData.gst_number;\n  //     if (onboardingData.gst_business_name) data.gstBusinessName = onboardingData.gst_business_name;\n      \n  //     // Map other onboarding fields\n  //     // Add more mappings as needed for each step\n  //   }\n    \n  //   return data;\n  // };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    console.log('ðŸ“ RegistrationForm handleChange called:', { name, value, type: typeof value });\n    \n    const updatedData = {\n      ...formData,\n      [name]: value\n    };\n    \n    setFormData(updatedData);\n    console.log('ðŸ“‹ RegistrationForm formData updated:', { \n      fieldName: name, \n      fieldValue: value instanceof File ? `File: ${value.name}` : value,\n      signatureFileExists: !!(updatedData.signatureFile)\n    });\n    \n    // Also save to AuthContext for persistence (but not File objects)\n    if (!(value instanceof File)) {\n      saveFormData({ [name]: value });\n    } else {\n      console.log('ðŸ—‚ï¸ File object detected, not saving to AuthContext:', { name, fileName: value.name });\n    }\n  };\n\n  const handleNext = () => {\n    if (currentStep === 5 && !isOnboarding) {\n      // After password step (last auth step), switch to onboarding\n      console.log('Authentication completed! Starting brand onboarding...');\n      setIsOnboarding(true);\n      setCurrentStep(1); // Start with first onboarding step (GST verification)\n    } else if (isOnboarding) {\n      setCurrentStep(prev => Math.min(prev + 1, 8)); // 8 onboarding steps\n    } else {\n      setCurrentStep(prev => Math.min(prev + 1, 5)); // 5 authentication steps\n    }\n  };\n\n  const handleBack = () => {\n    if (isOnboarding && currentStep === 1) {\n      // Cannot go back from first onboarding step - onboarding has started\n      console.log('Cannot go back from first onboarding step');\n      return;\n    } else if (isOnboarding) {\n      // Allow going back within onboarding steps (after step 1)\n      setCurrentStep(prev => Math.max(prev - 1, 1));\n    } else {\n      // Allow going back within authentication steps\n      setCurrentStep(prev => Math.max(prev - 1, 1));\n    }\n  };\n\n  const handleSubmit = async () => {\n    // If we're submitting from the phone verification step, mark phone as verified\n    if (currentStep === 2) {\n      setIsPhoneVerified(true);\n    }\n    // If we're submitting from the email verification step, mark email as verified\n    if (currentStep === 4) {\n      setIsEmailVerified(true);\n    }\n    \n    // If user is authenticated (has token), update the progress on the server\n    // const token = localStorage.getItem('authToken');\n    // if (token) {\n    //   try {\n    //     // Update the current step on the server\n    //     await profileApi.updateProgress(currentStep, isOnboarding);\n        \n    //     // Fetch the updated status\n    //     const statusResponse = await profileApi.getStatus();\n    //     if (statusResponse.success && statusResponse.data?.profile) {\n    //       setProfileData(statusResponse.data.profile);\n    //     }\n    //   } catch (error) {\n    //     console.error('Failed to update progress:', error);\n    //     // Continue anyway, as this is not critical for the user flow\n    //   }\n    // }\n    \n    // Don't call handleNext() for the final step (step 8) in onboarding\n    // The OnboardingFlow component will handle the final submission internally\n    if (!(isOnboarding && currentStep === 8)) {\n      handleNext();\n    }\n  };\n\n  const handleResend = () => {\n    // Resend logic handled in individual step components\n  };\n\n  const currentStepData = isOnboarding ? ONBOARDING_STEPS[currentStep] : REGISTRATION_STEPS[currentStep];\n\n  const renderCurrentStep = () => {\n    if (isOnboarding) {\n      switch (currentStep) {\n        case 1:\n          return (\n            <GSTVerificationStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n              isFirstOnboardingStep={true}\n            />\n          );\n        case 2:\n          return (\n            <BasicInformationStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        case 3:\n          return (\n            <SignatureUploadStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        case 4:\n          return (\n            <BusinessPreferencesStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        case 5:\n          return (\n            <BrandProductDetailsStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        case 6:\n          return (\n            <WarehouseDetailsStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        case 7:\n          return (\n            <BankingDetailsStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        case 8:\n          return (\n            <ReviewSubmitStep\n              formData={formData}\n              handleChange={handleChange}\n              onSubmit={handleSubmit}\n              onBack={handleBack}\n            />\n          );\n        // TODO: Add other onboarding steps here\n        default:\n          return (\n            <div className=\"text-center py-8\">\n              <h3 className=\"text-lg font-semibold mb-2\">Onboarding Step {currentStep}</h3>\n              <p className=\"text-gray-600 mb-4\">This step is coming soon!</p>\n              <div className=\"space-x-4\">\n                <button\n                  onClick={handleBack}\n                  className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400\"\n                >\n                  Back\n                </button>\n                <button\n                  onClick={handleSubmit}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n                >\n                  Continue\n                </button>\n              </div>\n            </div>\n          );\n      }\n    }\n\n    // Registration steps\n    switch (currentStep) {\n      case 1:\n        return (\n          <PhoneNumberStep\n            formData={formData}\n            handleChange={handleChange}\n            onSubmit={handleSubmit}\n            onBack={handleBack}\n          />\n        );\n      case 2:\n        return (\n          <PhoneVerificationStep\n            formData={formData}\n            handleChange={handleChange}\n            onSubmit={handleSubmit}\n            onBack={handleBack}\n            onResend={handleResend}\n          />\n        );\n      case 3:\n        return (\n          <EmailStep\n            formData={formData}\n            handleChange={handleChange}\n            onSubmit={handleSubmit}\n            onBack={handleBack}\n            isPhoneVerified={isPhoneVerified}\n          />\n        );\n      case 4:\n        return (\n          <EmailVerificationStep\n            formData={formData}\n            handleChange={handleChange}\n            onSubmit={handleSubmit}\n            onBack={handleBack}\n            onResend={handleResend}\n          />\n        );\n      case 5:\n        return (\n          <PasswordStep\n            formData={formData}\n            handleChange={handleChange}\n            onSubmit={handleSubmit}\n            onBack={handleBack}\n            isEmailVerified={isEmailVerified}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  // Display a loading state while checking authentication status\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-[#241331]/5 via-white to-[#C3AF6C]/5 flex items-center justify-center\">\n        <div className=\"text-center bg-white/90 backdrop-blur-md rounded-2xl shadow-xl p-12 border border-[#241331]/10\">\n          <div className=\"animate-spin rounded-full h-16 w-16 border-b-4 border-[#241331] mx-auto mb-6\"></div>\n          <p className=\"text-lg text-[#241331] font-itc-gothic font-bold\">Loading your profile...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-[#241331]/5 via-white to-[#C3AF6C]/5 flex\">\n      {/* Temporary Auth Diagnostic Tool */}\n      {/* <AuthDiagnostic /> */}\n      \n      {/* Sidebar - show during onboarding */}\n      {isOnboarding && <OnboardingSidebar currentStep={currentStep} />}\n      \n      {/* Main Content */}\n      <div className={`flex-1 ${isOnboarding ? 'ml-80' : ''}`}>\n        <div className={REGISTRATION_STYLES.container}>\n          <div className={REGISTRATION_STYLES.formContainer}>\n            {/* Step Header */}\n            <StepHeader \n              title={currentStepData?.title || 'Registration'} \n              subtitle={currentStepData?.subtitle || 'Complete your registration'} \n            />\n\n            {/* Progress Indicator */}\n            <div className=\"mb-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-sm font-bold text-[#241331] font-itc-gothic\">\n                  {isOnboarding ? 'Brand Onboarding' : 'Authentication'}\n                </span>\n                <span className=\"text-sm text-[#241331]/60 font-itc-gothic\">\n                  Step {currentStep} of {isOnboarding ? 8 : 5}\n                </span>\n              </div>\n              <div className=\"w-full bg-[#241331]/10 rounded-full h-3\">\n                <div \n                  className=\"bg-gradient-to-r from-[#241331] to-[#C3AF6C] h-3 rounded-full transition-all duration-500 shadow-lg\" \n                  style={{ width: `${(currentStep / (isOnboarding ? 8 : 5)) * 100}%` }}\n                ></div>\n              </div>\n              {/* Phase indicator */}\n              <div className=\"mt-3 text-xs text-[#241331]/60 font-itc-gothic\">\n                {isOnboarding ? \n                  <span><span className=\"text-[#C3AF6C] font-bold\">âœ“</span> Authentication Complete â€¢ <span className=\"text-[#C3AF6C] font-bold\">Brand Setup in Progress</span></span> : \n                  <span className=\"text-[#241331] font-bold\">Authentication in Progress</span>\n                }\n              </div>\n            </div>\n\n            {/* Current Step Component */}\n            {renderCurrentStep()}\n\n            {/* Login Link (only on first authentication step) */}\n            {currentStep === 1 && !isOnboarding && (\n              <div className={REGISTRATION_STYLES.linkContainer}>\n                <p className={REGISTRATION_STYLES.linkText}>\n                  Already have an account?{' '}\n                  <Link href=\"/login\" className={REGISTRATION_STYLES.link}>\n                    Sign in\n                  </Link>\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;;;;;;;;;;;;;;;;;;;;;;;;AAyBe,SAAS;IACtB,MAAM,EAAE,YAAY,EAAE,kBAAkB,EAAE,UAAU,YAAY,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,UAAO,AAAD;IACzF,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,cAAc,aAAa,GAAG,CAAC;IACrC,MAAM,oBAAoB,aAAa,GAAG,CAAC;IAE3C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,cAAc,SAAS,eAAe;IACrF,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,sBAAsB,SAAS,6CAA6C;IAC7H,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,kCAAkC;IACjG,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,kCAAkC;IACjG,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,kFAAkF;IAClF,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,aAAa;QACb,kBAAkB;QAClB,OAAO;QACP,uBAAuB;QACvB,UAAU;QACV,iBAAiB;QACjB,WAAW;QACX,UAAU;QACV,WAAW;QACX,iBAAiB;QACjB,cAAc;QACd,iBAAiB;QACjB,YAAY;QACZ,WAAW;QACX,qBAAqB;QACrB,WAAW;QACX,eAAe;QACf,eAAe;QACf,aAAa;QACb,aAAa;QACb,iBAAiB;QACjB,eAAe;QACf,mBAAmB;QACnB,qBAAqB;QACrB,iBAAiB;YAAC;gBAAE,WAAW;gBAAI,iBAAiB;YAAE;SAAE;QACxD,oBAAoB;QACpB,YAAY;QACZ,oBAAoB,EAAE;QACtB,QAAQ,EAAE;QACV,mBAAmB;YAAC;YAAI;SAAG;QAC3B,aAAa;YAAC;YAAI;SAAG;QACrB,iBAAiB;QACjB,qBAAqB;QACrB,gBAAgB;QAChB,WAAW;QACX,kBAAkB;IACpB;IAEA,0DAA0D;IAC1D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,cAAc;YAChB,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,kCAAkC;YAE9C,MAAM,kBAAkB;gBACtB,GAAG,QAAQ;gBACX,GAAG,YAAY;gBACf,2CAA2C;gBAC3C,iBAAiB,aAAa,cAAc,IAAI,aAAa,cAAc,CAAC,MAAM,GAAG,IACjF,aAAa,cAAc,GAC3B,SAAS,eAAe;gBAC5B,oBAAoB,aAAa,kBAAkB,IAAI,SAAS,kBAAkB;gBAClF,QAAQ,aAAa,MAAM,IAAI,SAAS,MAAM;gBAC9C,mBAAmB,aAAa,iBAAiB,IAAI,SAAS,iBAAiB;gBAC/E,aAAa,aAAa,WAAW,IAAI,SAAS,WAAW;YAC/D;YAEA,QAAQ,GAAG,CAAC,sCAAsC;YAClD,QAAQ,GAAG,CAAC;YACZ,QAAQ,GAAG,CAAC,gBAAgB,gBAAgB,SAAS;YACrD,QAAQ,GAAG,CAAC,gBAAgB,gBAAgB,SAAS;YACrD,QAAQ,GAAG,CAAC,kBAAkB,gBAAgB,WAAW;YACzD,QAAQ,GAAG,CAAC,kBAAkB,gBAAgB,WAAW;YACzD,QAAQ,GAAG,CAAC,sBAAsB,gBAAgB,eAAe;YACjE,QAAQ,GAAG,CAAC,mBAAmB,gBAAgB,YAAY;YAC3D,QAAQ,GAAG,CAAC,sBAAsB,gBAAgB,eAAe;YACjE,QAAQ,GAAG,CAAC;YAEZ,YAAY;QACd;IACF,GAAG;QAAC;KAAa;IAEjB,0DAA0D;IAC1D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB;YACzB,MAAM,QAAQ;YAEd,IAAI,OAAO;gBACT,IAAI;oBACF,aAAa;gBACb,uDAAuD;gBAEvD,gEAAgE;gBAChE,6CAA6C;gBAC7C,6BAA6B;gBAE7B,qDAAqD;gBACrD,0EAA0E;gBAC1E,gCAAgC;gBAChC,MAAM;gBAEN,0EAA0E;gBAC1E,gCAAgC;gBAChC,MAAM;gBAEN,uDAAuD;gBACvD,+BAA+B;gBAC/B,mBAAmB;gBACnB,6CAA6C;gBAC7C,SAAS;gBAET,sCAAsC;gBACtC,0CAA0C;gBAC1C,6FAA6F;gBAC7F,uCAAuC;gBACvC,yCAAyC;gBACzC,4CAA4C;gBAC5C,qFAAqF;gBACrF,MAAM;gBACN,IAAI;gBACN,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,mCAAmC;gBACnD,SAAU;oBACR,aAAa;gBACf;YACF,OAAO;gBACL,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,oDAAoD;IACpD,oDAAoD;IACpD,qBAAqB;IAErB,yCAAyC;IACzC,uEAAuE;IACvE,mDAAmD;IACnD,iEAAiE;IACjE,8DAA8D;IAE9D,2CAA2C;IAC3C,mCAAmC;IACnC,sDAAsD;IAEtD,sBAAsB;IACtB,iFAAiF;IACjF,qGAAqG;IAErG,qCAAqC;IACrC,mDAAmD;IACnD,MAAM;IAEN,iBAAiB;IACjB,KAAK;IAEL,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAEhC,QAAQ,GAAG,CAAC,4CAA4C;YAAE;YAAM;YAAO,MAAM,OAAO;QAAM;QAE1F,MAAM,cAAc;YAClB,GAAG,QAAQ;YACX,CAAC,KAAK,EAAE;QACV;QAEA,YAAY;QACZ,QAAQ,GAAG,CAAC,yCAAyC;YACnD,WAAW;YACX,YAAY,iBAAiB,OAAO,CAAC,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG;YAC5D,qBAAqB,CAAC,CAAE,YAAY,aAAa;QACnD;QAEA,kEAAkE;QAClE,IAAI,CAAC,CAAC,iBAAiB,IAAI,GAAG;YAC5B,aAAa;gBAAE,CAAC,KAAK,EAAE;YAAM;QAC/B,OAAO;YACL,QAAQ,GAAG,CAAC,wDAAwD;gBAAE;gBAAM,UAAU,MAAM,IAAI;YAAC;QACnG;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,gBAAgB,KAAK,CAAC,cAAc;YACtC,6DAA6D;YAC7D,QAAQ,GAAG,CAAC;YACZ,gBAAgB;YAChB,eAAe,IAAI,sDAAsD;QAC3E,OAAO,IAAI,cAAc;YACvB,eAAe,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,GAAG,KAAK,qBAAqB;QACtE,OAAO;YACL,eAAe,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,GAAG,KAAK,yBAAyB;QAC1E;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,gBAAgB,gBAAgB,GAAG;YACrC,qEAAqE;YACrE,QAAQ,GAAG,CAAC;YACZ;QACF,OAAO,IAAI,cAAc;YACvB,0DAA0D;YAC1D,eAAe,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,GAAG;QAC5C,OAAO;YACL,+CAA+C;YAC/C,eAAe,CAAA,OAAQ,KAAK,GAAG,CAAC,OAAO,GAAG;QAC5C;IACF;IAEA,MAAM,eAAe;QACnB,+EAA+E;QAC/E,IAAI,gBAAgB,GAAG;YACrB,mBAAmB;QACrB;QACA,+EAA+E;QAC/E,IAAI,gBAAgB,GAAG;YACrB,mBAAmB;QACrB;QAEA,0EAA0E;QAC1E,mDAAmD;QACnD,eAAe;QACf,UAAU;QACV,+CAA+C;QAC/C,kEAAkE;QAElE,kCAAkC;QAClC,2DAA2D;QAC3D,oEAAoE;QACpE,qDAAqD;QACrD,QAAQ;QACR,sBAAsB;QACtB,0DAA0D;QAC1D,oEAAoE;QACpE,MAAM;QACN,IAAI;QAEJ,oEAAoE;QACpE,2EAA2E;QAC3E,IAAI,CAAC,CAAC,gBAAgB,gBAAgB,CAAC,GAAG;YACxC;QACF;IACF;IAEA,MAAM,eAAe;IACnB,qDAAqD;IACvD;IAEA,MAAM,kBAAkB,eAAe,yHAAA,CAAA,mBAAgB,CAAC,YAAY,GAAG,yHAAA,CAAA,qBAAkB,CAAC,YAAY;IAEtG,MAAM,oBAAoB;QACxB,IAAI,cAAc;YAChB,OAAQ;gBACN,KAAK;oBACH,qBACE,8OAAC,uJAAA,CAAA,UAAmB;wBAClB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;wBACR,uBAAuB;;;;;;gBAG7B,KAAK;oBACH,qBACE,8OAAC,wJAAA,CAAA,UAAoB;wBACnB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,KAAK;oBACH,qBACE,8OAAC,uJAAA,CAAA,UAAmB;wBAClB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,KAAK;oBACH,qBACE,8OAAC,2JAAA,CAAA,UAAuB;wBACtB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,KAAK;oBACH,qBACE,8OAAC,2JAAA,CAAA,UAAuB;wBACtB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,KAAK;oBACH,qBACE,8OAAC,wJAAA,CAAA,UAAoB;wBACnB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,KAAK;oBACH,qBACE,8OAAC,sJAAA,CAAA,UAAkB;wBACjB,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,KAAK;oBACH,qBACE,8OAAC,oJAAA,CAAA,UAAgB;wBACf,UAAU;wBACV,cAAc;wBACd,UAAU;wBACV,QAAQ;;;;;;gBAGd,wCAAwC;gBACxC;oBACE,qBACE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAA6B;oCAAiB;;;;;;;0CAC5D,8OAAC;gCAAE,WAAU;0CAAqB;;;;;;0CAClC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;kDAGD,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;YAMX;QACF;QAEA,qBAAqB;QACrB,OAAQ;YACN,KAAK;gBACH,qBACE,8OAAC,qJAAA,CAAA,UAAe;oBACd,UAAU;oBACV,cAAc;oBACd,UAAU;oBACV,QAAQ;;;;;;YAGd,KAAK;gBACH,qBACE,8OAAC,2JAAA,CAAA,UAAqB;oBACpB,UAAU;oBACV,cAAc;oBACd,UAAU;oBACV,QAAQ;oBACR,UAAU;;;;;;YAGhB,KAAK;gBACH,qBACE,8OAAC,+IAAA,CAAA,UAAS;oBACR,UAAU;oBACV,cAAc;oBACd,UAAU;oBACV,QAAQ;oBACR,iBAAiB;;;;;;YAGvB,KAAK;gBACH,qBACE,8OAAC,2JAAA,CAAA,UAAqB;oBACpB,UAAU;oBACV,cAAc;oBACd,UAAU;oBACV,QAAQ;oBACR,UAAU;;;;;;YAGhB,KAAK;gBACH,qBACE,8OAAC,kJAAA,CAAA,UAAY;oBACX,UAAU;oBACV,cAAc;oBACd,UAAU;oBACV,QAAQ;oBACR,iBAAiB;;;;;;YAGvB;gBACE,OAAO;QACX;IACF;IAEA,+DAA+D;IAC/D,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAmD;;;;;;;;;;;;;;;;;IAIxE;IAEA,qBACE,8OAAC;QAAI,WAAU;;YAKZ,8BAAgB,8OAAC,qJAAA,CAAA,UAAiB;gBAAC,aAAa;;;;;;0BAGjD,8OAAC;gBAAI,WAAW,CAAC,OAAO,EAAE,eAAe,UAAU,IAAI;0BACrD,cAAA,8OAAC;oBAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,SAAS;8BAC3C,cAAA,8OAAC;wBAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,aAAa;;0CAE/C,8OAAC,gJAAA,CAAA,UAAU;gCACT,OAAO,iBAAiB,SAAS;gCACjC,UAAU,iBAAiB,YAAY;;;;;;0CAIzC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DACb,eAAe,qBAAqB;;;;;;0DAEvC,8OAAC;gDAAK,WAAU;;oDAA4C;oDACpD;oDAAY;oDAAK,eAAe,IAAI;;;;;;;;;;;;;kDAG9C,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO,GAAG,AAAC,cAAc,CAAC,eAAe,IAAI,CAAC,IAAK,IAAI,CAAC,CAAC;4CAAC;;;;;;;;;;;kDAIvE,8OAAC;wCAAI,WAAU;kDACZ,6BACC,8OAAC;;8DAAK,8OAAC;oDAAK,WAAU;8DAA2B;;;;;;gDAAQ;8DAA2B,8OAAC;oDAAK,WAAU;8DAA2B;;;;;;;;;;;iEAC/H,8OAAC;4CAAK,WAAU;sDAA2B;;;;;;;;;;;;;;;;;4BAMhD;4BAGA,gBAAgB,KAAK,CAAC,8BACrB,8OAAC;gCAAI,WAAW,yHAAA,CAAA,sBAAmB,CAAC,aAAa;0CAC/C,cAAA,8OAAC;oCAAE,WAAW,yHAAA,CAAA,sBAAmB,CAAC,QAAQ;;wCAAE;wCACjB;sDACzB,8OAAC,4JAAA,CAAA,UAAI;4CAAC,MAAK;4CAAS,WAAW,yHAAA,CAAA,sBAAmB,CAAC,IAAI;sDAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW3E","debugId":null}}]
}